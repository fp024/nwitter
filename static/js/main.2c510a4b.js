/*! For license information please see main.2c510a4b.js.LICENSE.txt */
!function(){var e={285:function(e,t,n){"use strict";var r=n(392),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!r||!r[y])&&(!v||!v[y])&&(!u||!u[y])){var g=h(n,y);try{c(t,y,g)}catch(k){}}}}return t}},70:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return b(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return _(e)||b(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===m},t.isMemo=function(e){return b(e)===v},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===u},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===w||e.$$typeof===y)},t.typeOf=b},392:function(e,t,n){"use strict";e.exports=n(70)},154:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},745:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var a,o,u=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var c in a=Object(arguments[s]))n.call(a,c)&&(u[c]=a[c]);if(t){o=t(a);for(var l=0;l<o.length;l++)r.call(a,o[l])&&(u[o[l]]=a[o[l]])}}return u}},691:function(e,t,n){var r=n(154);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return u(a(e,t),t)},e.exports.tokensToFunction=u,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,u="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var f=n[0],h=n[1],d=n.index;if(u+=e.slice(o,d),o=d+f.length,h)u+=h[1];else{var p=e[o],v=n[2],m=n[3],y=n[4],g=n[5],k=n[6],w=n[7];u&&(r.push(u),u="");var b=null!=v&&null!=p&&p!==v,_="+"===k||"*"===k,x="?"===k||"*"===k,I=n[2]||l,E=y||g;r.push({name:m||a++,prefix:v||"",delimiter:I,optional:x,repeat:_,partial:b,asterisk:!!w,pattern:E?c(E):w?".*":"[^"+s(I)+"]+?"})}}return o<e.length&&(u+=e.substr(o)),u&&r.push(u),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function u(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",f(t)));return function(t,i){for(var a="",u=t||{},s=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var f,h=u[l.name];if(null==h){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(f=s(h[d]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(0===d?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):s(h),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');a+=l.prefix+f}}else a+=l}return a}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",u=0;u<e.length;u++){var c=e[u];if("string"===typeof c)o+=s(c);else{var h=s(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+h+d+")*"),o+=d=c.optional?c.partial?h+"("+d+")?":"(?:"+h+"("+d+"))?":h+"("+d+")"}}var p=s(n.delimiter||"/"),v=o.slice(-p.length)===p;return i||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":i&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,f(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return h(a(e,n),t,n)}(e,t,n)}},199:function(e,t,n){"use strict";var r=n(547);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},595:function(e,t,n){e.exports=n(199)()},547:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},13:function(e,t,n){"use strict";var r=n(75),i=n(745),a=n(579);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var u=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)u.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=60103,x=60106,I=60107,E=60108,T=60114,S=60109,C=60110,A=60112,N=60113,R=60120,O=60115,P=60116,D=60121,L=60128,M=60129,F=60130,U=60131;if("function"===typeof Symbol&&Symbol.for){var V=Symbol.for;_=V("react.element"),x=V("react.portal"),I=V("react.fragment"),E=V("react.strict_mode"),T=V("react.profiler"),S=V("react.provider"),C=V("react.context"),A=V("react.forward_ref"),N=V("react.suspense"),R=V("react.suspense_list"),O=V("react.memo"),P=V("react.lazy"),D=V("react.block"),V("react.scope"),L=V("react.opaque.id"),M=V("react.debug_trace_mode"),F=V("react.offscreen"),U=V("react.legacy_hidden")}var j,z="function"===typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=z&&e[z]||e["@@iterator"])?e:null}function q(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var G=!1;function K(e,t){if(!e||G)return"";G=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var r=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){r=s}e.call(t.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"===typeof s.stack){for(var i=s.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=u);break}}}finally{G=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?q(e):""}function H(e){switch(e.tag){case 5:return q(e.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return e=K(e.type,!1);case 11:return e=K(e.type.render,!1);case 22:return e=K(e.type._render,!1);case 1:return e=K(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case x:return"Portal";case T:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case O:return W(e.type);case D:return W(e._render);case P:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ue(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function he(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function de(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?he(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var pe,ve,me=(ve=function(e,t){if(e.namespaceURI!==fe.svg||"innerHTML"in e)e.innerHTML=t;else{for((pe=pe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ve(e,t)}))}:ve);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ge={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ke=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ge.hasOwnProperty(e)&&ge[e]?(""+t).trim():t+"px"}function be(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ge).forEach((function(e){ke.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ge[t]=ge[e]}))}));var _e=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(_e[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ie(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Te=null,Se=null,Ce=null;function Ae(e){if(e=ni(e)){if("function"!==typeof Te)throw Error(o(280));var t=e.stateNode;t&&(t=ii(t),Te(e.stateNode,e.type,t))}}function Ne(e){Se?Ce?Ce.push(e):Ce=[e]:Se=e}function Re(){if(Se){var e=Se,t=Ce;if(Ce=Se=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Oe(e,t){return e(t)}function Pe(e,t,n,r,i){return e(t,n,r,i)}function De(){}var Le=Oe,Me=!1,Fe=!1;function Ue(){null===Se&&null===Ce||(De(),Re())}function Ve(e,t){var n=e.stateNode;if(null===n)return null;var r=ii(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var je=!1;if(f)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){je=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(ve){je=!1}function Be(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var qe=!1,Ge=null,Ke=!1,He=null,We={onError:function(e){qe=!0,Ge=e}};function Qe(e,t,n,r,i,a,o,u,s){qe=!1,Ge=null,Be.apply(We,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(Ye(e)!==e)throw Error(o(188))}function Je(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return $e(i),e;if(a===r)return $e(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ze(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,rt,it=!1,at=[],ot=null,ut=null,st=null,ct=new Map,lt=new Map,ft=[],ht="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function pt(e,t){switch(e){case"focusin":case"focusout":ot=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":st=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":lt.delete(t.pointerId)}}function vt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=dt(t,n,r,i,a),null!==t&&(null!==(t=ni(t))&&tt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=ti(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ni(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function gt(e,t,n){yt(e)&&n.delete(t)}function kt(){for(it=!1;0<at.length;){var e=at[0];if(null!==e.blockedOn){null!==(e=ni(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&at.shift()}null!==ot&&yt(ot)&&(ot=null),null!==ut&&yt(ut)&&(ut=null),null!==st&&yt(st)&&(st=null),ct.forEach(gt),lt.forEach(gt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,kt)))}function bt(e){function t(t){return wt(t,e)}if(0<at.length){wt(at[0],e);for(var n=1;n<at.length;n++){var r=at[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ot&&wt(ot,e),null!==ut&&wt(ut,e),null!==st&&wt(st,e),ct.forEach(t),lt.forEach(t),n=0;n<ft.length;n++)(r=ft[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ft.length&&null===(n=ft[0]).blockedOn;)mt(n),null===n.blockedOn&&ft.shift()}function _t(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xt={animationend:_t("Animation","AnimationEnd"),animationiteration:_t("Animation","AnimationIteration"),animationstart:_t("Animation","AnimationStart"),transitionend:_t("Transition","TransitionEnd")},It={},Et={};function Tt(e){if(It[e])return It[e];if(!xt[e])return e;var t,n=xt[e];for(t in n)if(n.hasOwnProperty(t)&&t in Et)return It[e]=n[t];return e}f&&(Et=document.createElement("div").style,"AnimationEvent"in window||(delete xt.animationend.animation,delete xt.animationiteration.animation,delete xt.animationstart.animation),"TransitionEvent"in window||delete xt.transitionend.transition);var St=Tt("animationend"),Ct=Tt("animationiteration"),At=Tt("animationstart"),Nt=Tt("transitionend"),Rt=new Map,Ot=new Map,Pt=["abort","abort",St,"animationEnd",Ct,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Nt,"transitionEnd","waiting","waiting"];function Dt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Ot.set(r,t),Rt.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Lt=8;function Mt(e){if(0!==(1&e))return Lt=15,1;if(0!==(2&e))return Lt=14,2;if(0!==(4&e))return Lt=13,4;var t=24&e;return 0!==t?(Lt=12,t):0!==(32&e)?(Lt=11,32):0!==(t=192&e)?(Lt=10,t):0!==(256&e)?(Lt=9,256):0!==(t=3584&e)?(Lt=8,t):0!==(4096&e)?(Lt=7,4096):0!==(t=4186112&e)?(Lt=6,t):0!==(t=62914560&e)?(Lt=5,t):67108864&e?(Lt=4,67108864):0!==(134217728&e)?(Lt=3,134217728):0!==(t=805306368&e)?(Lt=2,t):0!==(1073741824&e)?(Lt=1,1073741824):(Lt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return Lt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==a)r=a,i=Lt=15;else if(0!==(a=134217727&n)){var s=a&~o;0!==s?(r=Mt(s),i=Lt):0!==(u&=a)&&(r=Mt(u),i=Lt)}else 0!==(a=n&~o)?(r=Mt(a),i=Lt):0!==u&&(r=Mt(u),i=Lt);if(0===r)return 0;if(r=n&((0>(r=31-qt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Mt(t),i<=Lt)return t;Lt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-qt(t)),r|=e[n],t&=~i;return r}function Ut(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Vt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=jt(24&~t))?Vt(10,t):e;case 10:return 0===(e=jt(192&~t))?Vt(8,t):e;case 8:return 0===(e=jt(3584&~t))&&(0===(e=jt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=jt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function jt(e){return e&-e}function zt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-qt(t)]=n}var qt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Gt(e)/Kt|0)|0},Gt=Math.log,Kt=Math.LN2;var Ht=a.unstable_UserBlockingPriority,Wt=a.unstable_runWithPriority,Qt=!0;function Yt(e,t,n,r){Me||De();var i=$t,a=Me;Me=!0;try{Pe(i,e,t,n,r)}finally{(Me=a)||Ue()}}function Xt(e,t,n,r){Wt(Ht,$t.bind(null,e,t,n,r))}function $t(e,t,n,r){var i;if(Qt)if((i=0===(4&t))&&0<at.length&&-1<ht.indexOf(e))e=dt(null,e,t,n,r),at.push(e);else{var a=Jt(e,t,n,r);if(null===a)i&&pt(e,r);else{if(i){if(-1<ht.indexOf(e))return e=dt(a,e,t,n,r),void at.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ot=vt(ot,e,t,n,r,i),!0;case"dragenter":return ut=vt(ut,e,t,n,r,i),!0;case"mouseover":return st=vt(st,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return ct.set(a,vt(ct.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,lt.set(a,vt(lt.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;pt(e,r)}Dr(e,t,r,null,n)}}}function Jt(e,t,n,r){var i=Ee(r);if(null!==(i=ti(i))){var a=Ye(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Xe(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Dr(e,t,r,i,n),null}var Zt=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return tn=i.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function an(){return!0}function on(){return!1}function un(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?an:on,this.isPropagationStopped=on,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),t}var sn,cn,ln,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=un(fn),dn=i({},fn,{view:0,detail:0}),pn=un(dn),vn=i({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,cn=e.screenY-ln.screenY):cn=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),mn=un(vn),yn=un(i({},vn,{dataTransfer:0})),gn=un(i({},dn,{relatedTarget:0})),kn=un(i({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=i({},fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=un(wn),_n=un(i({},fn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},In={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Sn(){return Tn}var Cn=i({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?In[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=un(Cn),Nn=un(i({},vn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=un(i({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),On=un(i({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=i({},vn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=un(Pn),Ln=[9,13,27,32],Mn=f&&"CompositionEvent"in window,Fn=null;f&&"documentMode"in document&&(Fn=document.documentMode);var Un=f&&"TextEvent"in window&&!Fn,Vn=f&&(!Mn||Fn&&8<Fn&&11>=Fn),jn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var Kn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Kn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ne(r),0<(t=Mr(t,"onChange")).length&&(n=new hn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Yn=null;function Xn(e){Cr(e,0)}function $n(e){if($(ri(e)))return e}function Jn(e,t){if("change"===e)return t}var Zn=!1;if(f){var er;if(f){var tr="oninput"in document;if(!tr){var nr=document.createElement("div");nr.setAttribute("oninput","return;"),tr="function"===typeof nr.oninput}er=tr}else er=!1;Zn=er&&(!document.documentMode||9<document.documentMode)}function rr(){Qn&&(Qn.detachEvent("onpropertychange",ir),Yn=Qn=null)}function ir(e){if("value"===e.propertyName&&$n(Yn)){var t=[];if(Wn(t,Yn,e,Ee(e)),e=Xn,Me)e(t);else{Me=!0;try{Oe(e,t)}finally{Me=!1,Ue()}}}}function ar(e,t,n){"focusin"===e?(rr(),Yn=n,(Qn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&rr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Yn)}function ur(e,t){if("click"===e)return $n(t)}function sr(e,t){if("input"===e||"change"===e)return $n(t)}var cr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},lr=Object.prototype.hasOwnProperty;function fr(e,t){if(cr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!lr.call(t,n[r])||!cr(e[n[r]],t[n[r]]))return!1;return!0}function hr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=hr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hr(r)}}function pr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function vr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yr=f&&"documentMode"in document&&11>=document.documentMode,gr=null,kr=null,wr=null,br=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==J(r)||("selectionStart"in(r=gr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&fr(wr,r)||(wr=r,0<(r=Mr(kr,"onSelect")).length&&(t=new hn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}Dt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Dt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Dt(Pt,2);for(var xr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Ir=0;Ir<xr.length;Ir++)Ot.set(xr[Ir],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Er="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Er));function Sr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,u,s,c){if(Qe.apply(this,arguments),qe){if(!qe)throw Error(o(198));var l=Ge;qe=!1,Ge=null,Ke||(Ke=!0,He=l)}}(r,t,void 0,e),e.currentTarget=null}function Cr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Sr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Sr(i,u,c),a=s}}}if(Ke)throw e=He,Ke=!1,He=null,e}function Ar(e,t){var n=ai(t),r=e+"__bubble";n.has(r)||(Pr(t,e,2,!1),n.add(r))}var Nr="_reactListening"+Math.random().toString(36).slice(2);function Rr(e){e[Nr]||(e[Nr]=!0,u.forEach((function(t){Tr.has(t)||Or(t,!1,e,null),Or(t,!0,e,null)})))}function Or(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Tr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=ai(a),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(i|=4),Pr(a,e,i,t),o.add(u))}function Pr(e,t,n,r){var i=Ot.get(t);switch(void 0===i?2:i){case 0:i=Yt;break;case 1:i=Xt;break;default:i=$t}n=i.bind(null,t,n,e),i=void 0,!je||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Dr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=ti(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}!function(e,t,n){if(Fe)return e(t,n);Fe=!0;try{return Le(e,t,n)}finally{Fe=!1,Ue()}}((function(){var r=a,i=Ee(n),o=[];e:{var u=Rt.get(e);if(void 0!==u){var s=hn,c=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":s=An;break;case"focusin":c="focus",s=gn;break;case"focusout":c="blur",s=gn;break;case"beforeblur":case"afterblur":s=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Rn;break;case St:case Ct:case At:s=kn;break;case Nt:s=On;break;case"scroll":s=pn;break;case"wheel":s=Dn;break;case"copy":case"cut":case"paste":s=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Nn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Ve(p,h))&&l.push(Lr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ti(c)&&!c[Zr])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?ti(c):null)&&(c!==(f=Ye(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=mn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Nn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:ri(s),d=null==c?u:ri(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,ti(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Fr(d))p++;for(d=0,v=h;v;v=Fr(v))d++;for(;0<p-d;)l=Fr(l),p--;for(;0<d-p;)h=Fr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Fr(l),h=Fr(h)}l=null}else l=null;null!==s&&Ur(o,u,s,l,!1),null!==c&&null!==f&&Ur(o,f,c,l,!0)}if("select"===(s=(u=r?ri(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Jn;else if(Hn(u))if(Zn)m=sr;else{m=or;var y=ar}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ur);switch(m&&(m=m(e,r))?Wn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ie(u,"number",u.value)),y=r?ri(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(gr=y,kr=r,wr=null);break;case"focusout":wr=kr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,_r(o,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":_r(o,n,i)}var g;if(Mn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Gn?Bn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Vn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Gn&&(g=nn()):(en="value"in(Zt=i)?Zt.value:Zt.textContent,Gn=!0)),0<(y=Mr(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=qn(n))&&(k.data=g))),(g=Un?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(zn=!0,jn);case"textInput":return(e=t.data)===jn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!Mn&&Bn(e,t)?(e=nn(),tn=en=Zt=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Mr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Cr(o,t)}))}function Lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ve(e,n))&&r.unshift(Lr(e,a,i)),null!=(a=Ve(e,t))&&r.push(Lr(e,a,i))),e=e.return}return r}function Fr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ur(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Ve(n,a))&&o.unshift(Lr(n,s,u)):i||null!=(s=Ve(n,a))&&o.push(Lr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Vr(){}var jr=null,zr=null;function Br(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function qr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Gr="function"===typeof setTimeout?setTimeout:void 0,Kr="function"===typeof clearTimeout?clearTimeout:void 0;function Hr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Wr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Qr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Yr=0;var Xr=Math.random().toString(36).slice(2),$r="__reactFiber$"+Xr,Jr="__reactProps$"+Xr,Zr="__reactContainer$"+Xr,ei="__reactEvents$"+Xr;function ti(e){var t=e[$r];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zr]||n[$r]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Qr(e);null!==e;){if(n=e[$r])return n;e=Qr(e)}return t}n=(e=n).parentNode}return null}function ni(e){return!(e=e[$r]||e[Zr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ri(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ii(e){return e[Jr]||null}function ai(e){var t=e[ei];return void 0===t&&(t=e[ei]=new Set),t}var oi=[],ui=-1;function si(e){return{current:e}}function ci(e){0>ui||(e.current=oi[ui],oi[ui]=null,ui--)}function li(e,t){ui++,oi[ui]=e.current,e.current=t}var fi={},hi=si(fi),di=si(!1),pi=fi;function vi(e,t){var n=e.type.contextTypes;if(!n)return fi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function yi(){ci(di),ci(hi)}function gi(e,t,n){if(hi.current!==fi)throw Error(o(168));li(hi,t),li(di,n)}function ki(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,W(t)||"Unknown",a));return i({},n,r)}function wi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fi,pi=hi.current,li(hi,e),li(di,di.current),!0}function bi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=ki(e,t,pi),r.__reactInternalMemoizedMergedChildContext=e,ci(di),ci(hi),li(hi,e)):ci(di),li(di,n)}var _i=null,xi=null,Ii=a.unstable_runWithPriority,Ei=a.unstable_scheduleCallback,Ti=a.unstable_cancelCallback,Si=a.unstable_shouldYield,Ci=a.unstable_requestPaint,Ai=a.unstable_now,Ni=a.unstable_getCurrentPriorityLevel,Ri=a.unstable_ImmediatePriority,Oi=a.unstable_UserBlockingPriority,Pi=a.unstable_NormalPriority,Di=a.unstable_LowPriority,Li=a.unstable_IdlePriority,Mi={},Fi=void 0!==Ci?Ci:function(){},Ui=null,Vi=null,ji=!1,zi=Ai(),Bi=1e4>zi?Ai:function(){return Ai()-zi};function qi(){switch(Ni()){case Ri:return 99;case Oi:return 98;case Pi:return 97;case Di:return 96;case Li:return 95;default:throw Error(o(332))}}function Gi(e){switch(e){case 99:return Ri;case 98:return Oi;case 97:return Pi;case 96:return Di;case 95:return Li;default:throw Error(o(332))}}function Ki(e,t){return e=Gi(e),Ii(e,t)}function Hi(e,t,n){return e=Gi(e),Ei(e,t,n)}function Wi(){if(null!==Vi){var e=Vi;Vi=null,Ti(e)}Qi()}function Qi(){if(!ji&&null!==Ui){ji=!0;var e=0;try{var t=Ui;Ki(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ui=null}catch(n){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ei(Ri,Wi),n}finally{ji=!1}}}var Yi=b.ReactCurrentBatchConfig;function Xi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var $i=si(null),Ji=null,Zi=null,ea=null;function ta(){ea=Zi=Ji=null}function na(e){var t=$i.current;ci($i),e.type._context._currentValue=t}function ra(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function ia(e,t){Ji=e,ea=Zi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Mo=!0),e.firstContext=null)}function aa(e,t){if(ea!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ea=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Zi){if(null===Ji)throw Error(o(308));Zi=t,Ji.dependencies={lanes:0,firstContext:t,responders:null}}else Zi=Zi.next=t;return e._currentValue}var oa=!1;function ua(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function sa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ca(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function la(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function fa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ha(e,t,n,r){var a=e.updateQueue;oa=!1;var o=a.firstBaseUpdate,u=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var c=s,l=c.next;c.next=null,null===u?o=l:u.next=l,u=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==u&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,u=0,f=l=c=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(s=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,s);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(s="function"===typeof(p=v.payload)?p.call(d,h,s):p)||void 0===s)break e;h=i({},h,s);break e;case 2:oa=!0}}null!==o.callback&&(e.flags|=32,null===(s=a.effects)?a.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,u|=s;if(null===(o=o.next)){if(null===(s=a.shared.pending))break;o=s.next,s.next=null,a.lastBaseUpdate=s,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,zu|=u,e.lanes=u,e.memoizedState=h}}function da(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var pa=(new r.Component).refs;function va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ma={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=ca(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),la(e,a),ps(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=ca(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),la(e,a),ps(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hs(),r=ds(e),i=ca(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),la(e,i),ps(e,r,n)}};function ya(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!fr(n,r)||!fr(i,a))}function ga(e,t,n){var r=!1,i=fi,a=t.contextType;return"object"===typeof a&&null!==a?a=aa(a):(i=mi(t)?pi:hi.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?vi(e,i):fi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=pa,ua(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=aa(a):(a=mi(t)?pi:hi.current,i.context=vi(e,a)),ha(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ma.enqueueReplaceState(i,i.state,null),ha(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var ba=Array.isArray;function _a(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===pa&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function xa(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ia(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Hs(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function u(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Xs(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=_a(e,t,n),r.return=e,r):((r=Ws(n.type,n.key,n.props,null,e.mode,r)).ref=_a(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$s(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Qs(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Xs(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Ws(t.type,t.key,t.props,null,e.mode,n)).ref=_a(e,null,t),n.return=e,n;case x:return(t=$s(t,e.mode,n)).return=e,t}if(ba(t)||B(t))return(t=Qs(t,e.mode,n,null)).return=e,t;xa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?n.type===I?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null}if(ba(n)||B(n))return null!==i?null:f(e,t,n,r,null);xa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return e=e.get(null===r.key?n:r.key)||null,r.type===I?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(ba(r)||B(r))return f(t,e=e.get(n)||null,r,i,null);xa(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),c}function m(i,u,s,c){var l=B(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=a(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,m),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=a(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===I&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case _:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===I){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=_a(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===I?((r=Qs(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Ws(a.type,a.key,a.props,null,e.mode,s)).ref=_a(e,r,a),s.return=e,e=s)}return u(e);case x:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=$s(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Xs(a,e.mode,s)).return=e,e=r),u(e);if(ba(a))return v(e,r,a,s);if(B(a))return m(e,r,a,s);if(l&&xa(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,W(e.type)||"Component"))}return n(e,r)}}var Ea=Ia(!0),Ta=Ia(!1),Sa={},Ca=si(Sa),Aa=si(Sa),Na=si(Sa);function Ra(e){if(e===Sa)throw Error(o(174));return e}function Oa(e,t){switch(li(Na,t),li(Aa,e),li(Ca,Sa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:de(null,"");break;default:t=de(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ci(Ca),li(Ca,t)}function Pa(){ci(Ca),ci(Aa),ci(Na)}function Da(e){Ra(Na.current);var t=Ra(Ca.current),n=de(t,e.type);t!==n&&(li(Aa,e),li(Ca,n))}function La(e){Aa.current===e&&(ci(Ca),ci(Aa))}var Ma=si(0);function Fa(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ua=null,Va=null,ja=!1;function za(e,t){var n=Gs(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ba(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function qa(e){if(ja){var t=Va;if(t){var n=t;if(!Ba(e,t)){if(!(t=Wr(n.nextSibling))||!Ba(e,t))return e.flags=-1025&e.flags|2,ja=!1,void(Ua=e);za(Ua,n)}Ua=e,Va=Wr(t.firstChild)}else e.flags=-1025&e.flags|2,ja=!1,Ua=e}}function Ga(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ua=e}function Ka(e){if(e!==Ua)return!1;if(!ja)return Ga(e),ja=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!qr(t,e.memoizedProps))for(t=Va;t;)za(e,t),t=Wr(t.nextSibling);if(Ga(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Va=Wr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Va=null}}else Va=Ua?Wr(e.stateNode.nextSibling):null;return!0}function Ha(){Va=Ua=null,ja=!1}var Wa=[];function Qa(){for(var e=0;e<Wa.length;e++)Wa[e]._workInProgressVersionPrimary=null;Wa.length=0}var Ya=b.ReactCurrentDispatcher,Xa=b.ReactCurrentBatchConfig,$a=0,Ja=null,Za=null,eo=null,to=!1,no=!1;function ro(){throw Error(o(321))}function io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function ao(e,t,n,r,i,a){if($a=a,Ja=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ya.current=null===e||null===e.memoizedState?Oo:Po,e=n(r,i),no){a=0;do{if(no=!1,!(25>a))throw Error(o(301));a+=1,eo=Za=null,t.updateQueue=null,Ya.current=Do,e=n(r,i)}while(no)}if(Ya.current=Ro,t=null!==Za&&null!==Za.next,$a=0,eo=Za=Ja=null,to=!1,t)throw Error(o(300));return e}function oo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===eo?Ja.memoizedState=eo=e:eo=eo.next=e,eo}function uo(){if(null===Za){var e=Ja.alternate;e=null!==e?e.memoizedState:null}else e=Za.next;var t=null===eo?Ja.memoizedState:eo.next;if(null!==t)eo=t,Za=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Za=e).memoizedState,baseState:Za.baseState,baseQueue:Za.baseQueue,queue:Za.queue,next:null},null===eo?Ja.memoizedState=eo=e:eo=eo.next=e}return eo}function so(e,t){return"function"===typeof t?t(e):t}function co(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Za,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.lane;if(($a&l)===l)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,Ja.lanes|=l,zu|=l}c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,cr(r,t.memoizedState)||(Mo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function lo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);cr(a,t.memoizedState)||(Mo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function fo(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=($a&e)===e)&&(t._workInProgressVersionPrimary=r,Wa.push(t))),e)return n(t._source);throw Wa.push(t),Error(o(350))}function ho(e,t,n,r){var i=Pu;if(null===i)throw Error(o(349));var a=t._getVersion,u=a(t._source),s=Ya.current,c=s.useState((function(){return fo(i,t,n)})),l=c[1],f=c[0];c=eo;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var m=Ja;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!cr(u,e)){e=n(t._source),cr(f,e)||(l(e),e=ds(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var s=31-qt(o),c=1<<s;r[s]|=e,o&=~c}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=ds(m);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),cr(p,n)&&cr(v,t)&&cr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:so,lastRenderedState:f}).dispatch=l=No.bind(null,Ja,e),c.queue=e,c.baseQueue=null,f=fo(i,t,n),c.memoizedState=c.baseState=f),f}function po(e,t,n){return ho(uo(),e,t,n)}function vo(e){var t=oo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:so,lastRenderedState:e}).dispatch=No.bind(null,Ja,e),[t.memoizedState,e]}function mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Ja.updateQueue)?(t={lastEffect:null},Ja.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function yo(e){return e={current:e},oo().memoizedState=e}function go(){return uo().memoizedState}function ko(e,t,n,r){var i=oo();Ja.flags|=e,i.memoizedState=mo(1|t,n,void 0,void 0===r?null:r)}function wo(e,t,n,r){var i=uo();r=void 0===r?null:r;var a=void 0;if(null!==Za){var o=Za.memoizedState;if(a=o.destroy,null!==r&&io(r,o.deps))return void mo(t,n,a,r)}Ja.flags|=e,i.memoizedState=mo(1|t,n,a,r)}function bo(e,t){return ko(516,4,e,t)}function _o(e,t){return wo(516,4,e,t)}function xo(e,t){return wo(4,2,e,t)}function Io(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Eo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Io.bind(null,t,e),n)}function To(){}function So(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Co(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ao(e,t){var n=qi();Ki(98>n?98:n,(function(){e(!0)})),Ki(97<n?97:n,(function(){var n=Xa.transition;Xa.transition=1;try{e(!1),t()}finally{Xa.transition=n}}))}function No(e,t,n){var r=hs(),i=ds(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Ja||null!==o&&o===Ja)no=to=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,s=o(u,n);if(a.eagerReducer=o,a.eagerState=s,cr(s,u))return}catch(c){}ps(e,i,r)}}var Ro={readContext:aa,useCallback:ro,useContext:ro,useEffect:ro,useImperativeHandle:ro,useLayoutEffect:ro,useMemo:ro,useReducer:ro,useRef:ro,useState:ro,useDebugValue:ro,useDeferredValue:ro,useTransition:ro,useMutableSource:ro,useOpaqueIdentifier:ro,unstable_isNewReconciler:!1},Oo={readContext:aa,useCallback:function(e,t){return oo().memoizedState=[e,void 0===t?null:t],e},useContext:aa,useEffect:bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ko(4,2,Io.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ko(4,2,e,t)},useMemo:function(e,t){var n=oo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=oo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=No.bind(null,Ja,e),[r.memoizedState,e]},useRef:yo,useState:vo,useDebugValue:To,useDeferredValue:function(e){var t=vo(e),n=t[0],r=t[1];return bo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=vo(!1),t=e[0];return yo(e=Ao.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=oo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},ho(r,e,t,n)},useOpaqueIdentifier:function(){if(ja){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Yr++).toString(36))),Error(o(355))})),n=vo(t)[1];return 0===(2&Ja.mode)&&(Ja.flags|=516,mo(5,(function(){n("r:"+(Yr++).toString(36))}),void 0,null)),t}return vo(t="r:"+(Yr++).toString(36)),t},unstable_isNewReconciler:!1},Po={readContext:aa,useCallback:So,useContext:aa,useEffect:_o,useImperativeHandle:Eo,useLayoutEffect:xo,useMemo:Co,useReducer:co,useRef:go,useState:function(){return co(so)},useDebugValue:To,useDeferredValue:function(e){var t=co(so),n=t[0],r=t[1];return _o((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=co(so)[0];return[go().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return co(so)[0]},unstable_isNewReconciler:!1},Do={readContext:aa,useCallback:So,useContext:aa,useEffect:_o,useImperativeHandle:Eo,useLayoutEffect:xo,useMemo:Co,useReducer:lo,useRef:go,useState:function(){return lo(so)},useDebugValue:To,useDeferredValue:function(e){var t=lo(so),n=t[0],r=t[1];return _o((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=lo(so)[0];return[go().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return lo(so)[0]},unstable_isNewReconciler:!1},Lo=b.ReactCurrentOwner,Mo=!1;function Fo(e,t,n,r){t.child=null===e?Ta(t,null,n,r):Ea(t,e.child,n,r)}function Uo(e,t,n,r,i){n=n.render;var a=t.ref;return ia(t,i),r=ao(e,t,n,r,a,i),null===e||Mo?(t.flags|=1,Fo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Vo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Ks(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ws(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,jo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:fr)(i,r)&&e.ref===t.ref)?au(e,t,a):(t.flags|=1,(e=Hs(o,r)).ref=t.ref,e.return=t,t.child=e)}function jo(e,t,n,r,i,a){if(null!==e&&fr(e.memoizedProps,r)&&e.ref===t.ref){if(Mo=!1,0===(a&i))return t.lanes=e.lanes,au(e,t,a);0!==(16384&e.flags)&&(Mo=!0)}return qo(e,t,n,r,a)}function zo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},_s(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},_s(t,e),null;t.memoizedState={baseLanes:0},_s(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,_s(t,r);return Fo(e,t,i,n),t.child}function Bo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function qo(e,t,n,r,i){var a=mi(n)?pi:hi.current;return a=vi(t,a),ia(t,i),n=ao(e,t,n,r,a,i),null===e||Mo?(t.flags|=1,Fo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Go(e,t,n,r,i){if(mi(n)){var a=!0;wi(t)}else a=!1;if(ia(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ga(t,n,r),wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=aa(c):c=vi(t,c=mi(n)?pi:hi.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&ka(t,o,r,c),oa=!1;var h=t.memoizedState;o.state=h,ha(t,r,o,i),s=t.memoizedState,u!==r||h!==s||di.current||oa?("function"===typeof l&&(va(t,n,l,r),s=t.memoizedState),(u=oa||ya(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,sa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Xi(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=aa(s):s=vi(t,s=mi(n)?pi:hi.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&ka(t,o,r,s),oa=!1,h=t.memoizedState,o.state=h,ha(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||di.current||oa?("function"===typeof d&&(va(t,n,d,r),p=t.memoizedState),(c=oa||ya(t,n,c,r,h,p,s))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Ko(e,t,n,r,a,i)}function Ko(e,t,n,r,i,a){Bo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&bi(t,n,!1),au(e,t,a);r=t.stateNode,Lo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ea(t,e.child,null,a),t.child=Ea(t,null,u,a)):Fo(e,t,u,a),t.memoizedState=r.state,i&&bi(t,n,!0),t.child}function Ho(e){var t=e.stateNode;t.pendingContext?gi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&gi(0,t.context,!1),Oa(e,t.containerInfo)}var Wo,Qo,Yo,Xo,$o={dehydrated:null,retryLane:0};function Jo(e,t,n){var r,i=t.pendingProps,a=Ma.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),li(Ma,1&a),null===e?(void 0!==i.fallback&&qa(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=$o,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=$o,t.lanes=33554432,e):((n=Ys({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=tu(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=$o,i):(n=eu(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Ys(t,i,0,null),n=Qs(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function eu(e,t,n,r){var i=e.child;return e=i.sibling,n=Hs(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function tu(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Hs(o,u),null!==e?r=Hs(e,r):(r=Qs(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function nu(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ra(e.return,t)}function ru(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function iu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Fo(e,t,r.children,n),0!==(2&(r=Ma.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nu(e,n);else if(19===e.tag)nu(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(li(Ma,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fa(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ru(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fa(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ru(t,!0,n,null,a,t.lastEffect);break;case"together":ru(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function au(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),zu|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Hs(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Hs(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ou(e,t){if(!ja)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function uu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mi(t.type)&&yi(),null;case 3:return Pa(),ci(di),ci(hi),Qa(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ka(t)?t.flags|=4:r.hydrate||(t.flags|=256)),Qo(t),null;case 5:La(t);var a=Ra(Na.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ra(Ca.current),Ka(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[$r]=t,r[Jr]=u,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Er.length;e++)Ar(Er[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,u),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Ar("invalid",r);break;case"textarea":se(r,u),Ar("invalid",r)}for(var c in xe(n,u),e=null,u)u.hasOwnProperty(c)&&(a=u[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):s.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Ar("scroll",r));switch(n){case"input":X(r),re(r,u,!0);break;case"textarea":X(r),le(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=Vr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe.html&&(e=he(n)),e===fe.html?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[$r]=t,e[Jr]=r,Wo(e,t,!1,!1),t.stateNode=e,c=Ie(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),a=r;break;case"iframe":case"object":case"embed":Ar("load",e),a=r;break;case"video":case"audio":for(a=0;a<Er.length;a++)Ar(Er[a],e);a=r;break;case"source":Ar("error",e),a=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),a=r;break;case"details":Ar("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Ar("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":se(e,r),a=ue(e,r),Ar("invalid",e);break;default:a=r}xe(n,a);var l=a;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?be(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&me(e,f):"children"===u?"string"===typeof f?("textarea"!==n||""!==f)&&ye(e,f):"number"===typeof f&&ye(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?null!=f&&"onScroll"===u&&Ar("scroll",e):null!=f&&w(e,u,f,c))}switch(n){case"input":X(e),re(e,r,!1);break;case"textarea":X(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?oe(e,!!r.multiple,u,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Vr)}Br(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Xo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Ra(Na.current),Ra(Ca.current),Ka(t)?(r=t.stateNode,n=t.memoizedProps,r[$r]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[$r]=t,t.stateNode=r)}return null;case 13:return ci(Ma),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ka(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ma.current)?0===Uu&&(Uu=3):(0!==Uu&&3!==Uu||(Uu=4),null===Pu||0===(134217727&zu)&&0===(134217727&Bu)||gs(Pu,Lu))),(r||n)&&(t.flags|=4),null);case 4:return Pa(),Qo(t),null===e&&Rr(t.stateNode.containerInfo),null;case 10:return na(t),null;case 19:if(ci(Ma),null===(r=t.memoizedState))return null;if(u=0!==(64&t.flags),null===(c=r.rendering))if(u)ou(r,!1);else{if(0!==Uu||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Fa(e))){for(t.flags|=64,ou(r,!1),null!==(u=c.updateQueue)&&(t.updateQueue=u,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(u=n).flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return li(Ma,1&Ma.current|2),t.child}e=e.sibling}null!==r.tail&&Bi()>Hu&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432)}else{if(!u)if(null!==(e=Fa(c))){if(t.flags|=64,u=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ou(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!ja)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Bi()-r.renderingStartTime>Hu&&1073741824!==n&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Bi(),n.sibling=null,t=Ma.current,li(Ma,u?1&t|2:1&t),n):null;case 23:case 24:return xs(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function su(e){switch(e.tag){case 1:mi(e.type)&&yi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Pa(),ci(di),ci(hi),Qa(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return La(e),null;case 13:return ci(Ma),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ci(Ma),null;case 4:return Pa(),null;case 10:return na(e),null;case 23:case 24:return xs(),null;default:return null}}function cu(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function lu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Wo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Qo=function(){},Yo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Ra(Ca.current);var o,u=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),u=[];break;case"option":a=ae(e,a),r=ae(e,r),u=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),u=[];break;case"textarea":a=ue(e,a),r=ue(e,r),u=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Vr)}for(f in xe(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(s.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(u||(u=[]),u.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(u=u||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(u=u||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(s.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Ar("scroll",e),u||c===l||(u=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(u=u||[]).push(f,l))}n&&(u=u||[]).push("style",n);var f=u;(t.updateQueue=f)&&(t.flags|=4)}},Xo=function(e,t,n,r){n!==r&&(t.flags|=4)};var fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=ca(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Xu||(Xu=!0,$u=r),lu(0,t)},n}function du(e,t,n){(n=ca(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return lu(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Ju?Ju=new Set([this]):Ju.add(this),lu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var pu="function"===typeof WeakSet?WeakSet:Set;function vu(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){js(e,n)}else t.current=null}function mu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Hr(t.stateNode.containerInfo))}throw Error(o(163))}function yu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fs(n,e),Ms(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&da(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}da(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Br(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&bt(n)))))}throw Error(o(163))}function gu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=we("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ku(e,t){if(xi&&"function"===typeof xi.onCommitFiberUnmount)try{xi.onCommitFiberUnmount(_i,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fs(t,n);else{r=t;try{i()}catch(a){js(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vu(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){js(t,a)}break;case 5:vu(t);break;case 4:Eu(e,t)}}function wu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function bu(e){return 5===e.tag||3===e.tag||4===e.tag}function _u(e){e:{for(var t=e.return;null!==t;){if(bu(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||bu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?xu(e,n,t):Iu(e,n,t)}function xu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Vr));else if(4!==r&&null!==(e=e.child))for(xu(e,t,n),e=e.sibling;null!==e;)xu(e,t,n),e=e.sibling}function Iu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Iu(e,t,n),e=e.sibling;null!==e;)Iu(e,t,n),e=e.sibling}function Eu(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var u=e,s=i,c=s;;)if(ku(u,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(u=n,s=i.stateNode,8===u.nodeType?u.parentNode.removeChild(s):u.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ku(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Tu(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Jr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ie(e,i),t=Ie(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?be(n,s):"dangerouslySetInnerHTML"===u?me(n,s):"children"===u?ye(n,s):w(n,u,s,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,bt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Ku=Bi(),gu(t.child,!0)),void Su(t);case 19:return void Su(t);case 23:case 24:return void gu(t,null!==t.memoizedState)}throw Error(o(163))}function Su(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new pu),t.forEach((function(t){var r=Bs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cu(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Au=Math.ceil,Nu=b.ReactCurrentDispatcher,Ru=b.ReactCurrentOwner,Ou=0,Pu=null,Du=null,Lu=0,Mu=0,Fu=si(0),Uu=0,Vu=null,ju=0,zu=0,Bu=0,qu=0,Gu=null,Ku=0,Hu=1/0;function Wu(){Hu=Bi()+500}var Qu,Yu=null,Xu=!1,$u=null,Ju=null,Zu=!1,es=null,ts=90,ns=[],rs=[],is=null,as=0,os=null,us=-1,ss=0,cs=0,ls=null,fs=!1;function hs(){return 0!==(48&Ou)?Bi():-1!==us?us:us=Bi()}function ds(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===qi()?1:2;if(0===ss&&(ss=ju),0!==Yi.transition){0!==cs&&(cs=null!==Gu?Gu.pendingLanes:0),e=ss;var t=4186112&~cs;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=qi(),0!==(4&Ou)&&98===e?e=Vt(12,ss):e=Vt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ss),e}function ps(e,t,n){if(50<as)throw as=0,os=null,Error(o(185));if(null===(e=vs(e,t)))return null;Bt(e,t,n),e===Pu&&(Bu|=t,4===Uu&&gs(e,Lu));var r=qi();1===t?0!==(8&Ou)&&0===(48&Ou)?ks(e):(ms(e,n),0===Ou&&(Wu(),Wi())):(0===(4&Ou)||98!==r&&99!==r||(null===is?is=new Set([e]):is.add(e)),ms(e,n)),Gu=e}function vs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ms(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var s=31-qt(u),c=1<<s,l=a[s];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Mt(c);var f=Lt;a[s]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);u&=~c}if(r=Ft(e,e===Pu?Lu:0),t=Lt,0===r)null!==n&&(n!==Mi&&Ti(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Mi&&Ti(n)}15===t?(n=ks.bind(null,e),null===Ui?(Ui=[n],Vi=Ei(Ri,Qi)):Ui.push(n),n=Mi):14===t?n=Hi(99,ks.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Hi(n,ys.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function ys(e){if(us=-1,cs=ss=0,0!==(48&Ou))throw Error(o(327));var t=e.callbackNode;if(Ls()&&e.callbackNode!==t)return null;var n=Ft(e,e===Pu?Lu:0);if(0===n)return null;var r=n,i=Ou;Ou|=16;var a=Ts();for(Pu===e&&Lu===r||(Wu(),Is(e,r));;)try{As();break}catch(s){Es(e,s)}if(ta(),Nu.current=a,Ou=i,null!==Du?r=0:(Pu=null,Lu=0,r=Uu),0!==(ju&Bu))Is(e,0);else if(0!==r){if(2===r&&(Ou|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(n=Ut(e))&&(r=Ss(e,n))),1===r)throw t=Vu,Is(e,0),gs(e,n),ms(e,Bi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Os(e);break;case 3:if(gs(e,n),(62914560&n)===n&&10<(r=Ku+500-Bi())){if(0!==Ft(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Gr(Os.bind(null,e),r);break}Os(e);break;case 4:if(gs(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var u=31-qt(n);a=1<<u,(u=r[u])>i&&(i=u),n&=~a}if(n=i,10<(n=(120>(n=Bi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Au(n/1960))-n)){e.timeoutHandle=Gr(Os.bind(null,e),n);break}Os(e);break;default:throw Error(o(329))}}return ms(e,Bi()),e.callbackNode===t?ys.bind(null,e):null}function gs(e,t){for(t&=~qu,t&=~Bu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-qt(t),r=1<<n;e[n]=-1,t&=~r}}function ks(e){if(0!==(48&Ou))throw Error(o(327));if(Ls(),e===Pu&&0!==(e.expiredLanes&Lu)){var t=Lu,n=Ss(e,t);0!==(ju&Bu)&&(n=Ss(e,t=Ft(e,t)))}else n=Ss(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(Ou|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(t=Ut(e))&&(n=Ss(e,t))),1===n)throw n=Vu,Is(e,0),gs(e,t),ms(e,Bi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Os(e),ms(e,Bi()),null}function ws(e,t){var n=Ou;Ou|=1;try{return e(t)}finally{0===(Ou=n)&&(Wu(),Wi())}}function bs(e,t){var n=Ou;Ou&=-2,Ou|=8;try{return e(t)}finally{0===(Ou=n)&&(Wu(),Wi())}}function _s(e,t){li(Fu,Mu),Mu|=t,ju|=t}function xs(){Mu=Fu.current,ci(Fu)}function Is(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Kr(n)),null!==Du)for(n=Du.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&yi();break;case 3:Pa(),ci(di),ci(hi),Qa();break;case 5:La(r);break;case 4:Pa();break;case 13:case 19:ci(Ma);break;case 10:na(r);break;case 23:case 24:xs()}n=n.return}Pu=e,Du=Hs(e.current,null),Lu=Mu=ju=t,Uu=0,Vu=null,qu=Bu=zu=0}function Es(e,t){for(;;){var n=Du;try{if(ta(),Ya.current=Ro,to){for(var r=Ja.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}to=!1}if($a=0,eo=Za=Ja=null,no=!1,Ru.current=null,null===n||null===n.return){Uu=1,Vu=t,Du=null;break}e:{var a=e,o=n.return,u=n,s=t;if(t=Lu,u.flags|=2048,u.firstEffect=u.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&u.mode)){var l=u.alternate;l?(u.updateQueue=l.updateQueue,u.memoizedState=l.memoizedState,u.lanes=l.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=0!==(1&Ma.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var m=h.updateQueue;if(null===m){var y=new Set;y.add(c),h.updateQueue=y}else m.add(c);if(0===(2&h.mode)){if(h.flags|=64,u.flags|=16384,u.flags&=-2981,1===u.tag)if(null===u.alternate)u.tag=17;else{var g=ca(-1,1);g.tag=2,la(u,g)}u.lanes|=1;break e}s=void 0,u=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fu,s=new Set,k.set(c,s)):void 0===(s=k.get(c))&&(s=new Set,k.set(c,s)),!s.has(u)){s.add(u);var w=zs.bind(null,a,c,u);c.then(w,w)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);s=Error((W(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Uu&&(Uu=2),s=cu(s,u),h=o;do{switch(h.tag){case 3:a=s,h.flags|=4096,t&=-t,h.lanes|=t,fa(h,hu(0,a,t));break e;case 1:a=s;var b=h.type,_=h.stateNode;if(0===(64&h.flags)&&("function"===typeof b.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Ju||!Ju.has(_)))){h.flags|=4096,t&=-t,h.lanes|=t,fa(h,du(h,a,t));break e}}h=h.return}while(null!==h)}Rs(n)}catch(x){t=x,Du===n&&null!==n&&(Du=n=n.return);continue}break}}function Ts(){var e=Nu.current;return Nu.current=Ro,null===e?Ro:e}function Ss(e,t){var n=Ou;Ou|=16;var r=Ts();for(Pu===e&&Lu===t||Is(e,t);;)try{Cs();break}catch(i){Es(e,i)}if(ta(),Ou=n,Nu.current=r,null!==Du)throw Error(o(261));return Pu=null,Lu=0,Uu}function Cs(){for(;null!==Du;)Ns(Du)}function As(){for(;null!==Du&&!Si();)Ns(Du)}function Ns(e){var t=Qu(e.alternate,e,Mu);e.memoizedProps=e.pendingProps,null===t?Rs(e):Du=t,Ru.current=null}function Rs(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=uu(n,t,Mu)))return void(Du=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Mu)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=su(t)))return n.flags&=2047,void(Du=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Du=t);Du=t=e}while(null!==t);0===Uu&&(Uu=5)}function Os(e){var t=qi();return Ki(99,Ps.bind(null,e,t)),null}function Ps(e,t){do{Ls()}while(null!==es);if(0!==(48&Ou))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var u=e.eventTimes,s=e.expirationTimes;0<a;){var c=31-qt(a),l=1<<c;i[c]=0,u[c]=-1,s[c]=-1,a&=~l}if(null!==is&&0===(24&r)&&is.has(e)&&is.delete(e),e===Pu&&(Du=Pu=null,Lu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ou,Ou|=32,Ru.current=null,jr=Qt,mr(u=vr())){if("selectionStart"in u)s={start:u.selectionStart,end:u.selectionEnd};else e:if(s=(s=u.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch(T){s=null;break e}var f=0,h=-1,d=-1,p=0,v=0,m=u,y=null;t:for(;;){for(var g;m!==s||0!==a&&3!==m.nodeType||(h=f+a),m!==c||0!==l&&3!==m.nodeType||(d=f+l),3===m.nodeType&&(f+=m.nodeValue.length),null!==(g=m.firstChild);)y=m,m=g;for(;;){if(m===u)break t;if(y===s&&++p===a&&(h=f),y===c&&++v===l&&(d=f),null!==(g=m.nextSibling))break;y=(m=y).parentNode}m=g}s=-1===h||-1===d?null:{start:h,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;zr={focusedElem:u,selectionRange:s},Qt=!1,ls=null,fs=!1,Yu=r;do{try{Ds()}catch(T){if(null===Yu)throw Error(o(330));js(Yu,T),Yu=Yu.nextEffect}}while(null!==Yu);ls=null,Yu=r;do{try{for(u=e;null!==Yu;){var k=Yu.flags;if(16&k&&ye(Yu.stateNode,""),128&k){var w=Yu.alternate;if(null!==w){var b=w.ref;null!==b&&("function"===typeof b?b(null):b.current=null)}}switch(1038&k){case 2:_u(Yu),Yu.flags&=-3;break;case 6:_u(Yu),Yu.flags&=-3,Tu(Yu.alternate,Yu);break;case 1024:Yu.flags&=-1025;break;case 1028:Yu.flags&=-1025,Tu(Yu.alternate,Yu);break;case 4:Tu(Yu.alternate,Yu);break;case 8:Eu(u,s=Yu);var _=s.alternate;wu(s),null!==_&&wu(_)}Yu=Yu.nextEffect}}catch(T){if(null===Yu)throw Error(o(330));js(Yu,T),Yu=Yu.nextEffect}}while(null!==Yu);if(b=zr,w=vr(),k=b.focusedElem,u=b.selectionRange,w!==k&&k&&k.ownerDocument&&pr(k.ownerDocument.documentElement,k)){null!==u&&mr(k)&&(w=u.start,void 0===(b=u.end)&&(b=w),"selectionStart"in k?(k.selectionStart=w,k.selectionEnd=Math.min(b,k.value.length)):(b=(w=k.ownerDocument||document)&&w.defaultView||window).getSelection&&(b=b.getSelection(),s=k.textContent.length,_=Math.min(u.start,s),u=void 0===u.end?_:Math.min(u.end,s),!b.extend&&_>u&&(s=u,u=_,_=s),s=dr(k,_),a=dr(k,u),s&&a&&(1!==b.rangeCount||b.anchorNode!==s.node||b.anchorOffset!==s.offset||b.focusNode!==a.node||b.focusOffset!==a.offset)&&((w=w.createRange()).setStart(s.node,s.offset),b.removeAllRanges(),_>u?(b.addRange(w),b.extend(a.node,a.offset)):(w.setEnd(a.node,a.offset),b.addRange(w))))),w=[];for(b=k;b=b.parentNode;)1===b.nodeType&&w.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<w.length;k++)(b=w[k]).element.scrollLeft=b.left,b.element.scrollTop=b.top}Qt=!!jr,zr=jr=null,e.current=n,Yu=r;do{try{for(k=e;null!==Yu;){var x=Yu.flags;if(36&x&&yu(k,Yu.alternate,Yu),128&x){w=void 0;var I=Yu.ref;if(null!==I){var E=Yu.stateNode;Yu.tag,w=E,"function"===typeof I?I(w):I.current=w}}Yu=Yu.nextEffect}}catch(T){if(null===Yu)throw Error(o(330));js(Yu,T),Yu=Yu.nextEffect}}while(null!==Yu);Yu=null,Fi(),Ou=i}else e.current=n;if(Zu)Zu=!1,es=e,ts=t;else for(Yu=r;null!==Yu;)t=Yu.nextEffect,Yu.nextEffect=null,8&Yu.flags&&((x=Yu).sibling=null,x.stateNode=null),Yu=t;if(0===(r=e.pendingLanes)&&(Ju=null),1===r?e===os?as++:(as=0,os=e):as=0,n=n.stateNode,xi&&"function"===typeof xi.onCommitFiberRoot)try{xi.onCommitFiberRoot(_i,n,void 0,64===(64&n.current.flags))}catch(T){}if(ms(e,Bi()),Xu)throw Xu=!1,e=$u,$u=null,e;return 0!==(8&Ou)||Wi(),null}function Ds(){for(;null!==Yu;){var e=Yu.alternate;fs||null===ls||(0!==(8&Yu.flags)?Ze(Yu,ls)&&(fs=!0):13===Yu.tag&&Cu(e,Yu)&&Ze(Yu,ls)&&(fs=!0));var t=Yu.flags;0!==(256&t)&&mu(e,Yu),0===(512&t)||Zu||(Zu=!0,Hi(97,(function(){return Ls(),null}))),Yu=Yu.nextEffect}}function Ls(){if(90!==ts){var e=97<ts?97:ts;return ts=90,Ki(e,Us)}return!1}function Ms(e,t){ns.push(t,e),Zu||(Zu=!0,Hi(97,(function(){return Ls(),null})))}function Fs(e,t){rs.push(t,e),Zu||(Zu=!0,Hi(97,(function(){return Ls(),null})))}function Us(){if(null===es)return!1;var e=es;if(es=null,0!==(48&Ou))throw Error(o(331));var t=Ou;Ou|=32;var n=rs;rs=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],u=i.destroy;if(i.destroy=void 0,"function"===typeof u)try{u()}catch(c){if(null===a)throw Error(o(330));js(a,c)}}for(n=ns,ns=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var s=i.create;i.destroy=s()}catch(c){if(null===a)throw Error(o(330));js(a,c)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Ou=t,Wi(),!0}function Vs(e,t,n){la(e,t=hu(0,t=cu(n,t),1)),t=hs(),null!==(e=vs(e,1))&&(Bt(e,1,t),ms(e,t))}function js(e,t){if(3===e.tag)Vs(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Vs(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ju||!Ju.has(r))){var i=du(n,e=cu(t,e),1);if(la(n,i),i=hs(),null!==(n=vs(n,1)))Bt(n,1,i),ms(n,i);else if("function"===typeof r.componentDidCatch&&(null===Ju||!Ju.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function zs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hs(),e.pingedLanes|=e.suspendedLanes&n,Pu===e&&(Lu&n)===n&&(4===Uu||3===Uu&&(62914560&Lu)===Lu&&500>Bi()-Ku?Is(e,0):qu|=n),ms(e,t)}function Bs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===qi()?1:2:(0===ss&&(ss=ju),0===(t=jt(62914560&~ss))&&(t=4194304))),n=hs(),null!==(e=vs(e,t))&&(Bt(e,t,n),ms(e,n))}function qs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Gs(e,t,n,r){return new qs(e,t,n,r)}function Ks(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hs(e,t){var n=e.alternate;return null===n?((n=Gs(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ws(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Ks(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case I:return Qs(n.children,i,a,t);case M:u=8,i|=16;break;case E:u=8,i|=1;break;case T:return(e=Gs(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=a,e;case N:return(e=Gs(13,n,t,i)).type=N,e.elementType=N,e.lanes=a,e;case R:return(e=Gs(19,n,t,i)).elementType=R,e.lanes=a,e;case F:return Ys(n,i,a,t);case U:return(e=Gs(24,n,t,i)).elementType=U,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case C:u=9;break e;case A:u=11;break e;case O:u=14;break e;case P:u=16,r=null;break e;case D:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Gs(u,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qs(e,t,n,r){return(e=Gs(7,e,r,t)).lanes=n,e}function Ys(e,t,n,r){return(e=Gs(23,e,r,t)).elementType=F,e.lanes=n,e}function Xs(e,t,n){return(e=Gs(6,e,null,t)).lanes=n,e}function $s(e,t,n){return(t=Gs(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Js(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=zt(0),this.expirationTimes=zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.mutableSourceEagerHydrationData=null}function Zs(e,t,n,r){var i=t.current,a=hs(),u=ds(i);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(mi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(mi(c)){n=ki(n,c,s);break e}}n=s}else n=fi;return null===t.context?t.context=n:t.pendingContext=n,(t=ca(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),la(i,t),ps(i,u,a),u}function ec(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function nc(e,t){tc(e,t),(e=e.alternate)&&tc(e,t)}function rc(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Js(e,t,null!=n&&!0===n.hydrate),t=Gs(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ua(t),e[Zr]=n.current,Rr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ic(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ac(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=ec(o);u.call(e)}}Zs(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new rc(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=ec(o);s.call(e)}}bs((function(){Zs(t,o,e,i)}))}return ec(o)}function oc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ic(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Qu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||di.current)Mo=!0;else{if(0===(n&r)){switch(Mo=!1,t.tag){case 3:Ho(t),Ha();break;case 5:Da(t);break;case 1:mi(t.type)&&wi(t);break;case 4:Oa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;li($i,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Jo(e,t,n):(li(Ma,1&Ma.current),null!==(t=au(e,t,n))?t.sibling:null);li(Ma,1&Ma.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return iu(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),li(Ma,Ma.current),r)break;return null;case 23:case 24:return t.lanes=0,zo(e,t,n)}return au(e,t,n)}Mo=0!==(16384&e.flags)}else Mo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=vi(t,hi.current),ia(t,n),i=ao(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var a=!0;wi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ua(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&va(t,r,u,e),i.updater=ma,t.stateNode=i,i._reactInternals=t,wa(t,r,e,n),t=Ko(null,t,r,!0,a,n)}else t.tag=0,Fo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Ks(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===O)return 14}return 2}(i),e=Xi(i,e),a){case 0:t=qo(null,t,i,e,n);break e;case 1:t=Go(null,t,i,e,n);break e;case 11:t=Uo(null,t,i,e,n);break e;case 14:t=Vo(null,t,i,Xi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,qo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Go(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(Ho(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,sa(e,t),ha(t,r,null,n),(r=t.memoizedState.element)===i)Ha(),t=au(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Va=Wr(t.stateNode.containerInfo.firstChild),Ua=t,a=ja=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Wa.push(a);for(n=Ta(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Fo(e,t,r,n),Ha();t=t.child}return t;case 5:return Da(t),null===e&&qa(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,qr(r,i)?u=null:null!==a&&qr(r,a)&&(t.flags|=16),Bo(e,t),Fo(e,t,u,n),t.child;case 6:return null===e&&qa(t),null;case 13:return Jo(e,t,n);case 4:return Oa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ea(t,null,r,n):Fo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Uo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(li($i,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=cr(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!di.current){t=au(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=ca(-1,n&-n)).tag=2,la(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ra(s.return,n),c.lanes|=n;break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Fo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,ia(t,n),r=r(i=aa(i,a.unstable_observedBits)),t.flags|=1,Fo(e,t,r,n),t.child;case 14:return a=Xi(i=t.type,t.pendingProps),Vo(e,t,i,a=Xi(i.type,a),r,n);case 15:return jo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mi(r)?(e=!0,wi(t)):e=!1,ia(t,n),ga(t,r,i),wa(t,r,i,n),Ko(null,t,r,!0,e,n);case 19:return iu(e,t,n);case 23:case 24:return zo(e,t,n)}throw Error(o(156,t.tag))},rc.prototype.render=function(e){Zs(e,this._internalRoot,null,null)},rc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Zs(null,e,null,(function(){t[Zr]=null}))},et=function(e){13===e.tag&&(ps(e,4,hs()),nc(e,4))},tt=function(e){13===e.tag&&(ps(e,67108864,hs()),nc(e,67108864))},nt=function(e){if(13===e.tag){var t=hs(),n=ds(e);ps(e,n,t),nc(e,n)}},rt=function(e,t){return t()},Te=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ii(r);if(!i)throw Error(o(90));$(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Oe=ws,Pe=function(e,t,n,r,i){var a=Ou;Ou|=4;try{return Ki(98,e.bind(null,t,n,r,i))}finally{0===(Ou=a)&&(Wu(),Wi())}},De=function(){0===(49&Ou)&&(function(){if(null!==is){var e=is;is=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ms(e,Bi())}))}Wi()}(),Ls())},Le=function(e,t){var n=Ou;Ou|=2;try{return e(t)}finally{0===(Ou=n)&&(Wu(),Wi())}};var uc={Events:[ni,ri,ii,Ne,Re,Ls,{current:!1}]},sc={findFiberByHostInstance:ti,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},cc={bundleType:sc.bundleType,version:sc.version,rendererPackageName:sc.rendererPackageName,rendererConfig:sc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Je(e))?null:e.stateNode},findFiberByHostInstance:sc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{_i=lc.inject(cc),xi=lc}catch(ve){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uc,t.createPortal=oc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Je(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ou;if(0!==(48&n))return e(t);Ou|=1;try{if(e)return Ki(99,e.bind(null,t))}finally{Ou=n,Wi()}},t.hydrate=function(e,t,n){if(!ic(t))throw Error(o(200));return ac(null,e,t,!0,n)},t.render=function(e,t,n){if(!ic(t))throw Error(o(200));return ac(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ic(e))throw Error(o(40));return!!e._reactRootContainer&&(bs((function(){ac(null,null,e,!1,(function(){e._reactRootContainer=null,e[Zr]=null}))})),!0)},t.unstable_batchedUpdates=ws,t.unstable_createPortal=function(e,t){return oc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ic(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ac(e,t,n,!1,r)},t.version="17.0.2"},577:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(13)},240:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return b(e)===f}},712:function(e,t,n){"use strict";n(240)},554:function(e,t,n){"use strict";n(745);var r=n(75),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},670:function(e,t,n){"use strict";var r=n(745),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function y(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var k=g.prototype=new y;k.constructor=g,r(k,m.prototype),k.isPureReactComponent=!0;var w={current:null},b=Object.prototype.hasOwnProperty,_={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var r,a={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,r)&&!_.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:i,type:e,key:o,ref:u,props:a,_owner:w.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function S(e,t,n,r,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case i:case a:s=!0}}if(s)return o=o(s=e),e=""===r?"."+T(s,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),S(o,t,n,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+T(u=e[c],c);s+=S(u,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=S(u=u.value,t,n,l=r+T(u,c++),o);else if("object"===u)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function C(e,t,n){if(null==e)return e;var r=[],i=0;return S(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var N={current:null};function R(){var e=N.current;if(null===e)throw Error(d(321));return e}var O={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error(d(143));return e}},t.Component=m,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)b.call(t,l)&&!_.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:u,props:a,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return R().useCallback(e,t)},t.useContext=function(e,t){return R().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return R().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return R().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return R().useLayoutEffect(e,t)},t.useMemo=function(e,t){return R().useMemo(e,t)},t.useReducer=function(e,t,n){return R().useReducer(e,t,n)},t.useRef=function(e){return R().useRef(e)},t.useState=function(e){return R().useState(e)},t.version="17.0.2"},75:function(e,t,n){"use strict";e.exports=n(670)},596:function(e,t,n){"use strict";e.exports=n(554)},581:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,m=null,y=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,b=w.port2;w.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();k=e+g;try{m(!0,e)?b.postMessage(null):(v=!1,m=null)}catch(n){throw b.postMessage(null),n}}else v=!1},n=function(e){m=e,v||(v=!0,b.postMessage(null))},r=function(e,n){y=h((function(){e(t.unstable_now())}),n)},i=function(){d(y),y=-1}}function _(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function x(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>E(o,n))void 0!==s&&0>E(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>E(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],S=[],C=1,A=null,N=3,R=!1,O=!1,P=!1;function D(e){for(var t=x(S);null!==t;){if(null===t.callback)I(S);else{if(!(t.startTime<=e))break;I(S),t.sortIndex=t.expirationTime,_(T,t)}t=x(S)}}function L(e){if(P=!1,D(e),!O)if(null!==x(T))O=!0,n(M);else{var t=x(S);null!==t&&r(L,t.startTime-e)}}function M(e,n){O=!1,P&&(P=!1,i()),R=!0;var a=N;try{for(D(n),A=x(T);null!==A&&(!(A.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=A.callback;if("function"===typeof o){A.callback=null,N=A.priorityLevel;var u=o(A.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?A.callback=u:A===x(T)&&I(T),D(n)}else I(T);A=x(T)}if(null!==A)var s=!0;else{var c=x(S);null!==c&&r(L,c.startTime-n),s=!1}return s}finally{A=null,N=a,R=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){O||R||(O=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return x(T)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var n=N;N=t;try{return e()}finally{N=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=N;N=e;try{return t()}finally{N=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?u+o:u:o=u,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>u?(e.sortIndex=o,_(S,e),null===x(T)&&e===x(S)&&(P?i():P=!0,r(L,o-u))):(e.sortIndex=s,_(T,e),O||R||(O=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=N;return function(){var n=N;N=t;try{return e.apply(this,arguments)}finally{N=n}}}},579:function(e,t,n){"use strict";e.exports=n(581)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Je},SDK_VERSION:function(){return fn},_DEFAULT_ENTRY_NAME:function(){return $t},_addComponent:function(){return tn},_addOrOverwriteComponent:function(){return nn},_apps:function(){return Zt},_clearComponents:function(){return un},_components:function(){return en},_getProvider:function(){return an},_registerComponent:function(){return rn},_removeServiceInstance:function(){return on},deleteApp:function(){return vn},getApp:function(){return dn},getApps:function(){return pn},initializeApp:function(){return hn},onLog:function(){return gn},registerVersion:function(){return yn},setLogLevel:function(){return kn}});var t=n(75),r=n(577);function i(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||o(e,t)||u()}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function l(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,c(e,t)}var f=n(595),h=n.n(f);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}function p(e){return"/"===e.charAt(0)}function v(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var m=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],a=e&&p(e),o=t&&p(t),u=a||o;if(e&&p(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var s=i[i.length-1];n="."===s||".."===s||""===s}else n=!1;for(var c=0,l=i.length;l>=0;l--){var f=i[l];"."===f?v(i,l):".."===f?(v(i,l),c++):c&&(v(i,l),c--)}if(!u)for(;c--;c)i.unshift("..");!u||""===i[0]||i[0]&&p(i[0])||i.unshift("");var h=i.join("/");return n&&"/"!==h.substr(-1)&&(h+="/"),h},y=!0,g="Invariant failed";function k(e,t){if(!e){if(y)throw new Error(g);var n="function"===typeof t?t():t,r=n?"".concat(g,": ").concat(n):g;throw new Error(r)}}function w(e){return"/"===e.charAt(0)?e:"/"+e}function b(e){return"/"===e.charAt(0)?e.substr(1):e}function _(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function x(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function I(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function E(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=d({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=m(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function T(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var S=!("undefined"===typeof window||!window.document||!window.document.createElement);function C(e,t){t(window.confirm(e))}var A="popstate",N="hashchange";function R(){try{return window.history.state||{}}catch(e){return{}}}function O(e){void 0===e&&{},S||k(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,a=i.forceRefresh,o=void 0!==a&&a,u=i.getUserConfirmation,s=void 0===u?C:u,c=i.keyLength,l=void 0===c?6:c,f=e.basename?x(w(e.basename)):"";function h(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return f&&_(a,f),E(a,r,n)}function p(){return Math.random().toString(36).substr(2,l)}var v=T();function m(e){d(j,e),j.length=t.length,v.notifyListeners(j.location,j.action)}function y(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||O(h(e.state))}function g(){O(h(R()))}var b=!1;function O(e){if(b)!1,m();else{v.confirmTransitionTo(e,"POP",s,(function(t){t?m({action:"POP",location:e}):function(e){var t=j.location,n=D.indexOf(t.key);-1===n&&0;var r=D.indexOf(e.key);-1===r&&0;var i=n-r;i&&(!0,M(i))}(e)}))}}var P=h(R()),D=[P.key];function L(e){return f+I(e)}function M(e){t.go(e)}var F=0;function U(e){1===(F+=e)&&1===e?(window.addEventListener(A,y),r&&window.addEventListener(N,g)):0===F&&(window.removeEventListener(A,y),r&&window.removeEventListener(N,g))}var V=!1;var j={length:t.length,action:"POP",location:P,createHref:L,push:function(e,r){var i="PUSH",a=E(e,r,p(),j.location);v.confirmTransitionTo(a,i,s,(function(e){if(e){var r=L(a),u=a.key,s=a.state;if(n)if(t.pushState({key:u,state:s},null,r),o)window.location.href=r;else{var c=D.indexOf(j.location.key),l=D.slice(0,c+1);l.push(a.key),l,m({action:i,location:a})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",a=E(e,r,p(),j.location);v.confirmTransitionTo(a,i,s,(function(e){if(e){var r=L(a),u=a.key,s=a.state;if(n)if(t.replaceState({key:u,state:s},null,r),o)window.location.replace(r);else{var c=D.indexOf(j.location.key);-1!==c&&(D[c]=a.key),m({action:i,location:a})}else window.location.replace(r)}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&!1;var t=v.setPrompt(e);return V||(U(1),!0),function(){return V&&(!1,U(-1)),t()}},listen:function(e){var t=v.appendListener(e);return U(1),function(){U(-1),t()}}};return j}var P="hashchange",D={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+b(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:b,decodePath:w},slash:{encodePath:w,decodePath:w}};function L(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function M(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function F(e){window.location.replace(L(window.location.href)+"#"+e)}function U(e){void 0===e&&(e={}),S||k(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?C:r,a=n.hashType,o=void 0===a?"slash":a,u=e.basename?x(w(e.basename)):"",s=D[o],c=s.encodePath,l=s.decodePath;function f(){var e=l(M());return u&&(e=_(e,u)),E(e)}var h=T();function p(e){d(j,e),j.length=t.length,h.notifyListeners(j.location,j.action)}var v=!1,m=null;function y(){var e=M(),t=c(e);if(e!==t)F(t);else{var n=f(),r=j.location;if(!v&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(r,n))return;if(m===I(n))return;m=null,function(e){if(v)v=!1,p();else{var t="POP";h.confirmTransitionTo(e,t,i,(function(n){n?p({action:t,location:e}):function(e){var t=j.location,n=N.lastIndexOf(I(t));-1===n&&(n=0);var r=N.lastIndexOf(I(e));-1===r&&(r=0);var i=n-r;i&&(v=!0,R(i))}(e)}))}}(n)}}var g=M(),b=c(g);g!==b&&F(b);var A=f(),N=[I(A)];function R(e){t.go(e)}var O=0;function U(e){1===(O+=e)&&1===e?window.addEventListener(P,y):0===O&&window.removeEventListener(P,y)}var V=!1;var j={length:t.length,action:"POP",location:A,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=L(window.location.href)),n+"#"+c(u+I(e))},push:function(e,t){var n="PUSH",r=E(e,void 0,void 0,j.location);h.confirmTransitionTo(r,n,i,(function(e){if(e){var t=I(r),i=c(u+t);if(M()!==i){m=t,function(e){window.location.hash=e}(i);var a=N.lastIndexOf(I(j.location)),o=N.slice(0,a+1);o.push(t),N=o,p({action:n,location:r})}else p()}}))},replace:function(e,t){var n="REPLACE",r=E(e,void 0,void 0,j.location);h.confirmTransitionTo(r,n,i,(function(e){if(e){var t=I(r),i=c(u+t);M()!==i&&(m=t,F(i));var a=N.indexOf(I(j.location));-1!==a&&(N[a]=t),p({action:n,location:r})}}))},go:R,goBack:function(){R(-1)},goForward:function(){R(1)},block:function(e){void 0===e&&(e=!1);var t=h.setPrompt(e);return V||(U(1),V=!0),function(){return V&&(V=!1,U(-1)),t()}},listen:function(e){var t=h.appendListener(e);return U(1),function(){U(-1),t()}}};return j}function V(e,t,n){return Math.min(Math.max(e,t),n)}var j=n(691),z=n.n(j);n(712);function B(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n(285);var q=1073741823,G="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};var K=t.createContext||function(e,n){var r,i,a="__create-react-context-"+function(){var e="__global_unique_id__";return G[e]=(G[e]||0)+1}()+"__",o=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}(t.props.value),t}l(t,e);var r=t.prototype;return r.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(t="function"===typeof n?n(r,i):q,0!==(t|=0)&&this.emitter.set(e.value,t)):t=0}},r.render=function(){return this.props.children},t}(t.Component);o.childContextTypes=((r={})[a]=h().object.isRequired,r);var u=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).observedBits=void 0,e.state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}l(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?q:t},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?q:e},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(t.Component);return u.contextTypes=((i={})[a]=h().object,i),{Provider:o,Consumer:u}},H=function(e){var t=K();return t.displayName=e,t},W=H("Router-History"),Q=H("Router"),Y=function(e){function n(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}l(n,e),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=n.prototype;return r.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},r.render=function(){return t.createElement(Q.Provider,{value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},t.createElement(W.Provider,{children:this.props.children||null,value:this.props.history}))},n}(t.Component);t.Component;t.Component;var X={},$=1e4,J=0;function Z(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,u=void 0!==o&&o,s=n.sensitive,c=void 0!==s&&s;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=X[n]||(X[n]={});if(r[e])return r[e];var i=[],a={regexp:z()(e,i,t),keys:i};return J<$&&(r[e]=a,J++),a}(n,{end:a,strict:u,sensitive:c}),i=r.regexp,o=r.keys,s=i.exec(e);if(!s)return null;var l=s[0],f=s.slice(1),h=e===l;return a&&!h?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:h,params:o.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var ee=function(e){function n(){return e.apply(this,arguments)||this}return l(n,e),n.prototype.render=function(){var e=this;return t.createElement(Q.Consumer,null,(function(n){n||k(!1);var r=e.props.location||n.location,i=d({},n,{location:r,match:e.props.computedMatch?e.props.computedMatch:e.props.path?Z(r.pathname,e.props):n.match}),a=e.props,o=a.children,u=a.component,s=a.render;return Array.isArray(o)&&function(e){return 0===t.Children.count(e)}(o)&&(o=null),t.createElement(Q.Provider,{value:i},i.match?o?"function"===typeof o?o(i):o:u?t.createElement(u,i):s?s(i):null:"function"===typeof o?o(i):null)}))},n}(t.Component);function te(e){return"/"===e.charAt(0)?e:"/"+e}function ne(e,t){if(!e)return t;var n=te(e);return 0!==t.pathname.indexOf(n)?t:d({},t,{pathname:t.pathname.substr(n.length)})}function re(e){return"string"===typeof e?e:I(e)}function ie(e){return function(){k(!1)}}function ae(){}t.Component;var oe=function(e){function n(){return e.apply(this,arguments)||this}return l(n,e),n.prototype.render=function(){var e=this;return t.createElement(Q.Consumer,null,(function(n){n||k(!1);var r,i,a=e.props.location||n.location;return t.Children.forEach(e.props.children,(function(e){if(null==i&&t.isValidElement(e)){r=e;var o=e.props.path||e.props.from;i=o?Z(a.pathname,d({},e.props,{path:o})):n.match}})),i?t.cloneElement(r,{location:a,computedMatch:i}):null}))},n}(t.Component);var ue=t.useContext;t.Component;var se=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=U(t.props),t}return l(n,e),n.prototype.render=function(){return t.createElement(Y,{history:this.history,children:this.props.children})},n}(t.Component);var ce=function(e,t){return"function"===typeof e?e(t):e},le=function(e,t){return"string"===typeof e?E(e,null,null,t):e},fe=function(e){return e},he=t.forwardRef;"undefined"===typeof he&&(he=fe);var de=he((function(e,n){var r=e.innerRef,i=e.navigate,a=e.onClick,o=B(e,["innerRef","navigate","onClick"]),u=o.target,s=d({},o,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return s.ref=fe!==he&&n||r,t.createElement("a",s)}));var pe=he((function(e,n){var r=e.component,i=void 0===r?de:r,a=e.replace,o=e.to,u=e.innerRef,s=B(e,["component","replace","to","innerRef"]);return t.createElement(Q.Consumer,null,(function(e){e||k(!1);var r=e.history,c=le(ce(o,e.location),e.location),l=c?r.createHref(c):"",f=d({},s,{href:l,navigate:function(){var t=ce(o,e.location),n=I(e.location)===I(le(t));(a||n?r.replace:r.push)(t)}});return fe!==he?f.ref=n||u:f.innerRef=u,t.createElement(i,f)}))})),ve=function(e){return e},me=t.forwardRef;"undefined"===typeof me&&(me=ve);me((function(e,n){var r=e["aria-current"],i=void 0===r?"page":r,a=e.activeClassName,o=void 0===a?"active":a,u=e.activeStyle,s=e.className,c=e.exact,l=e.isActive,f=e.location,h=e.sensitive,p=e.strict,v=e.style,m=e.to,y=e.innerRef,g=B(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement(Q.Consumer,null,(function(e){e||k(!1);var r=f||e.location,a=le(ce(m,r),r),w=a.pathname,b=w&&w.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),_=b?Z(r.pathname,{path:b,exact:c,sensitive:h,strict:p}):null,x=!!(l?l(_,r):_),I="function"===typeof s?s(x):s,E="function"===typeof v?v(x):v;x&&(I=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(I,o),E=d({},E,u));var T=d({"aria-current":x&&i||null,className:I,style:E,to:a},g);return ve!==me?T.ref=n||y:T.innerRef=y,t.createElement(pe,T)}))}));function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function ge(){ge=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(C){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),u=new E(i||[]);return r(o,"_invoke",{value:b(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(T([])));y&&y!==t&&n.call(y,a)&&(v=y);var g=p.prototype=h.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==ye(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function b(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return S()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=_(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function _(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},k(w.prototype),s(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(g),s(g,u,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function ke(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function we(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ke(a,r,i,o,u,"next",e)}function u(e){ke(a,r,i,o,u,"throw",e)}o(void 0)}))}}function be(e){var t=function(e,t){if("object"!==ye(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ye(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ye(t)?t:String(t)}function _e(e,t,n){return(t=be(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,be(r.key),r)}}function Ee(e,t,n){return t&&Ie(e.prototype,t),n&&Ie(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Te(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function Se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ce(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function Ae(e){return Ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ae(e)}function Ne(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Re(e){var t=Ne();return function(){var n,r=Ae(e);if(t){var i=Ae(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===ye(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Se(e)}(this,n)}}function Oe(e,t,n){return Oe=Ne()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&c(i,n.prototype),i},Oe.apply(null,arguments)}function Pe(e){var t="function"===typeof Map?new Map:void 0;return Pe=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Oe(e,arguments,Ae(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,e)},Pe(e)}var De=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(De(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new Me;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Me=function(e){Ce(n,e);var t=Re(n);function n(){var e;return xe(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return Ee(n)}(Pe(Error)),Fe=function(e){return function(e){var t=De(e);return Le.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ue=function(e){try{return Le.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ve(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&je(n)&&(e[n]=Ve(e[n],t[n]));return e}function je(e){return"__proto__"!==e}var ze=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Be=function(){try{return ze()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/nwitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBIoAyEB-ueX84CnryYohalismP8d6SGyU",REACT_APP_APP_ID:"1:660071726496:web:65fe631ea675dbd48a38c5",REACT_APP_AUTH_DOMAIN:"nwitter-6a503.firebaseapp.com",REACT_APP_MESSAGING_SENDER_ID:"660071726496",REACT_APP_PROJECT_ID:"nwitter-6a503",REACT_APP_STORAGE_BUCKET:"nwitter-6a503.appspot.com"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&Ue(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},qe=function(){var e;return null===(e=Be())||void 0===e?void 0:e.config},Ge=function(){function e(){var t=this;xe(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Ee(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Ke(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Fe(JSON.stringify({alg:"none",type:"JWT"})),Fe(JSON.stringify(a)),""].join(".")}function He(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function We(){var e,t=null===(e=Be())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function Qe(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Ye(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Xe(){var e=He();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function $e(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Je=function(e){Ce(n,e);var t=Re(n);function n(e,r,i){var a;return xe(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Se(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Se(a),Ze.prototype.create),a}return Ee(n)}(Pe(Error)),Ze=function(){function e(t,n,r){xe(this,e),this.service=t,this.serviceName=n,this.errors=r}return Ee(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(et,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Je(n,a,t)}}]),e}();var et=/\{\$([^}]+)}/g;function tt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function nt(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function rt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(it(u)&&it(s)){if(!rt(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function it(e){return null!==e&&"object"===typeof e}function at(e){for(var t=[],n=function(){var e=s(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function ot(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=s(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function ut(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function st(e,t){var n=new ct(e,t);return n.subscribe.bind(n)}var ct=function(){function e(t,n){var r=this;xe(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Ee(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Te(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=lt),void 0===r.error&&(r.error=lt),void 0===r.complete&&(r.complete=lt);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function lt(){}function ft(e){return e&&e._delegate?e._delegate:e}function ht(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function dt(e){return function(e){if(Array.isArray(e))return a(e)}(e)||ht(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var pt=function(){function e(t,n,r){xe(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Ee(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),vt="[DEFAULT]",mt=function(){function e(t,n){xe(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Ee(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Ge;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:vt})}catch(c){}var t,n=Te(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=we(ge().mark((function e(){var t;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(dt(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),dt(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Te(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=s(i.value,2),c=u[0],l=u[1];r===this.normalizeInstanceIdentifier(c)&&l.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Te(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(QI){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===vt?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(QI){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt;return this.component?this.component.multipleInstances?e:vt:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var yt,gt,kt=function(){function e(t){xe(this,e),this.name=t,this.providers=new Map}return Ee(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new mt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),wt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(gt||(gt={}));var bt={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},_t=gt.INFO,xt=(_e(yt={},gt.DEBUG,"log"),_e(yt,gt.VERBOSE,"log"),_e(yt,gt.INFO,"info"),_e(yt,gt.WARN,"warn"),_e(yt,gt.ERROR,"error"),yt),It=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=xt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Et=function(){function e(t){xe(this,e),this.name=t,this._logLevel=_t,this._logHandler=It,this._userLogHandler=null,wt.push(this)}return Ee(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in gt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?bt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,gt.DEBUG].concat(t)),this._logHandler.apply(this,[this,gt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,gt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,gt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,gt.INFO].concat(t)),this._logHandler.apply(this,[this,gt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,gt.WARN].concat(t)),this._logHandler.apply(this,[this,gt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,gt.ERROR].concat(t)),this._logHandler.apply(this,[this,gt.ERROR].concat(t))}}]),e}();function Tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(n),!0).forEach((function(t){_e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ct,At,Nt=function(e,t){return t.some((function(t){return e instanceof t}))};var Rt=new WeakMap,Ot=new WeakMap,Pt=new WeakMap,Dt=new WeakMap,Lt=new WeakMap;var Mt={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ot.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Pt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vt(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Ft(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(At||(At=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(jt(this),n),Vt(Rt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Vt(e.apply(jt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[jt(this),t].concat(r));return Pt.set(a,t.sort?t.sort():[t]),Vt(a)}}function Ut(e){return"function"===typeof e?Ft(e):(e instanceof IDBTransaction&&function(e){if(!Ot.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ot.set(e,t)}}(e),Nt(e,Ct||(Ct=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Mt):e)}function Vt(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Vt(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Rt.set(t,e)})).catch((function(){})),Lt.set(t,e),t}(e);if(Dt.has(e))return Dt.get(e);var t=Ut(e);return t!==e&&(Dt.set(e,t),Lt.set(t,e)),t}var jt=function(e){return Lt.get(e)};var zt,Bt,qt=["get","getKey","getAll","getAllKeys","count"],Gt=["put","add","delete","clear"],Kt=new Map;function Ht(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Kt.get(t))return Kt.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Gt.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||qt.includes(n))){var a=function(){var e=we(ge().mark((function e(t){var a,o,u,s,c,l,f=arguments;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Kt.set(t,a),a}}}Mt=function(e){return St(St({},e),{},{get:function(t,n,r){return Ht(t,n)||e.get(t,n,r)},has:function(t,n){return!!Ht(t,n)||e.has(t,n)}})}(Mt);var Wt=function(){function e(t){xe(this,e),this.container=t}return Ee(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Qt="@firebase/app",Yt="0.9.13",Xt=new Et("@firebase/app"),$t="[DEFAULT]",Jt=(_e(zt={},Qt,"fire-core"),_e(zt,"@firebase/app-compat","fire-core-compat"),_e(zt,"@firebase/analytics","fire-analytics"),_e(zt,"@firebase/analytics-compat","fire-analytics-compat"),_e(zt,"@firebase/app-check","fire-app-check"),_e(zt,"@firebase/app-check-compat","fire-app-check-compat"),_e(zt,"@firebase/auth","fire-auth"),_e(zt,"@firebase/auth-compat","fire-auth-compat"),_e(zt,"@firebase/database","fire-rtdb"),_e(zt,"@firebase/database-compat","fire-rtdb-compat"),_e(zt,"@firebase/functions","fire-fn"),_e(zt,"@firebase/functions-compat","fire-fn-compat"),_e(zt,"@firebase/installations","fire-iid"),_e(zt,"@firebase/installations-compat","fire-iid-compat"),_e(zt,"@firebase/messaging","fire-fcm"),_e(zt,"@firebase/messaging-compat","fire-fcm-compat"),_e(zt,"@firebase/performance","fire-perf"),_e(zt,"@firebase/performance-compat","fire-perf-compat"),_e(zt,"@firebase/remote-config","fire-rc"),_e(zt,"@firebase/remote-config-compat","fire-rc-compat"),_e(zt,"@firebase/storage","fire-gcs"),_e(zt,"@firebase/storage-compat","fire-gcs-compat"),_e(zt,"@firebase/firestore","fire-fst"),_e(zt,"@firebase/firestore-compat","fire-fst-compat"),_e(zt,"fire-js","fire-js"),_e(zt,"firebase","fire-js-all"),zt),Zt=new Map,en=new Map;function tn(e,t){try{e.container.addComponent(t)}catch(n){Xt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function nn(e,t){e.container.addOrOverwriteComponent(t)}function rn(e){var t=e.name;if(en.has(t))return Xt.debug("There were multiple attempts to register component ".concat(t,".")),!1;en.set(t,e);var n,r=Te(Zt.values());try{for(r.s();!(n=r.n()).done;){tn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function an(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function on(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$t;an(e,t).clearInstance(n)}function un(){en.clear()}var sn=(_e(Bt={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),_e(Bt,"bad-app-name","Illegal App name: '{$appName}"),_e(Bt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),_e(Bt,"app-deleted","Firebase App named '{$appName}' already deleted"),_e(Bt,"no-options","Need to provide options, when not being deployed to hosting via source."),_e(Bt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),_e(Bt,"invalid-log-argument","First argument to `onLog` must be null or a function."),_e(Bt,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),_e(Bt,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),_e(Bt,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),_e(Bt,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Bt),cn=new Ze("app","Firebase",sn),ln=function(){function e(t,n,r){var i=this;xe(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pt("app",(function(){return i}),"PUBLIC"))}return Ee(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw cn.create("app-deleted",{appName:this._name})}}]),e}(),fn="9.23.0";function hn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:$t,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw cn.create("bad-app-name",{appName:String(i)});if(n||(n=qe()),!n)throw cn.create("no-options");var a=Zt.get(i);if(a){if(rt(n,a.options)&&rt(r,a.config))return a;throw cn.create("duplicate-app",{appName:i})}var o,u=new kt(i),s=Te(en.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new ln(n,r,u);return Zt.set(i,l),l}function dn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,t=Zt.get(e);if(!t&&e===$t&&qe())return hn();if(!t)throw cn.create("no-app",{appName:e});return t}function pn(){return Array.from(Zt.values())}function vn(e){return mn.apply(this,arguments)}function mn(){return(mn=we(ge().mark((function e(t){var n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Zt.has(n)){e.next=6;break}return Zt.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yn(e,t,n){var r,i=null!==(r=Jt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Xt.warn(u.join(" "))}rn(new pt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function gn(e,t){if(null!==e&&"function"!==typeof e)throw cn.create("invalid-log-argument");!function(e,t){var n,r=Te(wt);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=bt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:gt[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function kn(e){var t;t=e,wt.forEach((function(e){e.setLogLevel(t)}))}var wn="firebase-heartbeat-database",bn=1,_n="firebase-heartbeat-store",xn=null;function In(){return xn||(xn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Vt(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Vt(u.result),e.oldVersion,e.newVersion,Vt(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(wn,bn,{upgrade:function(e,t){if(0===t)e.createObjectStore(_n)}}).catch((function(e){throw cn.create("idb-open",{originalErrorMessage:e.message})}))),xn}function En(e){return Tn.apply(this,arguments)}function Tn(){return Tn=we(ge().mark((function e(t){var n,r,i;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,In();case 3:return n=e.sent,e.next=6,n.transaction(_n).objectStore(_n).get(An(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof Je?Xt.warn(e.t0.message):(i=cn.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Xt.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),Tn.apply(this,arguments)}function Sn(e,t){return Cn.apply(this,arguments)}function Cn(){return Cn=we(ge().mark((function e(t,n){var r,i,a,o;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,In();case 3:return r=e.sent,i=r.transaction(_n,"readwrite"),a=i.objectStore(_n),e.next=8,a.put(n,An(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof Je?Xt.warn(e.t0.message):(o=cn.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Xt.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),Cn.apply(this,arguments)}function An(e){return"".concat(e.name,"!").concat(e.options.appId)}var Nn=function(){function e(t){var n=this;xe(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Ln(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return Ee(e,[{key:"triggerHeartbeat",value:function(){var e=we(ge().mark((function e(){var t,n,r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Rn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=we(ge().mark((function e(){var t,n,r,i,a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Rn(),n=On(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Fe(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Rn(){return(new Date).toISOString().substring(0,10)}function On(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Te(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Mn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Mn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Pn,Dn,Ln=function(){function e(t){xe(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Ee(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($e()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=we(ge().mark((function e(){var t;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,En(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=we(ge().mark((function e(t){var n,r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Sn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=we(ge().mark((function e(t){var n,r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Sn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(dt(r.heartbeats),dt(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Mn(e){return Fe(JSON.stringify({version:2,heartbeats:e})).length}Pn="",rn(new pt("platform-logger",(function(e){return new Wt(e)}),"PRIVATE")),rn(new pt("heartbeat",(function(e){return new Nn(e)}),"PRIVATE")),yn(Qt,Yt,Pn),yn(Qt,Yt,"esm2017"),yn("fire-js","");var Fn=function(){function e(t,n){var r=this;xe(this,e),this._delegate=t,this.firebase=n,tn(t,new pt("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Ee(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),vn(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$t;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$t;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){tn(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){nn(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Un=(_e(Dn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),_e(Dn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Dn),Vn=new Ze("app-compat","Firebase",Un);var jn=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=hn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(tt(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:yn,setLogLevel:kn,onLog:gn,apps:null,SDK_VERSION:fn,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(rn(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Vn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Ve(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!tt(n,e=e||$t))throw Vn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Fn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ve(n,e)},createSubscribe:st,ErrorFactory:Ze,deepExtend:Ve}),n}(),zn=new Et("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){zn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Bn=self.firebase.SDK_VERSION;Bn&&Bn.indexOf("LITE")>=0&&zn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var qn=jn;!function(e){yn("@firebase/app-compat","0.2.13",e)}();function Gn(){return Gn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ae(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Gn.apply(this,arguments)}qn.registerVersion("firebase","9.23.0","app-compat");function Kn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var Hn,Wn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Qn="EMAIL_SIGNIN",Yn="PASSWORD_RESET",Xn="RECOVER_EMAIL",$n="REVERT_SECOND_FACTOR_ADDITION",Jn="VERIFY_AND_CHANGE_EMAIL",Zn="VERIFY_EMAIL";function er(){return _e({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var tr=function(){var e;return _e(e={},"admin-restricted-operation","This operation is restricted to administrators only."),_e(e,"argument-error",""),_e(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),_e(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),_e(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),_e(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),_e(e,"cordova-not-ready","Cordova framework is not ready."),_e(e,"cors-unsupported","This browser is not supported."),_e(e,"credential-already-in-use","This credential is already associated with a different user account."),_e(e,"custom-token-mismatch","The custom token corresponds to a different audience."),_e(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),_e(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),_e(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),_e(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),_e(e,"email-already-in-use","The email address is already in use by another account."),_e(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),_e(e,"expired-action-code","The action code has expired."),_e(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),_e(e,"internal-error","An internal AuthError has occurred."),_e(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),_e(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),_e(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),_e(e,"invalid-auth-event","An internal AuthError has occurred."),_e(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),_e(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),_e(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),_e(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),_e(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),_e(e,"invalid-email","The email address is badly formatted."),_e(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),_e(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),_e(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),_e(e,"invalid-credential","The supplied auth credential is malformed or has expired."),_e(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),_e(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),_e(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),_e(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),_e(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),_e(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),_e(e,"wrong-password","The password is invalid or the user does not have a password."),_e(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),_e(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),_e(e,"invalid-provider-id","The specified provider ID is invalid."),_e(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),_e(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),_e(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),_e(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),_e(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),_e(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),_e(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),_e(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),_e(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),_e(e,"missing-continue-uri","A continue URL must be provided in the request."),_e(e,"missing-iframe-start","An internal AuthError has occurred."),_e(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),_e(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),_e(e,"missing-password","A non-empty password must be provided"),_e(e,"missing-multi-factor-info","No second factor identifier is provided."),_e(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),_e(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),_e(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),_e(e,"app-deleted","This instance of FirebaseApp has been deleted."),_e(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),_e(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),_e(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),_e(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),_e(e,"no-auth-event","An internal AuthError has occurred."),_e(e,"no-such-provider","User was not linked to an account with the given provider."),_e(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),_e(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),_e(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),_e(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),_e(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),_e(e,"provider-already-linked","User can only be linked to one identity for the given provider."),_e(e,"quota-exceeded","The project's quota for this operation has been exceeded."),_e(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),_e(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),_e(e,"rejected-credential","The request contains malformed or mismatching credentials."),_e(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),_e(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),_e(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),_e(e,"timeout","The operation has timed out."),_e(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),_e(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),_e(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),_e(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),_e(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),_e(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),_e(e,"unverified-email","The operation requires a verified email."),_e(e,"user-cancelled","The user did not grant your application the permissions it requested."),_e(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),_e(e,"user-disabled","The user account has been disabled by an administrator."),_e(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),_e(e,"user-signed-out",""),_e(e,"weak-password","The password must be 6 characters long or more."),_e(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),_e(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),_e(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),_e(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),_e(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),_e(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),_e(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),_e(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),_e(e,"invalid-req-type","Invalid request parameters."),_e(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),e},nr=er,rr=new Ze("auth","Firebase",er()),ir=new Et("@firebase/auth");function ar(e){if(ir.logLevel<=gt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ir.warn.apply(ir,["Auth (".concat(fn,"): ").concat(e)].concat(n))}}function or(e){if(ir.logLevel<=gt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ir.error.apply(ir,["Auth (".concat(fn,"): ").concat(e)].concat(n))}}function ur(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw fr.apply(void 0,[e].concat(n))}function sr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return fr.apply(void 0,[e].concat(n))}function cr(e,t,n){var r=Object.assign(Object.assign({},nr()),_e({},t,n));return new Ze("auth","Firebase",r).create(t,{appName:e.name})}function lr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&ur(e,"argument-error"),cr(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function fr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=dt(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(dt(o)))}return rr.create.apply(rr,[e].concat(n))}function hr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw fr.apply(void 0,[t].concat(r))}}function dr(e){var t="INTERNAL ASSERTION FAILED: "+e;throw or(t),new Error(t)}function pr(e,t){e||dr(t)}function vr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function mr(){return"http:"===yr()||"https:"===yr()}function yr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var gr=function(){function e(t,n){xe(this,e),this.shortDelay=t,this.longDelay=n,pr(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(He())||Ye()}return Ee(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(mr()||Qe()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function kr(e,t){pr(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var wr=function(){function e(){xe(this,e)}return Ee(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void dr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void dr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void dr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),br=(_e(Hn={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),_e(Hn,"MISSING_CUSTOM_TOKEN","internal-error"),_e(Hn,"INVALID_IDENTIFIER","invalid-email"),_e(Hn,"MISSING_CONTINUE_URI","internal-error"),_e(Hn,"INVALID_PASSWORD","wrong-password"),_e(Hn,"MISSING_PASSWORD","missing-password"),_e(Hn,"EMAIL_EXISTS","email-already-in-use"),_e(Hn,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),_e(Hn,"INVALID_IDP_RESPONSE","invalid-credential"),_e(Hn,"INVALID_PENDING_TOKEN","invalid-credential"),_e(Hn,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),_e(Hn,"MISSING_REQ_TYPE","internal-error"),_e(Hn,"EMAIL_NOT_FOUND","user-not-found"),_e(Hn,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),_e(Hn,"EXPIRED_OOB_CODE","expired-action-code"),_e(Hn,"INVALID_OOB_CODE","invalid-action-code"),_e(Hn,"MISSING_OOB_CODE","internal-error"),_e(Hn,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),_e(Hn,"INVALID_ID_TOKEN","invalid-user-token"),_e(Hn,"TOKEN_EXPIRED","user-token-expired"),_e(Hn,"USER_NOT_FOUND","user-token-expired"),_e(Hn,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),_e(Hn,"INVALID_CODE","invalid-verification-code"),_e(Hn,"INVALID_SESSION_INFO","invalid-verification-id"),_e(Hn,"INVALID_TEMPORARY_PROOF","invalid-credential"),_e(Hn,"MISSING_SESSION_INFO","missing-verification-id"),_e(Hn,"SESSION_EXPIRED","code-expired"),_e(Hn,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),_e(Hn,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),_e(Hn,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),_e(Hn,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),_e(Hn,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),_e(Hn,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),_e(Hn,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),_e(Hn,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),_e(Hn,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),_e(Hn,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),_e(Hn,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),_e(Hn,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),_e(Hn,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),_e(Hn,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),_e(Hn,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),_e(Hn,"MISSING_CLIENT_TYPE","missing-client-type"),_e(Hn,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),_e(Hn,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),_e(Hn,"INVALID_REQ_TYPE","invalid-req-type"),Hn),_r=new gr(3e4,6e4);function xr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Ir(e,t,n,r){return Er.apply(this,arguments)}function Er(){return Er=we(ge().mark((function e(t,n,r,i){var a,o=arguments;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Tr(t,a,we(ge().mark((function e(){var a,o,u,s;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=at(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",wr.fetch()(Nr(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Er.apply(this,arguments)}function Tr(e,t,n){return Sr.apply(this,arguments)}function Sr(){return(Sr=we(ge().mark((function e(t,n,r){var i,a,o,u,c,l,f,h,d,p;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},br),n),e.prev=2,a=new Rr(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Or(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=o.ok?u.errorMessage:u.error.message,l=c.split(" : "),f=s(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw Or(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw Or(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw Or(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw cr(t,p,d);case 34:ur(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Je)){e.next=41;break}throw e.t0;case 41:ur(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function Cr(e,t,n,r){return Ar.apply(this,arguments)}function Ar(){return Ar=we(ge().mark((function e(t,n,r,i){var a,o,u=arguments;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Ir(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&ur(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Ar.apply(this,arguments)}function Nr(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?kr(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Rr=function(){function e(t){var n=this;xe(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(sr(n.auth,"network-request-failed"))}),_r.get())}))}return Ee(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Or(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=sr(e,t,r);return i.customData._tokenResponse=n,i}function Pr(e,t){return Dr.apply(this,arguments)}function Dr(){return(Dr=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ir(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lr(e,t){return Mr.apply(this,arguments)}function Mr(){return(Mr=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ir(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fr(e,t){return Ur.apply(this,arguments)}function Ur(){return(Ur=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ir(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vr(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function jr(){return jr=we(ge().mark((function e(t){var n,r,i,a,o,u,s=arguments;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=ft(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,hr((a=Br(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Vr(zr(a.auth_time)),issuedAtTime:Vr(zr(a.iat)),expirationTime:Vr(zr(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),jr.apply(this,arguments)}function zr(e){return 1e3*Number(e)}function Br(e){var t=s(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return or("JWT malformed, contained fewer than 3 sections"),null;try{var a=Ue(r);return a?JSON.parse(a):(or("Failed to decode base64 JWT payload"),null)}catch(o){return or("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function qr(e,t){return Gr.apply(this,arguments)}function Gr(){return Gr=we(ge().mark((function e(t,n){var r=arguments;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Je&&Kr(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Gr.apply(this,arguments)}function Kr(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Hr=function(){function e(t){xe(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Ee(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(we(ge().mark((function t(){return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Wr=function(){function e(t,n){xe(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Ee(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Vr(this.lastLoginAt),this.creationTime=Vr(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Qr(e){return Yr.apply(this,arguments)}function Yr(){return Yr=we(ge().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,qr(t,Fr(r,{idToken:i}));case 6:hr(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=Kn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],s=$r(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Wr(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Yr.apply(this,arguments)}function Xr(){return(Xr=we(ge().mark((function e(t){var n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ft(t),e.next=3,Qr(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $r(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(dt(n),dt(t))}function Jr(e,t){return Zr.apply(this,arguments)}function Zr(){return(Zr=we(ge().mark((function e(t,n){var r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tr(t,{},we(ge().mark((function e(){var r,i,a,o,u,s;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=at({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Nr(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",wr.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ei=function(){function e(){xe(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Ee(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){hr(e.idToken,"internal-error"),hr("undefined"!==typeof e.idToken,"internal-error"),hr("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Br(e);return hr(t,"internal-error"),hr("undefined"!==typeof t.exp,"internal-error"),hr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=we(ge().mark((function e(t){var n,r=arguments;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],hr(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=we(ge().mark((function e(t,n){var r,i,a,o;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jr(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return dr("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(hr("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(hr("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(hr("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function ti(e,t){hr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var ni=function(){function e(t){xe(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Kn(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?dt(a.providerData):[],this.metadata=new Wr(a.createdAt||void 0,a.lastLoginAt||void 0)}return Ee(e,[{key:"getIdToken",value:function(){var e=we(ge().mark((function e(t){var n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qr(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(hr(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return jr.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Xr.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(hr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){hr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=we(ge().mark((function e(t){var n,r,i=arguments;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Qr(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=we(ge().mark((function e(){var t;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,qr(this,Pr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;hr(k&&x,t,"internal-error");var I=ei.fromJSON(this.name,x);hr("string"===typeof k,t,"internal-error"),ti(f,t.name),ti(h,t.name),hr("boolean"===typeof w,t,"internal-error"),hr("boolean"===typeof b,t,"internal-error"),ti(d,t.name),ti(p,t.name),ti(v,t.name),ti(m,t.name),ti(y,t.name),ti(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return _&&Array.isArray(_)&&(E.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=we(ge().mark((function t(n,r){var i,a,o,u=arguments;return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new ei).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Qr(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),ri=new Map;function ii(e){pr(e instanceof Function,"Expected a class definition");var t=ri.get(e);return t?(pr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ri.set(e,t),t)}var ai=function(){function e(){xe(this,e),this.type="NONE",this.storage={}}return Ee(e,[{key:"_isAvailable",value:function(){var e=we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=we(ge().mark((function e(t){var n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();ai.type="NONE";var oi=ai;function ui(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var si=function(){function e(t,n,r){xe(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=ui(this.userKey,a.apiKey,o),this.fullPersistenceKey=ui("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Ee(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=we(ge().mark((function e(){var t;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?ni._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=we(ge().mark((function e(t){var n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=we(ge().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(ii(oi),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||ii(oi),u=ui(i,n.config.apiKey,n.name),s=null,c=Te(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=ni._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function ci(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(di(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(li(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(vi(t))return"Blackberry";if(mi(t))return"Webos";if(fi(t))return"Safari";if((t.includes("chrome/")||hi(t))&&!t.includes("edge/"))return"Chrome";if(pi(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function li(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He();return/firefox\//i.test(e)}function fi(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:He()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He();return/crios\//i.test(e)}function di(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He();return/iemobile/i.test(e)}function pi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He();return/android/i.test(e)}function vi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He();return/blackberry/i.test(e)}function mi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He();return/webos/i.test(e)}function yi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function gi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He();return yi(e)||pi(e)||mi(e)||vi(e)||/windows phone/i.test(e)||di(e)}function ki(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ci(He());break;case"Worker":t="".concat(ci(He()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(fn,"/").concat(r)}function wi(e){return bi.apply(this,arguments)}function bi(){return(bi=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ir(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _i(e,t){return xi.apply(this,arguments)}function xi(){return(xi=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ir(t,"GET","/v2/recaptchaConfig",xr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ii(e){return void 0!==e&&void 0!==e.getResponse}function Ei(e){return void 0!==e&&void 0!==e.enterprise}var Ti=Ee((function e(t){if(xe(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function Si(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=sr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Ci(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Ai=function(){function e(t){xe(this,e),this.type="recaptcha-enterprise",this.auth=Di(t)}return Ee(e,[{key:"verify",value:function(){var e=we(ge().mark((function e(){var t,n,r,i,a,o=this,u=arguments;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;Ei(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=we(ge().mark((function e(n,r){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_i(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new Ti(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=u.length>0&&void 0!==u[0]?u[0]:"verify",n=u.length>1&&void 0!==u[1]&&u[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&Ei(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));Si("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ni(e,t,n){return Ri.apply(this,arguments)}function Ri(){return Ri=we(ge().mark((function e(t,n,r){var i,a,o,u,s=arguments;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>3&&void 0!==s[3]&&s[3],a=new Ai(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return u=Object.assign({},n),i?Object.assign(u,{captchaResp:o}):Object.assign(u,{captchaResponse:o}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),Ri.apply(this,arguments)}var Oi=function(){function e(t){xe(this,e),this.auth=t,this.queue=[]}return Ee(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=we(ge().mark((function e(t){var n,r,i,a,o,u,s;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=Te(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=Te(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Pi=function(){function e(t,n,r,i){xe(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Li(this),this.idTokenSubscription=new Li(this),this.beforeStateQueue=new Oi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return Ee(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=ii(t)),this._initializationPromise=this.queue(we(ge().mark((function r(){var i,a;return ge().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,si.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=we(ge().mark((function e(){var t;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=we(ge().mark((function e(t){var n,r,i,a,o,u,s;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return hr(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=we(ge().mark((function e(t){var n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qr(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=we(ge().mark((function e(t){var n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?ft(t):null)&&hr(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=we(ge().mark((function e(t){var n,r=this,i=arguments;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&hr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(we(ge().mark((function n(){return ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(ii(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=we(ge().mark((function e(){var t,n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_i(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new Ti(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new Ai(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Ze("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=we(ge().mark((function e(t,n){var r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=we(ge().mark((function e(t){var n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return hr(n=t&&ii(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,si.create(this,[ii(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=we(ge().mark((function e(t){var n,r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=we(ge().mark((function e(t){var n=this;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return hr(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return hr(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ki(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=we(ge().mark((function e(){var t,n,r,i;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_e({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=we(ge().mark((function e(){var t,n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&ar("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Di(e){return ft(e)}var Li=function(){function e(t){var n=this;xe(this,e),this.auth=t,this.observer=null,this.addObserver=st((function(e){return n.observer=e}))}return Ee(e,[{key:"next",get:function(){return hr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Mi(e,t,n){var r=Di(e);hr(r._canInitEmulator,r,"emulator-config-failed"),hr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Fi(t),o=function(e){var t=Fi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Ui(r.substr(a.length+1))}}var o=s(r.split(":"),2);return{host:o[0],port:Ui(o[1])}}(t),u=o.host,c=o.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Fi(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ui(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Vi=function(){function e(t,n){xe(this,e),this.providerId=t,this.signInMethod=n}return Ee(e,[{key:"toJSON",value:function(){return dr("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return dr("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return dr("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return dr("not implemented")}}]),e}();function ji(e,t){return zi.apply(this,arguments)}function zi(){return(zi=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ir(t,"POST","/v1/accounts:resetPassword",xr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bi(e,t){return qi.apply(this,arguments)}function qi(){return(qi=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ir(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gi(e,t){return Ki.apply(this,arguments)}function Ki(){return(Ki=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ir(t,"POST","/v1/accounts:update",xr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hi(e,t){return Wi.apply(this,arguments)}function Wi(){return(Wi=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cr(t,"POST","/v1/accounts:signInWithPassword",xr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qi(e,t){return Yi.apply(this,arguments)}function Yi(){return(Yi=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ir(t,"POST","/v1/accounts:sendOobCode",xr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xi(e,t){return $i.apply(this,arguments)}function $i(){return($i=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qi(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ji(e,t){return Zi.apply(this,arguments)}function Zi(){return(Zi=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qi(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ea(e,t){return ta.apply(this,arguments)}function ta(){return(ta=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qi(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function na(e,t){return ra.apply(this,arguments)}function ra(){return(ra=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qi(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ia(e,t){return aa.apply(this,arguments)}function aa(){return(aa=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cr(t,"POST","/v1/accounts:signInWithEmailLink",xr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oa(e,t){return ua.apply(this,arguments)}function ua(){return(ua=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cr(t,"POST","/v1/accounts:signInWithEmailLink",xr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var sa=function(e){Ce(n,e);var t=Re(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return xe(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return Ee(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=we(ge().mark((function e(t){var n,r,i;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,Ni(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",Hi(t,i));case 11:return e.abrupt("return",Hi(t,r).catch(function(){var e=we(ge().mark((function e(n){var i;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Ni(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",Hi(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",ia(t,{email:this._email,oobCode:this._password}));case 13:ur(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Bi(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",oa(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:ur(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Vi);function ca(e,t){return la.apply(this,arguments)}function la(){return(la=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cr(t,"POST","/v1/accounts:signInWithIdp",xr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fa=function(e){Ce(n,e);var t=Re(n);function n(){var e;return xe(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return Ee(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return ca(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ca(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ca(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=at(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ur("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Kn(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Vi);function ha(e,t){return da.apply(this,arguments)}function da(){return(da=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ir(t,"POST","/v1/accounts:sendVerificationCode",xr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pa(){return(pa=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cr(t,"POST","/v1/accounts:signInWithPhoneNumber",xr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function va(){return(va=we(ge().mark((function e(t,n){var r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cr(t,"POST","/v1/accounts:signInWithPhoneNumber",xr(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Or(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ma=_e({},"USER_NOT_FOUND","user-not-found");function ya(){return(ya=we(ge().mark((function e(t,n){var r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Cr(t,"POST","/v1/accounts:signInWithPhoneNumber",xr(t,r),ma));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ga=function(e){Ce(n,e);var t=Re(n);function n(e){var r;return xe(this,n),(r=t.call(this,"phone","phone")).params=e,r}return Ee(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return pa.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return va.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return ya.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Vi);var ka=function(){function e(t){var n,r,i,a,o,u;xe(this,e);var s=ot(ut(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);hr(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return Ee(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=ot(ut(e)).link,n=t?ot(ut(t)).deep_link_id:null,r=ot(ut(e)).deep_link_id;return(r?ot(ut(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(QI){return null}}}]),e}();var wa=function(){function e(){xe(this,e),this.providerId=e.PROVIDER_ID}return Ee(e,null,[{key:"credential",value:function(e,t){return sa._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=ka.parseLink(t);return hr(n,"argument-error"),sa._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();wa.PROVIDER_ID="password",wa.EMAIL_PASSWORD_SIGN_IN_METHOD="password",wa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var ba=function(){function e(t){xe(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Ee(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),_a=function(e){Ce(n,e);var t=Re(n);function n(){var e;return xe(this,n),(e=t.apply(this,arguments)).scopes=[],e}return Ee(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return dt(this.scopes)}}]),n}(ba),xa=function(e){Ce(n,e);var t=Re(n);function n(){return xe(this,n),t.apply(this,arguments)}return Ee(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return hr(e.idToken||e.accessToken,"argument-error"),fa._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return hr("providerId"in t&&"signInMethod"in t,"argument-error"),fa._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(_a),Ia=function(e){Ce(n,e);var t=Re(n);function n(){return xe(this,n),t.call(this,"facebook.com")}return Ee(n,null,[{key:"credential",value:function(e){return fa._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(QI){return null}}}]),n}(_a);Ia.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ia.PROVIDER_ID="facebook.com";var Ea=function(e){Ce(n,e);var t=Re(n);function n(){var e;return xe(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return Ee(n,null,[{key:"credential",value:function(e,t){return fa._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(QI){return null}}}]),n}(_a);Ea.GOOGLE_SIGN_IN_METHOD="google.com",Ea.PROVIDER_ID="google.com";var Ta=function(e){Ce(n,e);var t=Re(n);function n(){return xe(this,n),t.call(this,"github.com")}return Ee(n,null,[{key:"credential",value:function(e){return fa._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(QI){return null}}}]),n}(_a);Ta.GITHUB_SIGN_IN_METHOD="github.com",Ta.PROVIDER_ID="github.com";var Sa=function(e){Ce(n,e);var t=Re(n);function n(e,r){var i;return xe(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return Ee(n,[{key:"_getIdTokenResponse",value:function(e){return ca(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ca(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ca(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Vi),Ca=function(e){Ce(n,e);var t=Re(n);function n(e){return xe(this,n),hr(e.startsWith("saml."),"argument-error"),t.call(this,e)}return Ee(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Sa.fromJSON(e);return hr(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Sa._create(r,n)}catch(i){return null}}}]),n}(ba),Aa=function(e){Ce(n,e);var t=Re(n);function n(){return xe(this,n),t.call(this,"twitter.com")}return Ee(n,null,[{key:"credential",value:function(e,t){return fa._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(QI){return null}}}]),n}(_a);function Na(e,t){return Ra.apply(this,arguments)}function Ra(){return(Ra=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cr(t,"POST","/v1/accounts:signUp",xr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Aa.TWITTER_SIGN_IN_METHOD="twitter.com",Aa.PROVIDER_ID="twitter.com";var Oa=function(){function e(t){xe(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Ee(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=we(ge().mark((function t(n,r,i){var a,o,u,s,c=arguments;return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,ni._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Pa(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=we(ge().mark((function t(n,r,i){var a;return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Pa(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Pa(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Da(){return Da=we(ge().mark((function e(t){var n,r,i,a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Di(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Oa({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Na(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Oa._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Da.apply(this,arguments)}var La=function(e){Ce(n,e);var t=Re(n);function n(e,r,i,a){var o,u;return xe(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(Se(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return Ee(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Je);function Ma(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw La._fromErrorAndOperation(e,n,t,r);throw n}))}function Fa(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Ua(e,t){return Va.apply(this,arguments)}function Va(){return Va=we(ge().mark((function e(t,n){var r,i,a,o;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ft(t),e.next=3,Ba(!0,r,n);case 3:return e.t0=Lr,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Fa(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Va.apply(this,arguments)}function ja(e,t){return za.apply(this,arguments)}function za(){return za=we(ge().mark((function e(t,n){var r,i,a=arguments;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=qr,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Oa._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),za.apply(this,arguments)}function Ba(e,t,n){return qa.apply(this,arguments)}function qa(){return(qa=we(ge().mark((function e(t,n,r){var i,a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qr(n);case 2:i=Fa(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",hr(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ga(e,t){return Ka.apply(this,arguments)}function Ka(){return Ka=we(ge().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,qr(t,Ma(i,a,n,t),r);case 6:return hr((o=e.sent).idToken,i,"internal-error"),hr(u=Br(o.idToken),i,"internal-error"),s=u.sub,hr(t.uid===s,i,"user-mismatch"),e.abrupt("return",Oa._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&ur(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Ka.apply(this,arguments)}function Ha(e,t){return Wa.apply(this,arguments)}function Wa(){return Wa=we(ge().mark((function e(t,n){var r,i,a,o,u=arguments;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Ma(t,i,n);case 4:return a=e.sent,e.next=7,Oa._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Wa.apply(this,arguments)}function Qa(e,t){return Ya.apply(this,arguments)}function Ya(){return(Ya=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ha(Di(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xa(e,t){return $a.apply(this,arguments)}function $a(){return($a=we(ge().mark((function e(t,n){var r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ft(t),e.next=3,Ba(!1,r,n.providerId);case 3:return e.abrupt("return",ja(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ja(e,t){return Za.apply(this,arguments)}function Za(){return(Za=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ga(ft(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eo(e,t){return to.apply(this,arguments)}function to(){return(to=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cr(t,"POST","/v1/accounts:signInWithCustomToken",xr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function no(){return(no=we(ge().mark((function e(t,n){var r,i,a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Di(t),e.next=3,eo(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Oa._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ro=function(){function e(t,n){xe(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Ee(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?io._fromServerResponse(e,t):"totpInfo"in t?ao._fromServerResponse(e,t):ur(e,"internal-error")}}]),e}(),io=function(e){Ce(n,e);var t=Re(n);function n(e){var r;return xe(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return Ee(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(ro),ao=function(e){Ce(n,e);var t=Re(n);function n(e){return xe(this,n),t.call(this,"totp",e)}return Ee(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(ro);function oo(e,t,n){var r;hr((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),hr("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(hr(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(hr(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function uo(){return uo=we(ge().mark((function e(t,n,r){var i,a,o,u;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Di(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,Ni(a,o,"getOobCode",!0);case 5:return u=e.sent,r&&oo(a,u,r),e.next=9,Ji(a,u);case 9:e.next=14;break;case 11:return r&&oo(a,o,r),e.next=14,Ji(a,o).catch(function(){var e=we(ge().mark((function e(t){var n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,Ni(a,o,"getOobCode",!0);case 4:return n=e.sent,r&&oo(a,n,r),e.next=8,Ji(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),uo.apply(this,arguments)}function so(){return(so=we(ge().mark((function e(t,n,r){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ji(ft(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function co(){return(co=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gi(ft(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lo(e,t){return fo.apply(this,arguments)}function fo(){return(fo=we(ge().mark((function e(t,n){var r,i,a,o;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ft(t),e.next=3,ji(r,{oobCode:n});case 3:i=e.sent,hr(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return hr(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:hr(i.mfaInfo,r,"internal-error");case 13:hr(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=ro._fromServerResponse(Di(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ho(){return(ho=we(ge().mark((function e(t,n){var r,i;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lo(ft(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function po(e,t,n){return vo.apply(this,arguments)}function vo(){return vo=we(ge().mark((function e(t,n,r){var i,a,o,u,s,c,l;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Di(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,Ni(a,o,"signUpPassword");case 5:s=e.sent,u=Na(a,s),e.next=10;break;case 9:u=Na(a,o).catch(function(){var e=we(ge().mark((function e(t){var n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,Ni(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",Na(a,n));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,u.catch((function(e){return Promise.reject(e)}));case 12:return c=e.sent,e.next=15,Oa._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),vo.apply(this,arguments)}function mo(){return mo=we(ge().mark((function e(t,n,r){var i,a,o,u,s;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(e,t){hr(t.handleCodeInApp,a,"argument-error"),t&&oo(a,e,t)},a=Di(t),o={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,Ni(a,o,"getOobCode",!0);case 6:return s=e.sent,u(s,r),e.next=10,ea(a,s);case 10:e.next=15;break;case 12:return u(o,r),e.next=15,ea(a,o).catch(function(){var e=we(ge().mark((function e(t){var n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Ni(a,o,"getOobCode",!0);case 4:return n=e.sent,u(n,r),e.next=8,ea(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),mo.apply(this,arguments)}function yo(){return(yo=we(ge().mark((function e(t,n,r){var i,a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ft(t),hr((a=wa.credentialWithLink(n,r||vr()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Qa(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function go(e,t){return ko.apply(this,arguments)}function ko(){return(ko=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ir(t,"POST","/v1/accounts:createAuthUri",xr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wo(){return(wo=we(ge().mark((function e(t,n){var r,i,a,o;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mr()?vr():"http://localhost",i={identifier:n,continueUri:r},e.next=4,go(ft(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bo(){return(bo=we(ge().mark((function e(t,n){var r,i,a,o;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ft(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&oo(r.auth,a,n),e.next=8,Xi(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _o(){return(_o=we(ge().mark((function e(t,n,r){var i,a,o,u;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ft(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&oo(i.auth,o,r),e.next=8,na(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xo(e,t){return Io.apply(this,arguments)}function Io(){return(Io=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ir(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Eo(){return(Eo=we(ge().mark((function e(t,n){var r,i,a,o,u,s,c;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=ft(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,qr(a,xo(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function To(e,t,n){return So.apply(this,arguments)}function So(){return(So=we(ge().mark((function e(t,n,r){var i,a,o,u;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,qr(t,Bi(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Co=Ee((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};xe(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Ao=function(e){Ce(n,e);var t=Re(n);function n(e,r,i,a){var o;return xe(this,n),(o=t.call(this,e,r,i)).username=a,o}return Ee(n)}(Co),No=function(e){Ce(n,e);var t=Re(n);function n(e,r){return xe(this,n),t.call(this,e,"facebook.com",r)}return Ee(n)}(Co),Ro=function(e){Ce(n,e);var t=Re(n);function n(e,r){return xe(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return Ee(n)}(Ao),Oo=function(e){Ce(n,e);var t=Re(n);function n(e,r){return xe(this,n),t.call(this,e,"google.com",r)}return Ee(n)}(Co),Po=function(e){Ce(n,e);var t=Re(n);function n(e,r,i){return xe(this,n),t.call(this,e,"twitter.com",r,i)}return Ee(n)}(Ao);function Do(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Br(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Co(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new No(a,i);case"github.com":return new Ro(a,i);case"google.com":return new Oo(a,i);case"twitter.com":return new Po(a,i,e.screenName||null);case"custom":case"anonymous":return new Co(a,null);default:return new Co(a,r,i)}}(n)}var Lo=function(){function e(t,n,r){xe(this,e),this.type=t,this.credential=n,this.auth=r}return Ee(e,[{key:"toJSON",value:function(){return{multiFactorSession:_e({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Mo=function(){function e(t,n,r){xe(this,e),this.session=t,this.hints=n,this.signInResolver=r}return Ee(e,[{key:"resolveSignIn",value:function(){var e=we(ge().mark((function e(t){var n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Di(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return ro._fromServerResponse(r,e)}));hr(i.mfaPendingCredential,r,"internal-error");var o=Lo._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=we(ge().mark((function e(t){var a,u,s;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Oa._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return hr(n.user,r,"internal-error"),e.abrupt("return",Oa._forOperation(n.user,n.operationType,u));case 17:ur(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Fo(e,t){return Ir(e,"POST","/v2/accounts/mfaEnrollment:start",xr(e,t))}function Uo(e,t){return Ir(e,"POST","/v2/accounts/mfaEnrollment:finalize",xr(e,t))}var Vo=function(){function e(t){var n=this;xe(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return ro._fromServerResponse(t.auth,e)})))}))}return Ee(e,[{key:"getSession",value:function(){var e=we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Lo,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=we(ge().mark((function e(t,n){var r,i,a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,qr(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=we(ge().mark((function e(t){var n,r,i;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,qr(this.user,Ir(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",xr(a,{idToken:r,mfaEnrollmentId:n})));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}var a}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),jo=new WeakMap;var zo="__sak",Bo=function(){function e(t,n){xe(this,e),this.storageRetriever=t,this.type=n}return Ee(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(zo,"1"),this.storage.removeItem(zo),Promise.resolve(!0)):Promise.resolve(!1)}catch(QI){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var qo=function(e){Ce(n,e);var t=Re(n);function n(){var e;return xe(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=He();return fi(e)||yi(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=gi(),e._shouldAllowMigration=!0,e}return Ee(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Xe()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=we(ge().mark((function e(t,r){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gn(Ae(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=we(ge().mark((function e(t){var r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gn(Ae(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gn(Ae(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Bo);qo.type="LOCAL";var Go=qo,Ko=function(e){Ce(n,e);var t=Re(n);function n(){return xe(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return Ee(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Bo);Ko.type="SESSION";var Ho=Ko;function Wo(e){return Promise.all(e.map(function(){var e=we(ge().mark((function e(t){var n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Qo=function(){function e(t){xe(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Ee(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=we(ge().mark((function e(t){var n,r,i,a,o,u,s,c;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Wo(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Yo(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Qo.receivers=[];var Xo=function(){function e(t){xe(this,e),this.target=t,this.handlers=new Set}return Ee(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=we(ge().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Yo("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function $o(){return window}function Jo(e){$o().location.href=e}function Zo(){return"undefined"!==typeof $o().WorkerGlobalScope&&"function"===typeof $o().importScripts}function eu(){return tu.apply(this,arguments)}function tu(){return(tu=we(ge().mark((function e(){var t;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function nu(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var ru="firebaseLocalStorageDb",iu="firebaseLocalStorage",au="fbase_key",ou=function(){function e(t){xe(this,e),this.request=t}return Ee(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function uu(e,t){return e.transaction([iu],t?"readwrite":"readonly").objectStore(iu)}function su(){var e=indexedDB.deleteDatabase(ru);return new ou(e).toPromise()}function cu(){var e=indexedDB.open(ru,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(iu,{keyPath:au})}catch(r){n(r)}})),e.addEventListener("success",we(ge().mark((function n(){var r;return ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(iu)){n.next=12;break}return r.close(),n.next=5,su();case 5:return n.t0=t,n.next=8,cu();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function lu(e,t,n){return fu.apply(this,arguments)}function fu(){return fu=we(ge().mark((function e(t,n,r){var i,a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=uu(t,!0).put((_e(i={},au,n),_e(i,"value",r),i)),e.abrupt("return",new ou(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),fu.apply(this,arguments)}function hu(e,t){return du.apply(this,arguments)}function du(){return du=we(ge().mark((function e(t,n){var r,i;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=uu(t,!1).get(n),e.next=3,new ou(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),du.apply(this,arguments)}function pu(e,t){var n=uu(e,!0).delete(t);return new ou(n).toPromise()}var vu=function(){function e(){xe(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return Ee(e,[{key:"_openDb",value:function(){var e=we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,cu();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=we(ge().mark((function e(t){var n,r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zo()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=we(ge().mark((function e(){var t=this;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Qo._getInstance(Zo()?self:null),this.receiver._subscribe("keyChanged",function(){var e=we(ge().mark((function e(n,r){var i;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=we(ge().mark((function e(){var t,n,r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eu();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Xo(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&nu()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=we(ge().mark((function e(){var t;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,cu();case 5:return t=e.sent,e.next=8,lu(t,zo,"1");case 8:return e.next=10,pu(t,zo);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=we(ge().mark((function e(t,n){var r=this;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return lu(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=we(ge().mark((function e(t){var n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return hu(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=we(ge().mark((function e(t){var n=this;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return pu(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=we(ge().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=uu(e,!1).getAll();return new ou(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Te(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(we(ge().mark((function t(){return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();vu.type="LOCAL";var mu=vu;function yu(e,t){return Ir(e,"POST","/v2/accounts/mfaSignIn:start",xr(e,t))}function gu(e,t){return Ir(e,"POST","/v2/accounts/mfaSignIn:finalize",xr(e,t))}var ku=1e12,wu=function(){function e(t){xe(this,e),this.auth=t,this.counter=ku,this._widgets=new Map}return Ee(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new bu(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||ku;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||ku;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=we(ge().mark((function e(t){var n,r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||ku,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),bu=function(){function e(t,n,r){var i=this;xe(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;hr(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Ee(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var _u=Ci("rcb"),xu=new gr(3e4,6e4),Iu=function(){function e(){var t;xe(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=$o().grecaptcha)||void 0===t?void 0:t.render)}return Ee(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return hr(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&Ii($o().grecaptcha)?Promise.resolve($o().grecaptcha):new Promise((function(r,i){var a=$o().setTimeout((function(){i(sr(e,"network-request-failed"))}),xu.get());$o()[_u]=function(){$o().clearTimeout(a),delete $o()[_u];var o=$o().grecaptcha;if(o&&Ii(o)){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(sr(e,"internal-error"))},Si("".concat("https://www.google.com/recaptcha/api.js?","?").concat(at({onload:_u,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(sr(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=$o().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var Eu=function(){function e(){xe(this,e)}return Ee(e,[{key:"load",value:function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new wu(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Tu="recaptcha",Su={theme:"light",type:"image"},Cu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Su),r=arguments.length>2?arguments[2]:void 0;xe(this,e),this.parameters=n,this.type=Tu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Di(r),this.isInvisible="invisible"===this.parameters.size,hr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;hr(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Eu:new Iu,this.validateStartingState()}return Ee(e,[{key:"verify",value:function(){var e=we(ge().mark((function e(){var t,n,r,i=this;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){hr(!this.parameters.sitekey,this.auth,"argument-error"),hr(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),hr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=$o()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){hr(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=we(ge().mark((function e(){var t,n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=we(ge().mark((function e(){var t;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hr(mr()&&!Zo(),this.auth,"internal-error"),e.next=3,Au();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,wi(this.auth);case 8:hr(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return hr(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Au(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Nu=function(){function e(t,n){xe(this,e),this.verificationId=t,this.onConfirmation=n}return Ee(e,[{key:"confirm",value:function(e){var t=ga._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Ru(){return(Ru=we(ge().mark((function e(t,n,r){var i,a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Di(t),e.next=3,Lu(i,n,ft(r));case 3:return a=e.sent,e.abrupt("return",new Nu(a,(function(e){return Qa(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ou(e,t,n){return Pu.apply(this,arguments)}function Pu(){return(Pu=we(ge().mark((function e(t,n,r){var i,a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ft(t),e.next=3,Ba(!1,i,"phone");case 3:return e.next=5,Lu(i.auth,n,ft(r));case 5:return a=e.sent,e.abrupt("return",new Nu(a,(function(e){return Xa(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Du(){return(Du=we(ge().mark((function e(t,n,r){var i,a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ft(t),e.next=3,Lu(i.auth,n,ft(r));case 3:return a=e.sent,e.abrupt("return",new Nu(a,(function(e){return Ja(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lu(e,t,n){return Mu.apply(this,arguments)}function Mu(){return Mu=we(ge().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,hr("string"===typeof a,t,"argument-error"),hr(r.type===Tu,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return hr("enroll"===u.type,t,"internal-error"),e.next=13,Fo(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return hr("signin"===u.type,t,"internal-error"),hr(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,yu(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,ha(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Mu.apply(this,arguments)}function Fu(){return(Fu=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ja(ft(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Uu=function(){function e(t){xe(this,e),this.providerId=e.PROVIDER_ID,this.auth=Di(t)}return Ee(e,[{key:"verifyPhoneNumber",value:function(e,t){return Lu(this.auth,e,ft(t))}}],[{key:"credential",value:function(e,t){return ga._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?ga._fromTokenResponse(n,r):null}}]),e}();function Vu(e,t){return t?ii(t):(hr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Uu.PROVIDER_ID="phone",Uu.PHONE_SIGN_IN_METHOD="phone";var ju=function(e){Ce(n,e);var t=Re(n);function n(e){var r;return xe(this,n),(r=t.call(this,"custom","custom")).params=e,r}return Ee(n,[{key:"_getIdTokenResponse",value:function(e){return ca(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return ca(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return ca(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Vi);function zu(e){return Ha(e.auth,new ju(e),e.bypassAuthState)}function Bu(e){var t=e.auth,n=e.user;return hr(n,t,"internal-error"),Ga(n,new ju(e),e.bypassAuthState)}function qu(e){return Gu.apply(this,arguments)}function Gu(){return(Gu=we(ge().mark((function e(t){var n,r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,hr(r=t.user,n,"internal-error"),e.abrupt("return",ja(r,new ju(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ku=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];xe(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Ee(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=we(ge().mark((function t(n,r){return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=we(ge().mark((function e(t){var n,r,i,a,o,u,s;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zu;case"linkViaPopup":case"linkViaRedirect":return qu;case"reauthViaPopup":case"reauthViaRedirect":return Bu;default:ur(this.auth,"internal-error")}}},{key:"resolve",value:function(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Hu=new gr(2e3,1e4);function Wu(e,t,n){return Qu.apply(this,arguments)}function Qu(){return(Qu=we(ge().mark((function e(t,n,r){var i,a,o;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Di(t),lr(t,n,ba),a=Vu(i,r),o=new Ju(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yu(){return(Yu=we(ge().mark((function e(t,n,r){var i,a,o;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return lr((i=ft(t)).auth,n,ba),a=Vu(i.auth,r),o=new Ju(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xu(e,t,n){return $u.apply(this,arguments)}function $u(){return($u=we(ge().mark((function e(t,n,r){var i,a,o;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return lr((i=ft(t)).auth,n,ba),a=Vu(i.auth,r),o=new Ju(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ju=function(e){Ce(n,e);var t=Re(n);function n(e,r,i,a,o){var u;return xe(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=Se(u),u}return Ee(n,[{key:"executeNotNull",value:function(){var e=we(ge().mark((function e(){var t;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return hr(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=we(ge().mark((function e(){var t,n=this;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pr(1===this.filter.length,"Popup operations only handle one event"),t=Yo(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(sr(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(sr(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(sr(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,Hu.get())}()}}]),n}(Ku);Ju.currentPopupAction=null;var Zu="pendingRedirect",es=new Map,ts=function(e){Ce(n,e);var t=Re(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return xe(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return Ee(n,[{key:"execute",value:function(){var e=we(ge().mark((function e(){var t,r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=es.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,ns(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Gn(Ae(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:es.set(this.auth._key(),t);case 21:return this.bypassAuthState||es.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=we(ge().mark((function e(t){var r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Gn(Ae(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Gn(Ae(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Ku);function ns(e,t){return rs.apply(this,arguments)}function rs(){return rs=we(ge().mark((function e(t,n){var r,i,a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ss(n),i=us(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),rs.apply(this,arguments)}function is(e,t){return as.apply(this,arguments)}function as(){return(as=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",us(t)._set(ss(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function os(e,t){es.set(e._key(),t)}function us(e){return ii(e._redirectPersistence)}function ss(e){return ui(Zu,e.config.apiKey,e.name)}function cs(e,t,n){return function(e,t,n){return ls.apply(this,arguments)}(e,t,n)}function ls(){return(ls=we(ge().mark((function e(t,n,r){var i,a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Di(t),lr(t,n,ba),e.next=4,i._initializationPromise;case 4:return a=Vu(i,r),e.next=7,is(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fs(e,t,n){return function(e,t,n){return hs.apply(this,arguments)}(e,t,n)}function hs(){return(hs=we(ge().mark((function e(t,n,r){var i,a,o;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return lr((i=ft(t)).auth,n,ba),e.next=4,i.auth._initializationPromise;case 4:return a=Vu(i.auth,r),e.next=7,is(a,i.auth);case 7:return e.next=9,ks(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ds(e,t,n){return function(e,t,n){return ps.apply(this,arguments)}(e,t,n)}function ps(){return(ps=we(ge().mark((function e(t,n,r){var i,a,o;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return lr((i=ft(t)).auth,n,ba),e.next=4,i.auth._initializationPromise;case 4:return a=Vu(i.auth,r),e.next=7,Ba(!1,i,n.providerId);case 7:return e.next=9,is(a,i.auth);case 9:return e.next=11,ks(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vs(e,t){return ms.apply(this,arguments)}function ms(){return(ms=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Di(t)._initializationPromise;case 2:return e.abrupt("return",ys(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ys(e,t){return gs.apply(this,arguments)}function gs(){return gs=we(ge().mark((function e(t,n){var r,i,a,o,u,s=arguments;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Di(t),a=Vu(i,n),o=new ts(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),gs.apply(this,arguments)}function ks(e){return ws.apply(this,arguments)}function ws(){return(ws=we(ge().mark((function e(t){var n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Yo("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bs=function(){function e(t){xe(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Ee(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xs(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!xs(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(sr(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_s(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(_s(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function _s(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function xs(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Is(e){return Es.apply(this,arguments)}function Es(){return Es=we(ge().mark((function e(t){var n,r=arguments;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Ir(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Es.apply(this,arguments)}var Ts=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ss=/^https?/;function Cs(){return(Cs=we(ge().mark((function e(t){var n,r,i,a,o;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Is(t);case 4:n=e.sent,r=n.authorizedDomains,i=Te(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!As(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:ur(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function As(e){var t=vr(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Ss.test(r))return!1;if(Ts.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Ns=new gr(3e4,6e4);function Rs(){var e=$o().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=dt(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Os=null;function Ps(e){return Os=Os||function(e){return new Promise((function(t,n){var r,i,a;function o(){Rs(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Rs(),n(sr(e,"network-request-failed"))},timeout:Ns.get()})}if(null===(i=null===(r=$o().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=$o().gapi)||void 0===a?void 0:a.load)){var u=Ci("iframefcb");return $o()[u]=function(){gapi.load?o():n(sr(e,"network-request-failed"))},Si("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Os=null,e}))}(e),Os}var Ds=new gr(5e3,15e3),Ls="__/auth/iframe",Ms="emulator/auth/iframe",Fs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Us=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vs(e){var t=e.config;hr(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?kr(t,Ms):"https://".concat(e.config.authDomain,"/").concat(Ls),r={apiKey:t.apiKey,appName:e.name,v:fn},i=Us.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(at(r).slice(1))}function js(e){return zs.apply(this,arguments)}function zs(){return zs=we(ge().mark((function e(t){var n,r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ps(t);case 2:return n=e.sent,hr(r=$o().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Vs(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fs,dontclear:!0},(function(e){return new Promise(function(){var n=we(ge().mark((function n(r,i){var a,o,u;return ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){$o().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=sr(t,"network-request-failed"),o=$o().setTimeout((function(){i(a)}),Ds.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),zs.apply(this,arguments)}var Bs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qs=function(){function e(t){xe(this,e),this.window=t,this.associatedEvent=null}return Ee(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Gs(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},Bs),{width:r.toString(),height:i.toString(),top:a,left:o}),l=He().toLowerCase();n&&(u=hi(l)?"_blank":n),li(l)&&(t=t||"http://localhost",c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=s(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return yi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:He())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new qs(null);var h=window.open(t||"",u,f);hr(h,e,"popup-blocked");try{h.focus()}catch(d){}return new qs(h)}var Ks="__/auth/handler",Hs="emulator/auth/handler",Ws=encodeURIComponent("fac");function Qs(e,t,n,r,i,a){return Ys.apply(this,arguments)}function Ys(){return Ys=we(ge().mark((function e(t,n,r,i,a,o){var u,c,l,f,h,d,p,v,m,y,g,k,w;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hr(t.config.authDomain,t,"auth-domain-config-required"),hr(t.config.apiKey,t,"invalid-api-key"),u={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:fn,eventId:a},n instanceof ba)for(n.setDefaultLanguage(t.languageCode),u.providerId=n.providerId||"",nt(n.getCustomParameters())||(u.customParameters=JSON.stringify(n.getCustomParameters())),c=0,l=Object.entries(o||{});c<l.length;c++)f=s(l[c],2),h=f[0],d=f[1],u[h]=d;for(n instanceof _a&&(p=n.getScopes().filter((function(e){return""!==e}))).length>0&&(u.scopes=p.join(",")),t.tenantId&&(u.tid=t.tenantId),v=u,m=0,y=Object.keys(v);m<y.length;m++)g=y[m],void 0===v[g]&&delete v[g];return e.next=10,t._getAppCheckToken();case 10:return k=e.sent,w=k?"#".concat(Ws,"=").concat(encodeURIComponent(k)):"",e.abrupt("return","".concat(Xs(t),"?").concat(at(v).slice(1)).concat(w));case 13:case"end":return e.stop()}}),e)}))),Ys.apply(this,arguments)}function Xs(e){var t=e.config;return t.emulator?kr(t,Hs):"https://".concat(t.authDomain,"/").concat(Ks)}var $s="webStorageSupport",Js=function(){function e(){xe(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ho,this._completeRedirectFn=ys,this._overrideRedirectResult=os}return Ee(e,[{key:"_openPopup",value:function(){var e=we(ge().mark((function e(t,n,r,i){var a,o;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pr(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,Qs(t,n,r,vr(),i);case 3:return o=e.sent,e.abrupt("return",Gs(t,o,Yo()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=we(ge().mark((function e(t,n,r,i){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,Qs(t,n,r,vr(),i);case 4:return Jo(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(pr(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=we(ge().mark((function e(t){var n,r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,js(t);case 2:return n=e.sent,r=new bs(t),n.register("authEvent",(function(e){return hr(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send($s,{type:$s},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[$s];void 0!==i&&t(!!i),ur(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Cs.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return gi()||fi()||yi()}}]),e}(),Zs=Js,ec=function(){function e(t){xe(this,e),this.factorId=t}return Ee(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return dr("unexpected MultiFactorSessionType")}}}]),e}(),tc=function(e){Ce(n,e);var t=Re(n);function n(e){var r;return xe(this,n),(r=t.call(this,"phone")).credential=e,r}return Ee(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Ir(e,"POST","/v2/accounts/mfaEnrollment:finalize",xr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Ir(e,"POST","/v2/accounts/mfaSignIn:finalize",xr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(ec),nc=function(){function e(){xe(this,e)}return Ee(e,null,[{key:"assertion",value:function(e){return tc._fromCredential(e)}}]),e}();nc.FACTOR_ID="phone";var rc=function(){function e(){xe(this,e)}return Ee(e,null,[{key:"assertionForEnrollment",value:function(e,t){return ic._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return ic._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=we(ge().mark((function e(t){var n,r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hr("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,i=n.auth,a={idToken:n.credential,totpEnrollmentInfo:{}},Ir(i,"POST","/v2/accounts/mfaEnrollment:start",xr(i,a));case 4:return r=e.sent,e.abrupt("return",ac._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}var i,a}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();rc.FACTOR_ID="totp";var ic=function(e){Ce(n,e);var t=Re(n);function n(e,r,i){var a;return xe(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return Ee(n,[{key:"_finalizeEnroll",value:function(){var e=we(ge().mark((function e(t,n,r){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hr("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",Uo(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=we(ge().mark((function e(t,n){var r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hr(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",gu(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(ec),ac=function(){function e(t,n,r,i,a,o,u){xe(this,e),this.sessionInfo=o,this.auth=u,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return Ee(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(oc(e)||oc(t))&&(r=!0),r&&(oc(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),oc(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function oc(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var uc="@firebase/auth",sc="0.23.2",cc=function(){function e(t){xe(this,e),this.auth=t,this.internalListeners=new Map}return Ee(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=we(ge().mark((function e(t){var n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){hr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var lc;!function(e){var t;null===(t=Be())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function fc(){return window}lc="Browser",rn(new pt("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,u=o.apiKey,s=o.authDomain;hr(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:u,authDomain:s,clientPlatform:lc,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ki(lc)},l=new Pi(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ii);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),rn(new pt("auth-internal",(function(e){return function(e){return new cc(e)}(Di(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),yn(uc,sc,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(lc)),yn(uc,sc,"esm2017");var hc=2e3;function dc(e,t,n){return pc.apply(this,arguments)}function pc(){return pc=we(ge().mark((function e(t,n,r){var i,a,o,u,s;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=fc(),o=a.BuildInfo,pr(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,wc(n.sessionId);case 4:return u=e.sent,s={},yi()?s.ibi=o.packageName:pi()?s.apn=o.packageName:ur(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Qs(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),pc.apply(this,arguments)}function vc(){return(vc=we(ge().mark((function e(t){var n,r,i;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=fc(),r=n.BuildInfo,i={},yi()?i.iosBundleId=r.packageName:pi()?i.androidPackageName=r.packageName:ur(t,"operation-not-supported-in-this-environment"),e.next=5,Is(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mc(e){var t=fc().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function yc(e,t,n){return gc.apply(this,arguments)}function gc(){return gc=we(ge().mark((function e(t,n,r){var i,a,o;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fc(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(sr(t,"redirect-cancelled-by-user"))}),hc))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),pi()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),gc.apply(this,arguments)}function kc(e){var t,n,r,i,a,o,u,s,c,l,f=fc();hr("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),hr("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),hr("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),hr("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),hr("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function wc(e){return bc.apply(this,arguments)}function bc(){return(bc=we(ge().mark((function e(t){var n,r,i;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_c(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _c(e){if(pr(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var xc=20,Ic=function(e){Ce(n,e);var t=Re(n);function n(){var e;return xe(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return Ee(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Gn(Ae(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(bs);function Ec(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Nc(),postBody:null,tenantId:e.tenantId,error:sr(e,"no-auth-event")}}function Tc(e,t){return Rc()._set(Oc(e),t)}function Sc(e){return Cc.apply(this,arguments)}function Cc(){return(Cc=we(ge().mark((function e(t){var n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rc()._get(Oc(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Rc()._remove(Oc(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ac(e,t){var n,r,i=function(e){var t=Pc(e),n=t.link?decodeURIComponent(t.link):void 0,r=Pc(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Pc(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Pc(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?sr(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Nc(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<xc;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function Rc(){return ii(Go)}function Oc(e){return ui("authEvent",e.config.apiKey,e.name)}function Pc(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=i(t=n)||ht(t)||o(t)||u();r[0];return ot(r.slice(1).join("?"))}var Dc=function(){function e(){xe(this,e),this._redirectPersistence=Ho,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ys,this._overrideRedirectResult=os}return Ee(e,[{key:"_initialize",value:function(){var e=we(ge().mark((function e(t){var n,r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Ic(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){ur(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=we(ge().mark((function e(t,n,r,i){var a,o,u,s;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kc(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),es.clear(),e.next=10,this._originValidation(t);case 10:return o=Ec(t,r,i),e.next=13,Tc(t,o);case 13:return e.next=15,dc(t,o,n);case 15:return u=e.sent,e.next=18,mc(u);case 18:return s=e.sent,e.abrupt("return",yc(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return vc.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=fc(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(we(ge().mark((function n(){return ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Sc(e);case 2:t.onEvent(Mc());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=we(ge().mark((function n(r){var i,a;return ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Sc(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Ac(i,r.url)),t.onEvent(a||Mc());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");fc().handleOpenURL=function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Lc=Dc;function Mc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:sr("no-auth-event")}}var Fc=1e3;function Uc(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Vc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He();return!("file:"!==Uc()&&"ionic:"!==Uc()&&"capacitor:"!==Uc()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function jc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He();return Xe()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He();return/Edge\/\d+/.test(e)}(e)}function zc(){try{var e=self.localStorage,t=Yo();if(e)return e.setItem(t,"1"),e.removeItem(t),!jc()||$e()}catch(n){return Bc()&&$e()}return!1}function Bc(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function qc(){return("http:"===Uc()||"https:"===Uc()||Qe()||Vc())&&!(Ye()||We())&&zc()&&!Bc()}function Gc(){return Vc()&&"undefined"!==typeof document}function Kc(){return Hc.apply(this,arguments)}function Hc(){return Hc=we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Gc()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),Fc);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)}))),Hc.apply(this,arguments)}var Wc={LOCAL:"local",NONE:"none",SESSION:"session"},Qc=hr,Yc="persistence";function Xc(e,t){Qc(Object.values(Wc).includes(t),e,"invalid-persistence-type"),Ye()?Qc(t!==Wc.SESSION,e,"unsupported-persistence-type"):We()?Qc(t===Wc.NONE,e,"unsupported-persistence-type"):Bc()?Qc(t===Wc.NONE||t===Wc.LOCAL&&$e(),e,"unsupported-persistence-type"):Qc(t===Wc.NONE||zc(),e,"unsupported-persistence-type")}function $c(e){return Jc.apply(this,arguments)}function Jc(){return Jc=we(ge().mark((function e(t){var n,r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Zc(),r=ui(Yc,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),Jc.apply(this,arguments)}function Zc(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var el=hr,tl=function(){function e(){xe(this,e),this.browserResolver=ii(Zs),this.cordovaResolver=ii(Lc),this.underlyingResolver=null,this._redirectPersistence=Ho,this._completeRedirectFn=ys,this._overrideRedirectResult=os}return Ee(e,[{key:"_initialize",value:function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=we(ge().mark((function e(t,n,r,i){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=we(ge().mark((function e(t,n,r,i){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Gc()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return el(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=we(ge().mark((function e(){var t;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Kc();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function nl(e){return e.unwrap()}function rl(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new sl(e,function(e,t){var n,r=ft(e),i=t;return hr(t.customData.operationType,r,"argument-error"),hr(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Mo._fromError(r,i)}(e,t));else if(r){var i=il(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function il(e){var t=(e instanceof Je?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Je)&&"temporaryProof"in t&&"phoneNumber"in t)return Uu.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Wn.PASSWORD)return null;switch(r){case Wn.GOOGLE:n=Ea;break;case Wn.FACEBOOK:n=Ia;break;case Wn.GITHUB:n=Ta;break;case Wn.TWITTER:n=Aa;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Sa._create(r,u):fa._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new xa(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Je?n.credentialFromError(e):n.credentialFromResult(e)}function al(e,t){return t.catch((function(t){throw t instanceof Je&&rl(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,il(t)),additionalUserInfo:Do(e),user:cl.getOrCreate(r)}}))}function ol(e,t){return ul.apply(this,arguments)}function ul(){return(ul=we(ge().mark((function e(t,n){var r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return al(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var sl=function(){function e(t,n){xe(this,e),this.resolver=n,this.auth=t.wrapped()}return Ee(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return al(nl(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),cl=function(){function e(t){xe(this,e),this._delegate=t,this.multiFactor=function(e){var t=ft(e);return jo.has(t)||jo.set(t,Vo._fromUser(t)),jo.get(t)}(t)}return Ee(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",al(this.auth,Xa(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ol(this.auth,Ou(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",al(this.auth,Xu(this._delegate,t,tl)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$c(Di(this.auth));case 2:return e.abrupt("return",ds(this._delegate,t,tl));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",al(this.auth,Ja(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return ol(this.auth,function(e,t,n){return Du.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return al(this.auth,function(e,t,n){return Yu.apply(this,arguments)}(this._delegate,e,tl))}},{key:"reauthenticateWithRedirect",value:function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$c(Di(this.auth));case 2:return e.abrupt("return",fs(this._delegate,t,tl));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return bo.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ua(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return To(ft(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return To(ft(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Fu.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Eo.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return _o.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();cl.USER_MAP=new WeakMap;var ll=hr,fl=function(){function e(t,n){if(xe(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;ll(r,"invalid-api-key",{appName:t.name}),ll(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?tl:void 0;this._delegate=n.initialize({options:{persistence:dl(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(tr),this.linkUnderlyingAuth()}return Ee(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?cl.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Mi(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return co.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return lo(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return so.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",al(this._delegate,po(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return wo.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=ka.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=we(ge().mark((function e(){var t;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ll(qc(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,vs(this._delegate,tl);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",al(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Di(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=hl(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=hl(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return mo.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return uo.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=we(ge().mark((function e(t){var n,r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Xc(this._delegate,t),e.t0=t,e.next=e.t0===Wc.SESSION?4:e.t0===Wc.LOCAL?6:e.t0===Wc.NONE?11:13;break;case 4:return n=Ho,e.abrupt("break",14);case 6:return e.next=8,ii(mu)._isAvailable();case 8:return r=e.sent,n=r?mu:Go,e.abrupt("break",14);case 11:return n=oi,e.abrupt("break",14);case 13:return e.abrupt("return",ur("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return al(this._delegate,function(e){return Da.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return al(this._delegate,Qa(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return al(this._delegate,function(e,t){return no.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return al(this._delegate,function(e,t,n){return Qa(ft(e),wa.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return al(this._delegate,function(e,t,n){return yo.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return ol(this._delegate,function(e,t,n){return Ru.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ll(qc(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",al(this._delegate,Wu(this._delegate,t,tl)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ll(qc(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,$c(this._delegate);case 3:return e.abrupt("return",cs(this._delegate,t,tl));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return ho.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function hl(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&cl.getOrCreate(e))},error:t,complete:n}}function dl(e,t){var n=function(e,t){var n=Zc();if(!n)return[];var r=ui(Yc,e,t);switch(n.getItem(r)){case Wc.NONE:return[oi];case Wc.LOCAL:return[mu,Ho];case Wc.SESSION:return[Ho];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(mu)||n.push(mu),"undefined"!==typeof window)for(var r=0,i=[Go,Ho];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(oi)||n.push(oi),n}fl.Persistence=Wc;var pl=function(){function e(){xe(this,e),this.providerId="phone",this._delegate=new Uu(nl(qn.auth()))}return Ee(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Uu.credential(e,t)}}]),e}();pl.PHONE_SIGN_IN_METHOD=Uu.PHONE_SIGN_IN_METHOD,pl.PROVIDER_ID=Uu.PROVIDER_ID;var vl,ml=hr,yl=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qn.app();xe(this,e),ml(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Cu(t,n,i.auth()),this.type=this._delegate.type}return Ee(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(vl=qn).INTERNAL.registerComponent(new pt("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new fl(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Qn,PASSWORD_RESET:Yn,RECOVER_EMAIL:Xn,REVERT_SECOND_FACTOR_ADDITION:$n,VERIFY_AND_CHANGE_EMAIL:Jn,VERIFY_EMAIL:Zn}},EmailAuthProvider:wa,FacebookAuthProvider:Ia,GithubAuthProvider:Ta,GoogleAuthProvider:Ea,OAuthProvider:xa,SAMLAuthProvider:Ca,PhoneAuthProvider:pl,PhoneMultiFactorGenerator:nc,RecaptchaVerifier:yl,TwitterAuthProvider:Aa,Auth:fl,AuthCredential:Vi,Error:Je}).setInstantiationMode("LAZY").setMultipleInstances(!1)),vl.registerVersion("@firebase/auth-compat","0.4.2");var gl,kl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},wl={},bl=bl||{},_l=kl||self;function xl(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Il(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var El="closure_uid_"+(1e9*Math.random()>>>0),Tl=0;function Sl(e,t,n){return e.call.apply(e.bind,arguments)}function Cl(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Al(e,t,n){return(Al=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Sl:Cl).apply(null,arguments)}function Nl(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Rl(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Ol(){this.s=this.s,this.o=this.o}Ol.prototype.s=!1,Ol.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,El)&&e[El]||(e[El]=++Tl))},Ol.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Pl=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Dl(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ll(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(xl(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Ml(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Ml.prototype.h=function(){this.defaultPrevented=!0};var Fl=function(){if(!_l.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{_l.addEventListener("test",(function(){}),t),_l.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function Ul(e){return/^[\s\xa0]*$/.test(e)}function Vl(){var e=_l.navigator;return e&&(e=e.userAgent)?e:""}function jl(e){return-1!=Vl().indexOf(e)}function zl(e){return zl[" "](e),e}zl[" "]=function(){};var Bl,ql,Gl=jl("Opera"),Kl=jl("Trident")||jl("MSIE"),Hl=jl("Edge"),Wl=Hl||Kl,Ql=jl("Gecko")&&!(-1!=Vl().toLowerCase().indexOf("webkit")&&!jl("Edge"))&&!(jl("Trident")||jl("MSIE"))&&!jl("Edge"),Yl=-1!=Vl().toLowerCase().indexOf("webkit")&&!jl("Edge");function Xl(){var e=_l.document;return e?e.documentMode:void 0}e:{var $l="",Jl=function(){var e=Vl();return Ql?/rv:([^\);]+)(\)|;)/.exec(e):Hl?/Edge\/([\d\.]+)/.exec(e):Kl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Yl?/WebKit\/(\S+)/.exec(e):Gl?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Jl&&($l=Jl?Jl[1]:""),Kl){var Zl=Xl();if(null!=Zl&&Zl>parseFloat($l)){Bl=String(Zl);break e}}Bl=$l}if(_l.document&&Kl){var ef=Xl();ql=ef||(parseInt(Bl,10)||void 0)}else ql=void 0;var tf=ql;function nf(e,t){if(Ml.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ql){e:{try{zl(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:rf[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&nf.$.h.call(this)}}Rl(nf,Ml);var rf={2:"touch",3:"pen",4:"mouse"};nf.prototype.h=function(){nf.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var af="closure_listenable_"+(1e6*Math.random()|0),of=0;function uf(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++of,this.fa=this.ia=!1}function sf(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function cf(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function lf(e){var t={};for(var n in e)t[n]=e[n];return t}var ff="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hf(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<ff.length;a++)n=ff[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function df(e){this.src=e,this.g={},this.h=0}function pf(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Pl(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(sf(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function vf(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}df.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=vf(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new uf(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var mf="closure_lm_"+(1e6*Math.random()|0),yf={};function gf(e,t,n,r,i){if(r&&r.once)return wf(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)gf(e,t[a],n,r,i);return null}return n=Sf(n),e&&e[af]?e.O(t,n,Il(r)?!!r.capture:!!r,i):kf(e,t,n,!1,r,i)}function kf(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Il(i)?!!i.capture:!!i,u=Ef(e);if(u||(e[mf]=u=new df(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=If;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Fl||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(xf(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function wf(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)wf(e,t[a],n,r,i);return null}return n=Sf(n),e&&e[af]?e.P(t,n,Il(r)?!!r.capture:!!r,i):kf(e,t,n,!0,r,i)}function bf(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)bf(e,t[a],n,r,i);else r=Il(r)?!!r.capture:!!r,n=Sf(n),e&&e[af]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=vf(a=e.g[t],n,r,i))&&(sf(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Ef(e))&&(t=e.g[t.toString()],e=-1,t&&(e=vf(t,n,r,i)),(n=-1<e?t[e]:null)&&_f(n))}function _f(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[af])pf(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(xf(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ef(t))?(pf(n,e),0==n.h&&(n.src=null,t[mf]=null)):sf(e)}}}function xf(e){return e in yf?yf[e]:yf[e]="on"+e}function If(e,t){if(e.fa)e=!0;else{t=new nf(t,this);var n=e.listener,r=e.la||e.src;e.ia&&_f(e),e=n.call(r,t)}return e}function Ef(e){return(e=e[mf])instanceof df?e:null}var Tf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sf(e){return"function"===typeof e?e:(e[Tf]||(e[Tf]=function(t){return e.handleEvent(t)}),e[Tf])}function Cf(){Ol.call(this),this.i=new df(this),this.S=this,this.J=null}function Af(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Ml(t,e);else if(t instanceof Ml)t.target=t.target||e;else{var i=t;hf(t=new Ml(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Nf(o,r,!0,t)&&i}if(i=Nf(o=t.g=e,r,!0,t)&&i,i=Nf(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Nf(o=t.g=n[a],r,!1,t)&&i}function Nf(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&pf(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Rl(Cf,Ol),Cf.prototype[af]=!0,Cf.prototype.removeEventListener=function(e,t,n,r){bf(this,e,t,n,r)},Cf.prototype.N=function(){if(Cf.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)sf(n[r]);delete t.g[e],t.h--}}this.J=null},Cf.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Cf.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Rf=_l.JSON.stringify,Of=function(){function e(t,n){xe(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Ee(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function Pf(){var e=zf,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Df=function(){function e(){xe(this,e),this.h=this.g=null}return Ee(e,[{key:"add",value:function(e,t){var n=Lf.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Lf=new Of((function(){return new Mf}),(function(e){return e.reset()})),Mf=function(){function e(){xe(this,e),this.next=this.g=this.h=null}return Ee(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Ff(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Uf(e){_l.setTimeout((function(){throw e}),0)}var Vf,jf=!1,zf=new Df,Bf=function(){var e=_l.Promise.resolve(void 0);Vf=function(){e.then(qf)}},qf=function(){for(var e;e=Pf();){try{e.h.call(e.g)}catch(n){Uf(n)}var t=Lf;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}jf=!1};function Gf(e,t){Cf.call(this),this.h=e||1,this.g=t||_l,this.j=Al(this.qb,this),this.l=Date.now()}function Kf(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Hf(e,t,n){if("function"===typeof e)n&&(e=Al(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Al(e.handleEvent,e)}return 2147483647<Number(t)?-1:_l.setTimeout(e,t||0)}function Wf(e){e.g=Hf((function(){e.g=null,e.i&&(e.i=!1,Wf(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Rl(Gf,Cf),(gl=Gf.prototype).ga=!1,gl.T=null,gl.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Af(this,"tick"),this.ga&&(Kf(this),this.start()))}},gl.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},gl.N=function(){Gf.$.N.call(this),Kf(this),delete this.g};var Qf=function(e){Ce(n,e);var t=Re(n);function n(e,r){var i;return xe(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Ee(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Wf(this)}},{key:"N",value:function(){Gn(Ae(n.prototype),"N",this).call(this),this.g&&(_l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Ol);function Yf(e){Ol.call(this),this.h=e,this.g={}}Rl(Yf,Ol);var Xf=[];function $f(e,t,n,r){Array.isArray(n)||(n&&(Xf[0]=n.toString()),n=Xf);for(var i=0;i<n.length;i++){var a=gf(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Jf(e){cf(e.g,(function(e,t){this.g.hasOwnProperty(t)&&_f(e)}),e),e.g={}}function Zf(){this.g=!0}function eh(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Rf(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Yf.prototype.N=function(){Yf.$.N.call(this),Jf(this)},Yf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zf.prototype.Ea=function(){this.g=!1},Zf.prototype.info=function(){};var th={},nh=null;function rh(){return nh=nh||new Cf}function ih(e){Ml.call(this,th.Ta,e)}function ah(e){var t=rh();Af(t,new ih(t))}function oh(e,t){Ml.call(this,th.STAT_EVENT,e),this.stat=t}function uh(e){var t=rh();Af(t,new oh(t,e))}function sh(e,t){Ml.call(this,th.Ua,e),this.size=t}function ch(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return _l.setTimeout((function(){e()}),t)}th.Ta="serverreachability",Rl(ih,Ml),th.STAT_EVENT="statevent",Rl(oh,Ml),th.Ua="timingevent",Rl(sh,Ml);var lh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},fh={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function hh(){}function dh(e){return e.h||(e.h=e.i())}function ph(){}hh.prototype.h=null;var vh,mh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function yh(){Ml.call(this,"d")}function gh(){Ml.call(this,"c")}function kh(){}function wh(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Yf(this),this.P=_h,e=Wl?125:void 0,this.V=new Gf(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new bh}function bh(){this.i=null,this.g="",this.h=!1}Rl(yh,Ml),Rl(gh,Ml),Rl(kh,hh),kh.prototype.g=function(){return new XMLHttpRequest},kh.prototype.i=function(){return{}},vh=new kh;var _h=45e3,xh={},Ih={};function Eh(e,t,n){e.L=1,e.v=Gh(Vh(t)),e.s=n,e.S=!0,Th(e,null)}function Th(e,t){e.G=Date.now(),Nh(e),e.A=Vh(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),rd(n.i,"t",r),e.C=0,n=e.l.J,e.h=new bh,e.g=ip(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Qf(Al(e.Pa,e,e.g),e.O)),$f(e.U,e.g,"readystatechange",e.nb),t=e.I?lf(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),ah(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Sh(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Ch(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=Ah(e,n))==Ih){4==t&&(e.o=4,uh(14),i=!1),eh(e.j,e.m,null,"[Incomplete Response]");break}if(r==xh){e.o=4,uh(15),eh(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}eh(e.j,e.m,r,null),Lh(e,r)}Sh(e)&&r!=Ih&&r!=xh&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,uh(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xd(t),t.M=!0,uh(11))):(eh(e.j,e.m,n,"[Invalid Chunked Response]"),Dh(e),Ph(e))}function Ah(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ih:(n=Number(t.substring(n,r)),isNaN(n)?xh:(r+=1)+n>t.length?Ih:(t=t.slice(r,r+n),e.C=r+n,t))}function Nh(e){e.Y=Date.now()+e.P,Rh(e,e.P)}function Rh(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ch(Al(e.lb,e),t)}function Oh(e){e.B&&(_l.clearTimeout(e.B),e.B=null)}function Ph(e){0==e.l.H||e.J||Zd(e.l,e)}function Dh(e){Oh(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Kf(e.V),Jf(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Lh(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||ld(n.i,e)))if(!e.K&&ld(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Jd(n),Bd(n)}Yd(n),uh(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=ch(Al(n.ib,n),6e3));if(1>=cd(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else tp(n,11)}else if((e.K||n.g==e)&&Jd(n),!Ul(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var u=a[4];null!=u&&(n.Ga=u,n.l.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(fd(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,qh(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=rp(r,r.J?r.pa:null,r.Y),d.K){hd(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(Oh(p),Nh(p)),r.g=d}else Qd(r);0<n.j.length&&Gd(n)}else"stop"!=a[0]&&"close"!=a[0]||tp(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?tp(n,7):zd(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}ah()}catch(a){}}function Mh(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(xl(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(xl(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(xl(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(gl=wh.prototype).setTimeout=function(e){this.P=e},gl.nb=function(e){e=e.target;var t=this.M;t&&3==Ld(e)?t.l():this.Pa(e)},gl.Pa=function(e){try{if(e==this.g)e:{var t=Ld(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||Wl||this.g&&(this.h.h||this.g.ja()||Md(this.g)))){this.J||4!=t||7==n||ah(),Oh(this);var r=this.g.da();this.ca=r;t:if(Sh(this)){var i=Md(this.g);e="";var a=i.length,o=4==Ld(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Dh(this),Ph(this);var u="";break t}this.h.i=new _l.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ul(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,uh(12),Dh(this),Ph(this);break e}eh(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lh(this,r)}this.S?(Ch(this,t,u),Wl&&this.i&&3==t&&($f(this.U,this.V,"tick",this.mb),this.V.start())):(eh(this.j,this.m,u,null),Lh(this,u)),4==t&&Dh(this),this.i&&!this.J&&(4==t?Zd(this.l,this):(this.i=!1,Nh(this)))}else(function(e){var t={};e=(e.g&&2<=Ld(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!Ul(e[n])){var r=Ff(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<u.indexOf("Unknown SID")?(this.o=3,uh(12)):(this.o=0,uh(13)),Dh(this),Ph(this)}}}catch(t){}},gl.mb=function(){if(this.g){var e=Ld(this.g),t=this.g.ja();this.C<t.length&&(Oh(this),Ch(this,e,t),this.i&&4!=e&&Nh(this))}},gl.cancel=function(){this.J=!0,Dh(this)},gl.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(ah(),uh(17)),Dh(this),this.o=2,Ph(this)):Rh(this,this.Y-e)};var Fh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Uh(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Uh){this.h=e.h,jh(this,e.j),this.s=e.s,this.g=e.g,zh(this,e.m),this.l=e.l;var t=e.i,n=new Zh;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Bh(this,n),this.o=e.o}else e&&(t=String(e).match(Fh))?(this.h=!1,jh(this,t[1]||"",!0),this.s=Kh(t[2]||""),this.g=Kh(t[3]||"",!0),zh(this,t[4]),this.l=Kh(t[5]||"",!0),Bh(this,t[6]||"",!0),this.o=Kh(t[7]||"")):(this.h=!1,this.i=new Zh(null,this.h))}function Vh(e){return new Uh(e)}function jh(e,t,n){e.j=n?Kh(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function zh(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Bh(e,t,n){t instanceof Zh?(e.i=t,function(e,t){t&&!e.j&&(ed(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(td(this,t),rd(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Hh(t,$h)),e.i=new Zh(t,e.h))}function qh(e,t,n){e.i.set(t,n)}function Gh(e){return qh(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Kh(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Hh(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Wh),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Wh(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Uh.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Hh(t,Qh,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Hh(t,Qh,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Hh(n,"/"==n.charAt(0)?Xh:Yh,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Hh(n,Jh)),e.join("")};var Qh=/[#\/\?@]/g,Yh=/[#\?:]/g,Xh=/[#\?]/g,$h=/[#\?@]/g,Jh=/#/g;function Zh(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ed(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function td(e,t){ed(e),t=id(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function nd(e,t){return ed(e),t=id(e,t),e.g.has(t)}function rd(e,t,n){td(e,t),0<n.length&&(e.i=null,e.g.set(id(e,t),Dl(n)),e.h+=n.length)}function id(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(gl=Zh.prototype).add=function(e,t){ed(this),this.i=null,e=id(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},gl.forEach=function(e,t){ed(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},gl.ta=function(){ed(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},gl.Z=function(e){ed(this);var t=[];if("string"===typeof e)nd(this,e)&&(t=t.concat(this.g.get(id(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},gl.set=function(e,t){return ed(this),this.i=null,nd(this,e=id(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},gl.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},gl.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var ad=Ee((function e(t,n){xe(this,e),this.g=t,this.map=n}));function od(e){this.l=e||ud,_l.PerformanceNavigationTiming?e=0<(e=_l.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(_l.g&&_l.g.Ka&&_l.g.Ka()&&_l.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ud=10;function sd(e){return!!e.h||!!e.g&&e.g.size>=e.j}function cd(e){return e.h?1:e.g?e.g.size:0}function ld(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function fd(e,t){e.g?e.g.add(t):e.h=t}function hd(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function dd(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Te(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return Dl(e.i)}od.prototype.cancel=function(){if(this.i=dd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Te(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var pd,vd=function(){function e(){xe(this,e)}return Ee(e,[{key:"stringify",value:function(e){return _l.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return _l.JSON.parse(e,void 0)}}]),e}();function md(){this.g=new vd}function yd(e,t,n){var r=n||"";try{Mh(e,(function(e,n){var i=e;Il(e)&&(i=Rf(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function gd(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function kd(e){this.l=e.fc||null,this.j=e.ob||!1}function wd(e,t){Cf.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=bd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Rl(kd,hh),kd.prototype.g=function(){return new wd(this.l,this.j)},kd.prototype.i=(pd={},function(){return pd}),Rl(wd,Cf);var bd=0;function _d(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function xd(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Id(e)}function Id(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(gl=wd.prototype).open=function(e,t){if(this.readyState!=bd)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Id(this)},gl.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||_l).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},gl.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,xd(this)),this.readyState=bd},gl.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Id(this)),this.g&&(this.readyState=3,Id(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof _l.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_d(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},gl.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?xd(this):Id(this),3==this.readyState&&_d(this)}},gl.Za=function(e){this.g&&(this.response=this.responseText=e,xd(this))},gl.Ya=function(e){this.g&&(this.response=e,xd(this))},gl.ka=function(){this.g&&xd(this)},gl.setRequestHeader=function(e,t){this.v.append(e,t)},gl.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},gl.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(wd.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Ed=_l.JSON.parse;function Td(e){Cf.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Sd,this.L=this.M=!1}Rl(Td,Cf);var Sd="",Cd=/^https?$/i,Ad=["POST","PUT"];function Nd(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Rd(e),Pd(e)}function Rd(e){e.F||(e.F=!0,Af(e,"complete"),Af(e,"error"))}function Od(e){if(e.h&&"undefined"!=typeof bl&&(!e.C[1]||4!=Ld(e)||2!=e.da()))if(e.v&&4==Ld(e))Hf(e.La,0,e);else if(Af(e,"readystatechange"),4==Ld(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Fh)[1]||null;!a&&_l.self&&_l.self.location&&(a=_l.self.location.protocol.slice(0,-1)),i=!Cd.test(a?a.toLowerCase():"")}t=i}if(t)Af(e,"complete"),Af(e,"success");else{e.m=6;try{var o=2<Ld(e)?e.g.statusText:""}catch(u){o=""}e.j=o+" ["+e.da()+"]",Rd(e)}}finally{Pd(e)}}}function Pd(e,t){if(e.g){Dd(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||Af(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Dd(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(_l.clearTimeout(e.A),e.A=null)}function Ld(e){return e.g?e.g.readyState:0}function Md(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Sd:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(zp){return null}}function Fd(e){var t="";return cf(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Ud(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Fd(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):qh(e,t,n))}function Vd(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function jd(e){this.Ga=0,this.j=[],this.l=new Zf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Vd("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Vd("baseRetryDelayMs",5e3,e),this.hb=Vd("retryDelaySeedMs",1e4,e),this.eb=Vd("forwardChannelMaxRetries",2,e),this.xa=Vd("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new od(e&&e.concurrentRequestLimit),this.Ja=new md,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function zd(e){if(qd(e),3==e.H){var t=e.W++,n=Vh(e.I);if(qh(n,"SID",e.K),qh(n,"RID",t),qh(n,"TYPE","terminate"),Hd(e,n),(t=new wh(e,e.l,t)).L=2,t.v=Gh(Vh(n)),n=!1,_l.navigator&&_l.navigator.sendBeacon)try{n=_l.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&_l.Image&&((new Image).src=t.v,n=!0),n||(t.g=ip(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Nh(t)}np(e)}function Bd(e){e.g&&(Xd(e),e.g.cancel(),e.g=null)}function qd(e){Bd(e),e.u&&(_l.clearTimeout(e.u),e.u=null),Jd(e),e.i.cancel(),e.m&&("number"===typeof e.m&&_l.clearTimeout(e.m),e.m=null)}function Gd(e){if(!sd(e.i)&&!e.m){e.m=!0;var t=e.Na;Vf||Bf(),jf||(Vf(),jf=!0),zf.add(t,e),e.C=0}}function Kd(e,t){var n;n=t?t.m:e.W++;var r=Vh(e.I);qh(r,"SID",e.K),qh(r,"RID",n),qh(r,"AID",e.V),Hd(e,r),e.o&&e.s&&Ud(r,e.o,e.s),n=new wh(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Wd(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),fd(e.i,n),Eh(n,r,t)}function Hd(e,t){e.na&&cf(e.na,(function(e,n){qh(t,n,e)})),e.h&&Mh({},(function(e,n){qh(t,n,e)}))}function Wd(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Al(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].g,l=i[s].map;if(0>(c-=a))a=Math.max(0,i[s].g-100),u=!1;else try{yd(l,o,"req"+c+"_")}catch(Jp){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function Qd(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Vf||Bf(),jf||(Vf(),jf=!0),zf.add(t,e),e.A=0}}function Yd(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=ch(Al(e.Ma,e),ep(e,e.A)),e.A++,!0)}function Xd(e){null!=e.B&&(_l.clearTimeout(e.B),e.B=null)}function $d(e){e.g=new wh(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Vh(e.wa);qh(t,"RID","rpc"),qh(t,"SID",e.K),qh(t,"AID",e.V),qh(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&qh(t,"TO",e.qa),qh(t,"TYPE","xmlhttp"),Hd(e,t),e.o&&e.s&&Ud(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Gh(Vh(t)),n.s=null,n.S=!0,Th(n,e)}function Jd(e){null!=e.v&&(_l.clearTimeout(e.v),e.v=null)}function Zd(e,t){var n=null;if(e.g==t){Jd(e),Xd(e),e.g=null;var r=2}else{if(!ld(e.i,t))return;n=t.F,hd(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Af(r=rh(),new sh(r,n)),Gd(e)}else Qd(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(cd(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=ch(Al(e.Na,e,t),ep(e,e.C)),e.C++,!0))}(e,t)||2==r&&Yd(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:tp(e,5);break;case 4:tp(e,10);break;case 3:tp(e,6);break;default:tp(e,2)}}function ep(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function tp(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Al(e.pb,e);n||(n=new Uh("//www.google.com/images/cleardot.gif"),_l.location&&"http"==_l.location.protocol||jh(n,"https"),Gh(n)),function(e,t){var n=new Zf;if(_l.Image){var r=new Image;r.onload=Nl(gd,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Nl(gd,n,r,"TestLoadImage: error",!1,t),r.onabort=Nl(gd,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Nl(gd,n,r,"TestLoadImage: timeout",!1,t),_l.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else uh(2);e.H=0,e.h&&e.h.za(t),np(e),qd(e)}function np(e){if(e.H=0,e.ma=[],e.h){var t=dd(e.i);0==t.length&&0==e.j.length||(Ll(e.ma,t),Ll(e.ma,e.j),e.i.i.length=0,Dl(e.j),e.j.length=0),e.h.ya()}}function rp(e,t,n){var r=n instanceof Uh?Vh(n):new Uh(n);if(""!=r.g)t&&(r.g=t+"."+r.g),zh(r,r.m);else{var i=_l.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Uh(null);r&&jh(a,r),t&&(a.g=t),i&&zh(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&qh(r,n,t),qh(r,"VER",e.ra),Hd(e,r),r}function ip(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Td(new kd({ob:!0})):new Td(e.va)).Oa(e.J),t}function ap(){}function op(){if(Kl&&!(10<=Number(tf)))throw Error("Environmental error: no available transport.")}function up(e,t){Cf.call(this),this.g=new jd(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Ul(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ul(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new lp(this)}function sp(e){yh.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function cp(){gh.call(this),this.status=1}function lp(e){this.g=e}function fp(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function hp(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function dp(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(gl=Td.prototype).Oa=function(e){this.M=e},gl.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():vh.g(),this.C=this.u?dh(this.u):dh(vh),this.g.onreadystatechange=Al(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void Nd(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=Te(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=_l.FormData&&e instanceof _l.FormData,!(0<=Pl(Ad,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var c,l=Te(n);try{for(l.s();!(c=l.n()).done;){var f=s(c.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){l.e(p)}finally{l.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Dd(this),0<this.B&&((this.L=function(e){return Kl&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Al(this.ua,this)):this.A=Hf(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Nd(this,u)}},gl.ua=function(){"undefined"!=typeof bl&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Af(this,"timeout"),this.abort(8))},gl.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Af(this,"complete"),Af(this,"abort"),Pd(this))},gl.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Pd(this,!0)),Td.$.N.call(this)},gl.La=function(){this.s||(this.G||this.v||this.l?Od(this):this.kb())},gl.kb=function(){Od(this)},gl.isActive=function(){return!!this.g},gl.da=function(){try{return 2<Ld(this)?this.g.status:-1}catch(pd){return-1}},gl.ja=function(){try{return this.g?this.g.responseText:""}catch(pd){return""}},gl.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ed(t)}},gl.Ia=function(){return this.m},gl.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(gl=jd.prototype).ra=8,gl.H=1,gl.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new wh(this,this.l,e),n=this.s;if(this.U&&(n?hf(n=lf(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Wd(this,t,r),qh(i=Vh(this.I),"RID",e),qh(i,"CVER",22),this.F&&qh(i,"X-HTTP-Session-Id",this.F),Hd(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Fd(n)))+"&"+r:this.o&&Ud(i,this.o,n)),fd(this.i,t),this.bb&&qh(i,"TYPE","init"),this.P?(qh(i,"$req",r),qh(i,"SID","null"),t.aa=!0,Eh(t,i,null)):Eh(t,i,r),this.H=2}}else 3==this.H&&(e?Kd(this,e):0==this.j.length||sd(this.i)||Kd(this))},gl.Ma=function(){if(this.u=null,$d(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=ch(Al(this.jb,this),e)}},gl.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,uh(10),Bd(this),$d(this))},gl.ib=function(){null!=this.v&&(this.v=null,Bd(this),Yd(this),uh(19))},gl.pb=function(e){e?(this.l.info("Successfully pinged google.com"),uh(2)):(this.l.info("Failed to ping google.com"),uh(1))},gl.isActive=function(){return!!this.h&&this.h.isActive(this)},(gl=ap.prototype).Ba=function(){},gl.Aa=function(){},gl.za=function(){},gl.ya=function(){},gl.isActive=function(){return!0},gl.Va=function(){},op.prototype.g=function(e,t){return new up(e,t)},Rl(up,Cf),up.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;uh(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=rp(e,null,e.Y),Gd(e)},up.prototype.close=function(){zd(this.g)},up.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Rf(e),e=n);t.j.push(new ad(t.fb++,e)),3==t.H&&Gd(t)},up.prototype.N=function(){this.g.h=null,delete this.j,zd(this.g),delete this.g,up.$.N.call(this)},Rl(sp,yh),Rl(cp,gh),Rl(lp,ap),lp.prototype.Ba=function(){Af(this.g,"a")},lp.prototype.Aa=function(e){Af(this.g,new sp(e))},lp.prototype.za=function(e){Af(this.g,new cp)},lp.prototype.ya=function(){Af(this.g,"b")},Rl(fp,(function(){this.blockSize=-1})),fp.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},fp.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)hp(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){hp(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){hp(this,r),i=0;break}}this.h=i,this.i+=t},fp.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var pp={};function vp(e){return-128<=e&&128>e?function(e,t){var n=pp;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new dp([0|e],0>e?-1:0)})):new dp([0|e],0>e?-1:0)}function mp(e){if(isNaN(e)||!isFinite(e))return gp;if(0>e)return xp(mp(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=yp;return new dp(t,0)}var yp=4294967296,gp=vp(0),kp=vp(1),wp=vp(16777216);function bp(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function _p(e){return-1==e.h}function xp(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new dp(n,~e.h).add(kp)}function Ip(e,t){return e.add(xp(t))}function Ep(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Tp(e,t){this.g=e,this.h=t}function Sp(e,t){if(bp(t))throw Error("division by zero");if(bp(e))return new Tp(gp,gp);if(_p(e))return t=Sp(xp(e),t),new Tp(xp(t.g),xp(t.h));if(_p(t))return t=Sp(e,xp(t)),new Tp(xp(t.g),t.h);if(30<e.g.length){if(_p(e)||_p(t))throw Error("slowDivide_ only works with positive integers.");for(var n=kp,r=t;0>=r.X(e);)n=Cp(n),r=Cp(r);var i=Ap(n,1),a=Ap(r,1);for(r=Ap(r,2),n=Ap(n,2);!bp(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=Ap(r,1),n=Ap(n,1)}return t=Ip(e,i.R(t)),new Tp(i,t)}for(i=gp;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=mp(n)).R(t);_p(o)||0<o.X(e);)o=(a=mp(n-=r)).R(t);bp(a)&&(a=kp),i=i.add(a),e=Ip(e,o)}return new Tp(i,e)}function Cp(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new dp(n,e.h)}function Ap(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new dp(i,e.h)}(gl=dp.prototype).ea=function(){if(_p(this))return-xp(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:yp+r)*t,t*=yp}return e},gl.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(bp(this))return"0";if(_p(this))return"-"+xp(this).toString(e);for(var t=mp(Math.pow(e,6)),n=this,r="";;){var i=Sp(n,t).g,a=((0<(n=Ip(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(bp(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},gl.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},gl.X=function(e){return _p(e=Ip(this,e))?-1:bp(e)?0:1},gl.abs=function(){return _p(this)?xp(this):this},gl.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new dp(n,-2147483648&n[n.length-1]?-1:0)},gl.R=function(e){if(bp(this)||bp(e))return gp;if(_p(this))return _p(e)?xp(this).R(xp(e)):xp(xp(this).R(e));if(_p(e))return xp(this.R(xp(e)));if(0>this.X(wp)&&0>e.X(wp))return mp(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,Ep(n,2*r+2*i),n[2*r+2*i+1]+=a*s,Ep(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,Ep(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,Ep(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new dp(n,0)},gl.gb=function(e){return Sp(this,e).h},gl.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new dp(n,this.h&e.h)},gl.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new dp(n,this.h|e.h)},gl.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new dp(n,this.h^e.h)},op.prototype.createWebChannel=op.prototype.g,up.prototype.send=up.prototype.u,up.prototype.open=up.prototype.m,up.prototype.close=up.prototype.close,lh.NO_ERROR=0,lh.TIMEOUT=8,lh.HTTP_ERROR=6,fh.COMPLETE="complete",ph.EventType=mh,mh.OPEN="a",mh.CLOSE="b",mh.ERROR="c",mh.MESSAGE="d",Cf.prototype.listen=Cf.prototype.O,Td.prototype.listenOnce=Td.prototype.P,Td.prototype.getLastError=Td.prototype.Sa,Td.prototype.getLastErrorCode=Td.prototype.Ia,Td.prototype.getStatus=Td.prototype.da,Td.prototype.getResponseJson=Td.prototype.Wa,Td.prototype.getResponseText=Td.prototype.ja,Td.prototype.send=Td.prototype.ha,Td.prototype.setWithCredentials=Td.prototype.Oa,fp.prototype.digest=fp.prototype.l,fp.prototype.reset=fp.prototype.reset,fp.prototype.update=fp.prototype.j,dp.prototype.add=dp.prototype.add,dp.prototype.multiply=dp.prototype.R,dp.prototype.modulo=dp.prototype.gb,dp.prototype.compare=dp.prototype.X,dp.prototype.toNumber=dp.prototype.ea,dp.prototype.toString=dp.prototype.toString,dp.prototype.getBits=dp.prototype.D,dp.fromNumber=mp,dp.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return xp(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=mp(Math.pow(n,8)),i=gp,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=mp(Math.pow(n,o)),i=i.R(o).add(mp(u))):i=(i=i.R(r)).add(mp(u))}return i};var Np=wl.createWebChannelTransport=function(){return new op},Rp=wl.getStatEventTarget=function(){return rh()},Op=wl.ErrorCode=lh,Pp=wl.EventType=fh,Dp=wl.Event=th,Lp=wl.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Mp=wl.FetchXmlHttpFactory=kd,Fp=wl.WebChannel=ph,Up=wl.XhrIo=Td,Vp=wl.Md5=fp,jp=wl.Integer=dp,zp="@firebase/firestore",Bp=function(){function e(t){xe(this,e),this.uid=t}return Ee(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Bp.UNAUTHENTICATED=new Bp(null),Bp.GOOGLE_CREDENTIALS=new Bp("google-credentials-uid"),Bp.FIRST_PARTY=new Bp("first-party-uid"),Bp.MOCK_USER=new Bp("mock-user");var qp="9.23.0",Gp=new Et("@firebase/firestore");function Kp(){return Gp.logLevel}function Hp(e){if(Gp.logLevel<=gt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Yp);Gp.debug.apply(Gp,["Firestore (".concat(qp,"): ").concat(e)].concat(dt(i)))}}function Wp(e){if(Gp.logLevel<=gt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Yp);Gp.error.apply(Gp,["Firestore (".concat(qp,"): ").concat(e)].concat(dt(i)))}}function Qp(e){if(Gp.logLevel<=gt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Yp);Gp.warn.apply(Gp,["Firestore (".concat(qp,"): ").concat(e)].concat(dt(i)))}}function Yp(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Xp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(qp,") INTERNAL ASSERTION FAILED: ")+e;throw Wp(t),new Error(t)}function $p(e,t){e||Xp()}function Jp(e,t){return e}var Zp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ev=function(e){Ce(n,e);var t=Re(n);function n(e,r){var i;return xe(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return Ee(n)}(Je),tv=Ee((function e(){var t=this;xe(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),nv=Ee((function e(t,n){xe(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),rv=function(){function e(){xe(this,e)}return Ee(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Bp.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),iv=function(){function e(t){xe(this,e),this.token=t,this.changeListener=null}return Ee(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),av=function(){function e(t){xe(this,e),this.t=t,this.currentUser=Bp.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Ee(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new tv;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new tv,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Hp("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Hp("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new tv)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Hp("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?($p("string"==typeof n.accessToken),new nv(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return $p(null===e||"string"==typeof e),new Bp(e)}}]),e}(),ov=function(){function e(t,n,r){xe(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=Bp.FIRST_PARTY,this.g=new Map}return Ee(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),uv=function(){function e(t,n,r){xe(this,e),this.h=t,this.l=n,this.m=r}return Ee(e,[{key:"getToken",value:function(){return Promise.resolve(new ov(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Bp.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),sv=Ee((function e(t){xe(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),cv=function(){function e(t){xe(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return Ee(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Hp("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,Hp("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Hp("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):Hp("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?($p("string"==typeof t.token),e.T=t.token,new sv(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function lv(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var fv=function(){function e(){xe(this,e)}return Ee(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=lv(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function hv(e,t){return e<t?-1:e>t?1:0}function dv(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function pv(e){return e+"\0"}var vv=function(){function e(t,n){if(xe(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new ev(Zp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ev(Zp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new ev(Zp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ev(Zp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Ee(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?hv(this.nanoseconds,e.nanoseconds):hv(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),mv=function(){function e(t){xe(this,e),this.timestamp=t}return Ee(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new vv(0,0))}},{key:"max",value:function(){return new e(new vv(253402300799,999999999))}}]),e}(),yv=function(){function e(t,n,r){xe(this,e),void 0===n?n=0:n>t.length&&Xp(),void 0===r?r=t.length-n:r>t.length-n&&Xp(),this.segments=t,this.offset=n,this.len=r}return Ee(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),gv=function(e){Ce(n,e);var t=Re(n);function n(){return xe(this,n),t.apply(this,arguments)}return Ee(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new ev(Zp.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,dt(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(yv),kv=/^[_a-zA-Z][_a-zA-Z0-9]*$/,wv=function(e){Ce(n,e);var t=Re(n);function n(){return xe(this,n),t.apply(this,arguments)}return Ee(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return kv.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new ev(Zp.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new ev(Zp.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new ev(Zp.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new ev(Zp.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(yv),bv=function(){function e(t){xe(this,e),this.path=t}return Ee(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===gv.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(gv.fromString(t))}},{key:"fromName",value:function(t){return new e(gv.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(gv.emptyPath())}},{key:"comparator",value:function(e,t){return gv.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new gv(t.slice()))}}]),e}(),_v=Ee((function e(t,n,r,i){xe(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function xv(e){return e.fields.find((function(e){return 2===e.kind}))}function Iv(e){return e.fields.filter((function(e){return 2!==e.kind}))}_v.UNKNOWN_ID=-1;var Ev=Ee((function e(t,n){xe(this,e),this.fieldPath=t,this.kind=n}));var Tv=function(){function e(t,n){xe(this,e),this.sequenceNumber=t,this.offset=n}return Ee(e,null,[{key:"empty",value:function(){return new e(0,Av.min())}}]),e}();function Sv(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=mv.fromTimestamp(1e9===r?new vv(n+1,0):new vv(n,r));return new Av(i,bv.empty(),t)}function Cv(e){return new Av(e.readTime,e.key,-1)}var Av=function(){function e(t,n,r){xe(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Ee(e,null,[{key:"min",value:function(){return new e(mv.min(),bv.empty(),-1)}},{key:"max",value:function(){return new e(mv.max(),bv.empty(),-1)}}]),e}();function Nv(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=bv.comparator(e.documentKey,t.documentKey))?n:hv(e.largestBatchId,t.largestBatchId)}var Rv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ov=function(){function e(){xe(this,e),this.onCommittedListeners=[]}return Ee(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Pv(e){return Dv.apply(this,arguments)}function Dv(){return(Dv=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Zp.FAILED_PRECONDITION&&t.message===Rv){e.next=2;break}throw t;case 2:Hp("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Lv=function(){function e(t){var n=this;xe(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Ee(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Xp(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Te(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Mv=function(){function e(t,n){var r=this;xe(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.v=new tv,this.transaction.oncomplete=function(){r.v.resolve()},this.transaction.onabort=function(){n.error?r.v.reject(new Vv(t,n.error)):r.v.resolve()},this.transaction.onerror=function(e){var n=Gv(e.target.error);r.v.reject(new Vv(t,n))}}return Ee(e,[{key:"R",get:function(){return this.v.promise}},{key:"abort",value:function(e){e&&this.v.reject(e),this.aborted||(Hp("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new zv(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Vv(n,t)}}}]),e}(),Fv=function(){function e(t,n,r){xe(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(He())&&Wp("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Ee(e,[{key:"$",value:function(){var e=we(ge().mark((function e(t){var n=this;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Hp("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Vv(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new ev(Zp.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new ev(Zp.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Vv(t,n))},i.onupgradeneeded=function(e){Hp("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.O(t,i.transaction,e.oldVersion,n.version).next((function(){Hp("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=we(ge().mark((function e(t,n,r,i){var a,o,u,s,c=this;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=ge().mark((function e(){var n,u,s,l;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.$(t);case 4:return c.db=e.sent,n=Mv.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),Lv.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.R;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,Hp("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Hp("SimpleDb","Removing database:",e),Bv(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!$e())return!1;if(e.C())return!0;var t=He(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/nwitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBIoAyEB-ueX84CnryYohalismP8d6SGyU",REACT_APP_APP_ID:"1:660071726496:web:65fe631ea675dbd48a38c5",REACT_APP_AUTH_DOMAIN:"nwitter-6a503.firebaseapp.com",REACT_APP_MESSAGING_SENDER_ID:"660071726496",REACT_APP_PROJECT_ID:"nwitter-6a503",REACT_APP_STORAGE_BUCKET:"nwitter-6a503.appspot.com"})||void 0===e?void 0:e.k)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Uv=function(){function e(t){xe(this,e),this.L=t,this.q=!1,this.U=null}return Ee(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return Bv(this.L.delete())}}]),e}(),Vv=function(e){Ce(n,e);var t=Re(n);function n(e,r){var i;return xe(this,n),(i=t.call(this,Zp.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return Ee(n)}(ev);function jv(e){return"IndexedDbTransactionError"===e.name}var zv=function(){function e(t){xe(this,e),this.store=t}return Ee(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Hp("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Hp("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Bv(n)}},{key:"add",value:function(e){return Hp("SimpleDb","ADD",this.store.name,e,e),Bv(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Bv(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Hp("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Hp("SimpleDb","DELETE",this.store.name,e),Bv(this.store.delete(e))}},{key:"count",value:function(){return Hp("SimpleDb","COUNT",this.store.name),Bv(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Lv((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Lv((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){Hp("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new Lv((function(n,r){t.onerror=function(e){var t=Gv(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new Lv((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Uv(i),o=t(i.primaryKey,i.value,a);if(o instanceof Lv){var u=o.catch((function(e){return a.done(),Lv.reject(e)}));n.push(u)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return Lv.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Bv(e){return new Lv((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Gv(e.target.error);n(t)}}))}var qv=!1;function Gv(e){var t=Fv.S(He());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new ev("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return qv||(qv=!0,setTimeout((function(){throw r}),0)),r}}return e}var Kv=function(){function e(t,n){xe(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return Ee(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;Hp("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Hp,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!jv(e.t4)){e.next=17;break}Hp("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Pv(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Hv=function(){function e(t,n){xe(this,e),this.localStore=t,this.persistence=n}return Ee(e,[{key:"nt",value:function(){var e=we(ge().mark((function e(){var t,n=this,r=arguments;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Lv.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Hp("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return Hp("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Cv(t);Nv(r,n)>0&&(n=r)})),new Av(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Wv=function(){function e(t,n){var r=this;xe(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return Ee(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function Qv(e){return null==e}function Yv(e){return 0===e&&1/e==-1/0}function Xv(e){return"number"==typeof e&&Number.isInteger(e)&&!Yv(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function $v(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Zv(t)),t=Jv(e.get(n),t);return Zv(t)}function Jv(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Zv(e){return e+"\x01\x01"}function em(e){var t=e.length;if($p(t>=2),2===t)return $p("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),gv.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Xp(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Xp()}a=o+2}return new gv(r)}Wv.ct=-1;var tm=["userId","batchId"];function nm(e,t){return[e,$v(t)]}function rm(e,t,n){return[e,$v(t),n]}var im={},am=["prefixPath","collectionGroup","readTime","documentId"],om=["prefixPath","collectionGroup","documentId"],um=["collectionGroup","readTime","prefixPath","documentId"],sm=["canonicalId","targetId"],cm=["targetId","path"],lm=["path","targetId"],fm=["collectionId","parent"],hm=["indexId","uid"],dm=["uid","sequenceNumber"],pm=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],vm=["indexId","uid","orderedDocumentKey"],mm=["userId","collectionPath","documentId"],ym=["userId","collectionPath","largestBatchId"],gm=["userId","collectionGroup","largestBatchId"],km=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),wm=[].concat(dt(km),["documentOverlays"]),bm=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_m=bm,xm=[].concat(_m,["indexConfiguration","indexState","indexEntries"]),Im=function(e){Ce(n,e);var t=Re(n);function n(e,r){var i;return xe(this,n),(i=t.call(this)).ht=e,i.currentSequenceNumber=r,i}return Ee(n)}(Ov);function Em(e,t){var n=Jp(e);return Fv.M(n.ht,t)}function Tm(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Sm(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Cm(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Am=function(){function e(t,n){xe(this,e),this.comparator=t,this.root=n||Rm.EMPTY}return Ee(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Rm.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Rm.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Nm(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Nm(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Nm(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Nm(this.root,e,this.comparator,!0)}}]),e}(),Nm=function(){function e(t,n,r,i){xe(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Ee(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Rm=function(){function e(t,n,r,i,a){xe(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Ee(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Xp();if(this.right.isRed())throw Xp();var e=this.left.check();if(e!==this.right.check())throw Xp();return e+(this.isRed()?0:1)}}]),e}();Rm.EMPTY=null,Rm.RED=!0,Rm.BLACK=!1,Rm.EMPTY=new(function(){function e(){xe(this,e),this.size=0}return Ee(e,[{key:"key",get:function(){throw Xp()}},{key:"value",get:function(){throw Xp()}},{key:"color",get:function(){throw Xp()}},{key:"left",get:function(){throw Xp()}},{key:"right",get:function(){throw Xp()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Rm(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Om=function(){function e(t){xe(this,e),this.comparator=t,this.data=new Am(this.comparator)}return Ee(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Pm(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Pm(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Pm=function(){function e(t){xe(this,e),this.iter=t}return Ee(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Dm(e){return e.hasNext()?e.getNext():void 0}var Lm=function(){function e(t){xe(this,e),this.fields=t,t.sort(wv.comparator)}return Ee(e,[{key:"unionWith",value:function(t){var n,r=new Om(wv.comparator),i=Te(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=Te(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=Te(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return dv(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Mm=function(e){Ce(n,e);var t=Re(n);function n(){var e;return xe(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return Ee(n)}(Pe(Error));var Fm=function(e){function t(e){xe(this,t),this.binaryString=e}return Ee(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return hv(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Mm("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Fm.EMPTY_BYTE_STRING=new Fm("");var Um=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vm(e){if($p(!!e),"string"==typeof e){var t=0,n=Um.exec(e);if($p(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:jm(e.seconds),nanos:jm(e.nanos)}}function jm(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function zm(e){return"string"==typeof e?Fm.fromBase64String(e):Fm.fromUint8Array(e)}function Bm(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function qm(e){var t=e.mapValue.fields.__previous_value__;return Bm(t)?qm(t):t}function Gm(e){var t=Vm(e.mapValue.fields.__local_write_time__.timestampValue);return new vv(t.seconds,t.nanos)}var Km=Ee((function e(t,n,r,i,a,o,u,s,c){xe(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=c})),Hm=function(){function e(t,n){xe(this,e),this.projectId=t,this.database=n||"(default)"}return Ee(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Wm={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Qm={nullValue:"NULL_VALUE"};function Ym(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Bm(e)?4:cy(e)?9007199254740991:10:Xp()}function Xm(e,t){if(e===t)return!0;var n=Ym(e);if(n!==Ym(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Gm(e).isEqual(Gm(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Vm(e.timestampValue),r=Vm(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return zm(e.bytesValue).isEqual(zm(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return jm(e.geoPointValue.latitude)===jm(t.geoPointValue.latitude)&&jm(e.geoPointValue.longitude)===jm(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return jm(e.integerValue)===jm(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=jm(e.doubleValue),r=jm(t.doubleValue);return n===r?Yv(n)===Yv(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return dv(e.arrayValue.values||[],t.arrayValue.values||[],Xm);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Tm(n)!==Tm(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Xm(n[i],r[i])))return!1;return!0}(e,t);default:return Xp()}}function $m(e,t){return void 0!==(e.values||[]).find((function(e){return Xm(e,t)}))}function Jm(e,t){if(e===t)return 0;var n=Ym(e),r=Ym(t);if(n!==r)return hv(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return hv(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=jm(e.integerValue||e.doubleValue),r=jm(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Zm(e.timestampValue,t.timestampValue);case 4:return Zm(Gm(e),Gm(t));case 5:return hv(e.stringValue,t.stringValue);case 6:return function(e,t){var n=zm(e),r=zm(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=hv(n[i],r[i]);if(0!==a)return a}return hv(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=hv(jm(e.latitude),jm(t.latitude));return 0!==n?n:hv(jm(e.longitude),jm(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Jm(n[i],r[i]);if(a)return a}return hv(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Wm.mapValue&&t===Wm.mapValue)return 0;if(e===Wm.mapValue)return 1;if(t===Wm.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=hv(r[o],a[o]);if(0!==u)return u;var s=Jm(n[r[o]],i[a[o]]);if(0!==s)return s}return hv(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Xp()}}function Zm(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return hv(e,t);var n=Vm(e),r=Vm(t),i=hv(n.seconds,r.seconds);return 0!==i?i:hv(n.nanos,r.nanos)}function ey(e){return ty(e)}function ty(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Vm(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?zm(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,bv.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Te(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=ty(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Te(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(ty(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Xp();var t,n}function ny(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ry(e){return!!e&&"integerValue"in e}function iy(e){return!!e&&"arrayValue"in e}function ay(e){return!!e&&"nullValue"in e}function oy(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function uy(e){return!!e&&"mapValue"in e}function sy(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Sm(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=sy(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=sy(e.arrayValue.values[r]);return n}return Object.assign({},e)}function cy(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function ly(e){return"nullValue"in e?Qm:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?ny(Hm.empty(),bv.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Xp()}function fy(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?ny(Hm.empty(),bv.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Wm:Xp()}function hy(e,t){var n=Jm(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function dy(e,t){var n=Jm(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var py=function(){function e(t){xe(this,e),this.value=t}return Ee(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!uy(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sy(t)}},{key:"setAll",value:function(e){var t=this,n=wv.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=sy(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());uy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Xm(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];uy(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Sm(t,(function(t,n){return e[t]=n}));var r,i=Te(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(sy(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function vy(e){var t=[];return Sm(e.fields,(function(e,n){var r=new wv([e]);if(uy(n)){var i=vy(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Te(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Lm(t)}var my=function(){function e(t,n,r,i,a,o,u){xe(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return Ee(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(mv.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=py.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=py.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=mv.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,mv.min(),mv.min(),mv.min(),py.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,mv.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,mv.min(),mv.min(),py.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,mv.min(),mv.min(),py.empty(),2)}}]),e}(),yy=Ee((function e(t,n){xe(this,e),this.position=t,this.inclusive=n}));function gy(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?bv.comparator(bv.fromName(o.referenceValue),n.key):Jm(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function ky(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Xm(e.position[n],t.position[n]))return!1;return!0}var wy=Ee((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";xe(this,e),this.field=t,this.dir=n}));function by(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var _y=Ee((function e(){xe(this,e)})),xy=function(e){Ce(n,e);var t=Re(n);function n(e,r,i){var a;return xe(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Ee(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Jm(t,this.value)):null!==t&&Ym(this.value)===Ym(t)&&this.matchesComparison(Jm(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xp()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Py(e,t,r):"array-contains"===t?new Fy(e,r):"in"===t?new Uy(e,r):"not-in"===t?new Vy(e,r):"array-contains-any"===t?new jy(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Dy(e,n):new Ly(e,n)}}]),n}(_y),Iy=function(e){Ce(n,e);var t=Re(n);function n(e,r){var i;return xe(this,n),(i=t.call(this)).filters=e,i.op=r,i.lt=null,i}return Ee(n,[{key:"matches",value:function(e){return Ey(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.lt||(this.lt=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.lt}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.ft((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"ft",value:function(e){var t,n=Te(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(_y);function Ey(e){return"and"===e.op}function Ty(e){return"or"===e.op}function Sy(e){return Cy(e)&&Ey(e)}function Cy(e){var t,n=Te(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Iy)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Ay(e){if(e instanceof xy)return e.field.canonicalString()+e.op.toString()+ey(e.value);if(Sy(e))return e.filters.map((function(e){return Ay(e)})).join(",");var t=e.filters.map((function(e){return Ay(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Ny(e,t){return e instanceof xy?function(e,t){return t instanceof xy&&e.op===t.op&&e.field.isEqual(t.field)&&Xm(e.value,t.value)}(e,t):e instanceof Iy?function(e,t){return t instanceof Iy&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Ny(n,t.filters[r])}),!0)}(e,t):void Xp()}function Ry(e,t){var n=e.filters.concat(t);return Iy.create(n,e.op)}function Oy(e){return e instanceof xy?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(ey(e.value))}(e):e instanceof Iy?function(e){return e.op.toString()+" {"+e.getFilters().map(Oy).join(" ,")+"}"}(e):"Filter"}var Py=function(e){Ce(n,e);var t=Re(n);function n(e,r,i){var a;return xe(this,n),(a=t.call(this,e,r,i)).key=bv.fromName(i.referenceValue),a}return Ee(n,[{key:"matches",value:function(e){var t=bv.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(xy),Dy=function(e){Ce(n,e);var t=Re(n);function n(e,r){var i;return xe(this,n),(i=t.call(this,e,"in",r)).keys=My("in",r),i}return Ee(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(xy),Ly=function(e){Ce(n,e);var t=Re(n);function n(e,r){var i;return xe(this,n),(i=t.call(this,e,"not-in",r)).keys=My("not-in",r),i}return Ee(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(xy);function My(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return bv.fromName(e.referenceValue)}))}var Fy=function(e){Ce(n,e);var t=Re(n);function n(e,r){return xe(this,n),t.call(this,e,"array-contains",r)}return Ee(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return iy(t)&&$m(t.arrayValue,this.value)}}]),n}(xy),Uy=function(e){Ce(n,e);var t=Re(n);function n(e,r){return xe(this,n),t.call(this,e,"in",r)}return Ee(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&$m(this.value.arrayValue,t)}}]),n}(xy),Vy=function(e){Ce(n,e);var t=Re(n);function n(e,r){return xe(this,n),t.call(this,e,"not-in",r)}return Ee(n,[{key:"matches",value:function(e){if($m(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!$m(this.value.arrayValue,t)}}]),n}(xy),jy=function(e){Ce(n,e);var t=Re(n);function n(e,r){return xe(this,n),t.call(this,e,"array-contains-any",r)}return Ee(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!iy(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return $m(t.value.arrayValue,e)}))}}]),n}(xy),zy=Ee((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;xe(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.dt=null}));function By(e){return new zy(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function qy(e){var t=Jp(e);if(null===t.dt){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Ay(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Qv(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return ey(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return ey(e)})).join(",")),t.dt=n}return t.dt}function Gy(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!by(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Ny(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ky(e.startAt,t.startAt)&&ky(e.endAt,t.endAt)}function Ky(e){return bv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Hy(e,t){return e.filters.filter((function(e){return e instanceof xy&&e.field.isEqual(t)}))}function Wy(e,t,n){var r,i=Qm,a=!0,o=Te(Hy(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Qm,c=!0;switch(u.op){case"<":case"<=":s=ly(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Qm}hy({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];hy({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Qy(e,t,n){var r,i=Wm,a=!0,o=Te(Hy(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Wm,c=!0;switch(u.op){case">=":case">":s=fy(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Wm}dy({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];dy({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Yy=Ee((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;xe(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.wt=null,this._t=null,this.startAt,this.endAt}));function Xy(e,t,n,r,i,a,o,u){return new Yy(e,t,n,r,i,a,o,u)}function $y(e){return new Yy(e)}function Jy(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Zy(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function eg(e){var t,n=Te(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function tg(e){return null!==e.collectionGroup}function ng(e){var t=Jp(e);if(null===t.wt){t.wt=[];var n=eg(t),r=Zy(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new wy(n)),t.wt.push(new wy(wv.keyField(),"asc"));else{var i,a=!1,o=Te(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.wt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new wy(wv.keyField(),s))}}}return t.wt}function rg(e){var t=Jp(e);if(!t._t)if("F"===t.limitType)t._t=By(t.path,t.collectionGroup,ng(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Te(ng(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new wy(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new yy(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new yy(t.startAt.position,t.startAt.inclusive):null;t._t=By(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t._t}function ig(e,t){t.getFirstInequalityField(),eg(e);var n=e.filters.concat([t]);return new Yy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ag(e,t,n){return new Yy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function og(e,t){return Gy(rg(e),rg(t))&&e.limitType===t.limitType}function ug(e){return"".concat(qy(rg(e)),"|lt:").concat(e.limitType)}function sg(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Oy(e)})).join(", "),"]")),Qv(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return ey(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return ey(e)})).join(",")),"Target(".concat(t,")")}(rg(e)),"; limitType=").concat(e.limitType,")")}function cg(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):bv.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Te(ng(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Te(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=gy(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,ng(e),t))&&!(e.endAt&&!function(e,t,n){var r=gy(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,ng(e),t))}(e,t)}function lg(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function fg(e){return function(t,n){var r,i=!1,a=Te(ng(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=hg(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function hg(e,t,n){var r=e.field.isKeyField()?bv.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Jm(r,i):Xp()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Xp()}}var dg=function(){function e(t,n){xe(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Ee(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Te(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Sm(this.inner,(function(t,n){var r,i=Te(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Cm(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),pg=new Am(bv.comparator);function vg(){return pg}var mg=new Am(bv.comparator);function yg(){for(var e=mg,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function gg(e){var t=mg;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function kg(){return bg()}function wg(){return bg()}function bg(){return new dg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var _g=new Am(bv.comparator),xg=new Om(bv.comparator);function Ig(){for(var e=xg,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Eg=new Om(hv);function Tg(){return Eg}function Sg(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yv(t)?"-0":t}}function Cg(e){return{integerValue:""+e}}function Ag(e,t){return Xv(t)?Cg(t):Sg(e,t)}var Ng=Ee((function e(){xe(this,e),this._=void 0}));function Rg(e,t,n){return e instanceof Dg?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Bm(t)&&(t=qm(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Lg?Mg(e,t):e instanceof Fg?Ug(e,t):function(e,t){var n=Pg(e,t),r=jg(n)+jg(e.gt);return ry(n)&&ry(e.gt)?Cg(r):Sg(e.serializer,r)}(e,t)}function Og(e,t,n){return e instanceof Lg?Mg(e,t):e instanceof Fg?Ug(e,t):n}function Pg(e,t){return e instanceof Vg?ry(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Dg=function(e){Ce(n,e);var t=Re(n);function n(){return xe(this,n),t.apply(this,arguments)}return Ee(n)}(Ng),Lg=function(e){Ce(n,e);var t=Re(n);function n(e){var r;return xe(this,n),(r=t.call(this)).elements=e,r}return Ee(n)}(Ng);function Mg(e,t){var n,r=zg(t),i=Te(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Xm(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Fg=function(e){Ce(n,e);var t=Re(n);function n(e){var r;return xe(this,n),(r=t.call(this)).elements=e,r}return Ee(n)}(Ng);function Ug(e,t){var n,r=zg(t),i=Te(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Xm(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Vg=function(e){Ce(n,e);var t=Re(n);function n(e,r){var i;return xe(this,n),(i=t.call(this)).serializer=e,i.gt=r,i}return Ee(n)}(Ng);function jg(e){return jm(e.integerValue||e.doubleValue)}function zg(e){return iy(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Bg=Ee((function e(t,n){xe(this,e),this.field=t,this.transform=n}));var qg=Ee((function e(t,n){xe(this,e),this.version=t,this.transformResults=n})),Gg=function(){function e(t,n){xe(this,e),this.updateTime=t,this.exists=n}return Ee(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Kg(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Hg=Ee((function e(){xe(this,e)}));function Wg(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ak(e.key,Gg.none()):new Jg(e.key,e.data,Gg.none());var n,r=e.data,i=py.empty(),a=new Om(wv.comparator),o=Te(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new Zg(e.key,i,new Lm(a.toArray()),Gg.none())}function Qg(e,t,n){e instanceof Jg?function(e,t,n){var r=e.value.clone(),i=tk(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Zg?function(e,t,n){if(Kg(e.precondition,t)){var r=tk(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ek(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Yg(e,t,n,r){return e instanceof Jg?function(e,t,n,r){if(!Kg(e.precondition,t))return n;var i=e.value.clone(),a=nk(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Zg?function(e,t,n,r){if(!Kg(e.precondition,t))return n;var i=nk(e.fieldTransforms,r,t),a=t.data;return a.setAll(ek(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Kg(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Xg(e,t){var n,r=null,i=Te(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Pg(a.transform,o||null);null!=u&&(null===r&&(r=py.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function $g(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&dv(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Lg&&t instanceof Lg||e instanceof Fg&&t instanceof Fg?dv(e.elements,t.elements,Xm):e instanceof Vg&&t instanceof Vg?Xm(e.gt,t.gt):e instanceof Dg&&t instanceof Dg}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Jg=function(e){Ce(n,e);var t=Re(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return xe(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Ee(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Hg),Zg=function(e){Ce(n,e);var t=Re(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return xe(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Ee(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Hg);function ek(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function tk(e,t,n){var r=new Map;$p(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Og(o,u,n[i]))}return r}function nk(e,t,n){var r,i=new Map,a=Te(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Rg(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var rk,ik,ak=function(e){Ce(n,e);var t=Re(n);function n(e,r){var i;return xe(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Ee(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Hg),ok=function(e){Ce(n,e);var t=Re(n);function n(e,r){var i;return xe(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Ee(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Hg),uk=function(){function e(t,n,r,i){xe(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Ee(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Qg(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=Te(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Yg(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=Te(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Yg(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=wg();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Wg(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(mv.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Ig())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&dv(this.mutations,e.mutations,(function(e,t){return $g(e,t)}))&&dv(this.baseMutations,e.baseMutations,(function(e,t){return $g(e,t)}))}}]),e}(),sk=function(){function e(t,n,r,i){xe(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Ee(e,null,[{key:"from",value:function(t,n,r){$p(t.mutations.length===r.length);for(var i=_g,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),ck=function(){function e(t,n){xe(this,e),this.largestBatchId=t,this.mutation=n}return Ee(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),lk=Ee((function e(t,n){xe(this,e),this.count=t,this.unchangedNames=n}));function fk(e){switch(e){default:return Xp();case Zp.CANCELLED:case Zp.UNKNOWN:case Zp.DEADLINE_EXCEEDED:case Zp.RESOURCE_EXHAUSTED:case Zp.INTERNAL:case Zp.UNAVAILABLE:case Zp.UNAUTHENTICATED:return!1;case Zp.INVALID_ARGUMENT:case Zp.NOT_FOUND:case Zp.ALREADY_EXISTS:case Zp.PERMISSION_DENIED:case Zp.FAILED_PRECONDITION:case Zp.ABORTED:case Zp.OUT_OF_RANGE:case Zp.UNIMPLEMENTED:case Zp.DATA_LOSS:return!0}}function hk(e){if(void 0===e)return Wp("GRPC error has no .code"),Zp.UNKNOWN;switch(e){case rk.OK:return Zp.OK;case rk.CANCELLED:return Zp.CANCELLED;case rk.UNKNOWN:return Zp.UNKNOWN;case rk.DEADLINE_EXCEEDED:return Zp.DEADLINE_EXCEEDED;case rk.RESOURCE_EXHAUSTED:return Zp.RESOURCE_EXHAUSTED;case rk.INTERNAL:return Zp.INTERNAL;case rk.UNAVAILABLE:return Zp.UNAVAILABLE;case rk.UNAUTHENTICATED:return Zp.UNAUTHENTICATED;case rk.INVALID_ARGUMENT:return Zp.INVALID_ARGUMENT;case rk.NOT_FOUND:return Zp.NOT_FOUND;case rk.ALREADY_EXISTS:return Zp.ALREADY_EXISTS;case rk.PERMISSION_DENIED:return Zp.PERMISSION_DENIED;case rk.FAILED_PRECONDITION:return Zp.FAILED_PRECONDITION;case rk.ABORTED:return Zp.ABORTED;case rk.OUT_OF_RANGE:return Zp.OUT_OF_RANGE;case rk.UNIMPLEMENTED:return Zp.UNIMPLEMENTED;case rk.DATA_LOSS:return Zp.DATA_LOSS;default:return Xp()}}(ik=rk||(rk={}))[ik.OK=0]="OK",ik[ik.CANCELLED=1]="CANCELLED",ik[ik.UNKNOWN=2]="UNKNOWN",ik[ik.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ik[ik.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ik[ik.NOT_FOUND=5]="NOT_FOUND",ik[ik.ALREADY_EXISTS=6]="ALREADY_EXISTS",ik[ik.PERMISSION_DENIED=7]="PERMISSION_DENIED",ik[ik.UNAUTHENTICATED=16]="UNAUTHENTICATED",ik[ik.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ik[ik.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ik[ik.ABORTED=10]="ABORTED",ik[ik.OUT_OF_RANGE=11]="OUT_OF_RANGE",ik[ik.UNIMPLEMENTED=12]="UNIMPLEMENTED",ik[ik.INTERNAL=13]="INTERNAL",ik[ik.UNAVAILABLE=14]="UNAVAILABLE",ik[ik.DATA_LOSS=15]="DATA_LOSS";var dk=function(){function e(){xe(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return Ee(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return pk}},{key:"getOrCreateInstance",value:function(){return null===pk&&(pk=new e),pk}}]),e}(),pk=null;function vk(){return new TextEncoder}var mk=new jp([4294967295,4294967295],0);function yk(e){var t=vk().encode(e),n=new Vp;return n.update(t),new Uint8Array(n.digest())}function gk(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new jp([n,r],0),new jp([i,a],0)]}var kk=function(){function e(t,n,r){if(xe(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new wk("Invalid padding: ".concat(n));if(r<0)throw new wk("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new wk("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new wk("Invalid padding when bitmap length is 0: ".concat(n));this.It=8*t.length-n,this.Tt=jp.fromNumber(this.It)}return Ee(e,[{key:"Et",value:function(e,t,n){var r=e.add(t.multiply(jp.fromNumber(n)));return 1===r.compare(mk)&&(r=new jp([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}},{key:"At",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"vt",value:function(e){if(0===this.It)return!1;for(var t=s(gk(yk(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);if(!this.At(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.It)for(var t=s(gk(yk(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);this.Rt(a)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),wk=function(e){Ce(n,e);var t=Re(n);function n(){var e;return xe(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return Ee(n)}(Pe(Error)),bk=function(){function e(t,n,r,i,a){xe(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Ee(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,_k.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(mv.min(),i,new Am(hv),vg(),Ig())}}]),e}(),_k=function(){function e(t,n,r,i,a){xe(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Ee(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Ig(),Ig(),Ig())}}]),e}(),xk=Ee((function e(t,n,r,i){xe(this,e),this.Pt=t,this.removedTargetIds=n,this.key=r,this.bt=i})),Ik=Ee((function e(t,n){xe(this,e),this.targetId=t,this.Vt=n})),Ek=Ee((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fm.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;xe(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Tk=function(){function e(){xe(this,e),this.St=0,this.Dt=Ak(),this.Ct=Fm.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}return Ee(e,[{key:"current",get:function(){return this.xt}},{key:"resumeToken",get:function(){return this.Ct}},{key:"kt",get:function(){return 0!==this.St}},{key:"Mt",get:function(){return this.Nt}},{key:"$t",value:function(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}},{key:"Ot",value:function(){var e=Ig(),t=Ig(),n=Ig();return this.Dt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Xp()}})),new _k(this.Ct,this.xt,e,t,n)}},{key:"Ft",value:function(){this.Nt=!1,this.Dt=Ak()}},{key:"Bt",value:function(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}},{key:"Lt",value:function(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}},{key:"qt",value:function(){this.St+=1}},{key:"Ut",value:function(){this.St-=1}},{key:"Kt",value:function(){this.Nt=!0,this.xt=!0}}]),e}(),Sk=function(){function e(t){xe(this,e),this.Gt=t,this.Qt=new Map,this.jt=vg(),this.zt=Ck(),this.Wt=new Am(hv)}return Ee(e,[{key:"Ht",value:function(e){var t,n=Te(e.Pt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.bt&&e.bt.isFoundDocument()?this.Jt(r,e.bt):this.Yt(r,e.key,e.bt)}}catch(u){n.e(u)}finally{n.f()}var i,a=Te(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Yt(o,e.key,e.bt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Xt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Zt(n);switch(e.state){case 0:t.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||t.removeTarget(n);break;case 3:t.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:t.te(n)&&(t.ee(n),r.$t(e.resumeToken));break;default:Xp()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((function(e,r){n.te(r)&&t(r)}))}},{key:"ne",value:function(e){var t,n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){var a=i.target;if(Ky(a))if(0===r){var o=new bv(a.path);this.Yt(n,o,my.newNoDocument(o,mv.min()))}else $p(1===r);else{var u=this.ie(n);if(u!==r){var s=this.re(e,u);if(0!==s){this.ee(n);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,c)}null===(t=dk.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,o,u,s,c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(a=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(s=null===(u=null==l?void 0:l.bits)||void 0===u?void 0:u.padding)&&void 0!==s?s:0}),c}(s,u,e.Vt))}}}}},{key:"re",value:function(e,t){var n=e.Vt,r=n.unchangedNames,i=n.count;if(!r||!r.bits)return 1;var a,o,u=r.bits,s=u.bitmap,c=void 0===s?"":s,l=u.padding,f=void 0===l?0:l,h=r.hashCount,d=void 0===h?0:h;try{a=zm(c).toUint8Array()}catch(e){if(e instanceof Mm)return Qp("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new kk(a,f,d)}catch(e){return Qp(e instanceof wk?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.It?1:i!==t-this.oe(e.targetId,o)?2:0}},{key:"oe",value:function(e,t){var n=this,r=this.Gt.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){var a=n.Gt.ue(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());t.vt(o)||(n.Yt(e,r,null),i++)})),i}},{key:"ce",value:function(e){var t=this,n=new Map;this.Qt.forEach((function(r,i){var a=t.se(i);if(a){if(r.current&&Ky(a.target)){var o=new bv(a.target.path);null!==t.jt.get(o)||t.ae(i,o)||t.Yt(i,o,my.newNoDocument(o,e))}r.Mt&&(n.set(i,r.Ot()),r.Ft())}}));var r=Ig();this.zt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.se(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.jt.forEach((function(t,n){return n.setReadTime(e)}));var i=new bk(e,n,this.Wt,this.jt,r);return this.jt=vg(),this.zt=Ck(),this.Wt=new Am(hv),i}},{key:"Jt",value:function(e,t){if(this.te(e)){var n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}}},{key:"Yt",value:function(e,t,n){if(this.te(e)){var r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qt.delete(e)}},{key:"ie",value:function(e){var t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"qt",value:function(e){this.Zt(e).qt()}},{key:"Zt",value:function(e){var t=this.Qt.get(e);return t||(t=new Tk,this.Qt.set(e,t)),t}},{key:"he",value:function(e){var t=this.zt.get(e);return t||(t=new Om(hv),this.zt=this.zt.insert(e,t)),t}},{key:"te",value:function(e){var t=null!==this.se(e);return t||Hp("WatchChangeAggregator","Detected inactive target",e),t}},{key:"se",value:function(e){var t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}},{key:"ee",value:function(e){var t=this;this.Qt.set(e,new Tk),this.Gt.getRemoteKeysForTarget(e).forEach((function(n){t.Yt(e,n,null)}))}},{key:"ae",value:function(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Ck(){return new Am(bv.comparator)}function Ak(){return new Am(bv.comparator)}var Nk={asc:"ASCENDING",desc:"DESCENDING"},Rk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ok={and:"AND",or:"OR"},Pk=Ee((function e(t,n){xe(this,e),this.databaseId=t,this.useProto3Json=n}));function Dk(e,t){return e.useProto3Json||Qv(t)?t:{value:t}}function Lk(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Mk(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Fk(e,t){return Lk(e,t.toTimestamp())}function Uk(e){return $p(!!e),mv.fromTimestamp(function(e){var t=Vm(e);return new vv(t.seconds,t.nanos)}(e))}function Vk(e,t){return function(e){return new gv(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function jk(e){var t=gv.fromString(e);return $p(cw(t)),t}function zk(e,t){return Vk(e.databaseId,t.path)}function Bk(e,t){var n=jk(t);if(n.get(1)!==e.databaseId.projectId)throw new ev(Zp.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ev(Zp.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new bv(Hk(n))}function qk(e,t){return Vk(e.databaseId,t)}function Gk(e){var t=jk(e);return 4===t.length?gv.emptyPath():Hk(t)}function Kk(e){return new gv(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Hk(e){return $p(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Wk(e,t,n){return{name:zk(e,t),fields:n.value.mapValue.fields}}function Qk(e,t,n){var r=Bk(e,t.name),i=Uk(t.updateTime),a=t.createTime?Uk(t.createTime):mv.min(),o=new py({mapValue:{fields:t.fields}}),u=my.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function Yk(e,t){return"found"in t?function(e,t){$p(!!t.found),t.found.name,t.found.updateTime;var n=Bk(e,t.found.name),r=Uk(t.found.updateTime),i=t.found.createTime?Uk(t.found.createTime):mv.min(),a=new py({mapValue:{fields:t.found.fields}});return my.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){$p(!!t.missing),$p(!!t.readTime);var n=Bk(e,t.missing),r=Uk(t.readTime);return my.newNoDocument(n,r)}(e,t):Xp()}function Xk(e,t){var n;if(t instanceof Jg)n={update:Wk(e,t.key,t.value)};else if(t instanceof ak)n={delete:zk(e,t.key)};else if(t instanceof Zg)n={update:Wk(e,t.key,t.data),updateMask:sw(t.fieldMask)};else{if(!(t instanceof ok))return Xp();n={verify:zk(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Dg)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Lg)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Fg)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Vg)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Xp()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Fk(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Xp()}(e,t.precondition)),n}function $k(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Gg.updateTime(Uk(e.updateTime)):void 0!==e.exists?Gg.exists(e.exists):Gg.none()}(t.currentDocument):Gg.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)$p("REQUEST_TIME"===t.setToServerValue),n=new Dg;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Lg(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Fg(i)}else"increment"in t?n=new Vg(e,t.increment):Xp();var a=wv.fromServerFormat(t.fieldPath);return new Bg(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Bk(e,t.update.name),a=new py({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Lm(t.map((function(e){return wv.fromServerFormat(e)})))}(t.updateMask);return new Zg(i,a,o,n,r)}return new Jg(i,a,n,r)}if(t.delete){var u=Bk(e,t.delete);return new ak(u,n)}if(t.verify){var s=Bk(e,t.verify);return new ok(s,n)}return Xp()}function Jk(e,t){return{documents:[qk(e,t.path)]}}function Zk(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=qk(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=qk(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return uw(Iy.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:aw(e.field),direction:nw(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=Dk(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function ew(e){var t=Gk(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){$p(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=tw(e);return t instanceof Iy&&Sy(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new wy(ow(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Qv(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new yy(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new yy(n,t)}(n.endAt)),Xy(t,i,u,o,s,"F",c,l)}function tw(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=ow(e.unaryFilter.field);return xy.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=ow(e.unaryFilter.field);return xy.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ow(e.unaryFilter.field);return xy.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ow(e.unaryFilter.field);return xy.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Xp()}}(e):void 0!==e.fieldFilter?function(e){return xy.create(ow(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xp()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Iy.create(e.compositeFilter.filters.map((function(e){return tw(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Xp()}}(e.compositeFilter.op))}(e):Xp()}function nw(e){return Nk[e]}function rw(e){return Rk[e]}function iw(e){return Ok[e]}function aw(e){return{fieldPath:e.canonicalString()}}function ow(e){return wv.fromServerFormat(e.fieldPath)}function uw(e){return e instanceof xy?function(e){if("=="===e.op){if(oy(e.value))return{unaryFilter:{field:aw(e.field),op:"IS_NAN"}};if(ay(e.value))return{unaryFilter:{field:aw(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(oy(e.value))return{unaryFilter:{field:aw(e.field),op:"IS_NOT_NAN"}};if(ay(e.value))return{unaryFilter:{field:aw(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:aw(e.field),op:rw(e.op),value:e.value}}}(e):e instanceof Iy?function(e){var t=e.getFilters().map((function(e){return uw(e)}));return 1===t.length?t[0]:{compositeFilter:{op:iw(e.op),filters:t}}}(e):Xp()}function sw(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function cw(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var lw=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:mv.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:mv.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Fm.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;xe(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return Ee(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),fw=Ee((function e(t){xe(this,e),this.fe=t}));function hw(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:dw(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:zk(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Lk(e,t.version.toTimestamp()),createTime:Lk(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:pw(t.version)};else{if(!t.isUnknownDocument())return Xp();r.unknownDocument={path:n.path.toArray(),version:pw(t.version)}}return r}function dw(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function pw(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function vw(e){var t=new vv(e.seconds,e.nanoseconds);return mv.fromTimestamp(t)}function mw(e,t){for(var n=(t.baseMutations||[]).map((function(t){return $k(e.fe,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return $k(e.fe,t)})),u=vv.fromMillis(t.localWriteTimeMs);return new uk(t.batchId,u,n,o)}function yw(e){var t,n,r=vw(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?vw(e.lastLimboFreeSnapshotVersion):mv.min();return void 0!==e.query.documents?($p(1===(n=e.query).documents.length),t=rg($y(Gk(n.documents[0])))):t=function(e){return rg(ew(e))}(e.query),new lw(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,i,Fm.fromBase64String(e.resumeToken))}function gw(e,t){var n,r=pw(t.snapshotVersion),i=pw(t.lastLimboFreeSnapshotVersion);n=Ky(t.target)?Jk(e.fe,t.target):Zk(e.fe,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:qy(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function kw(e){var t=ew({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ag(t,t.limit,"L"):t}function ww(e,t){return new ck(t.largestBatchId,$k(e.fe,t.overlayMutation))}function bw(e,t){var n=t.path.lastSegment();return[e,$v(t.path.popLast()),n]}function _w(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:pw(r.readTime),documentKey:$v(r.documentKey.path),largestBatchId:r.largestBatchId}}var xw=function(){function e(){xe(this,e)}return Ee(e,[{key:"getBundleMetadata",value:function(e,t){return Iw(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:vw(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Iw(e).put({bundleId:(n=t).id,createTime:pw(Uk(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Ew(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:kw(t.bundledQuery),readTime:vw(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Ew(e).put(function(e){return{name:e.name,readTime:pw(Uk(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Iw(e){return Em(e,"bundles")}function Ew(e){return Em(e,"namedQueries")}var Tw=function(){function e(t,n){xe(this,e),this.serializer=t,this.userId=n}return Ee(e,[{key:"getOverlay",value:function(e,t){var n=this;return Sw(e).get(bw(this.userId,t)).next((function(e){return e?ww(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=kg();return Lv.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new ck(t,a);i.push(r.we(e,o))})),Lv.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add($v(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Sw(e).J("collectionPathOverlayIndex",i))})),Lv.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=kg(),a=$v(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Sw(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=Te(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=ww(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=kg(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Sw(e).X({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=ww(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"we",value:function(e,t){return Sw(e).put(function(e,t,n){var r=s(bw(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Xk(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"de",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Sw(e){return Em(e,"documentOverlays")}var Cw=function(){function e(){xe(this,e)}return Ee(e,[{key:"_e",value:function(e,t){this.me(e,t),t.ge()}},{key:"me",value:function(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(jm(e.integerValue));else if("doubleValue"in e){var n=jm(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),Yv(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie("".concat(r.seconds||"")),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(zm(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?cy(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Xp()}},{key:"Te",value:function(e,t){this.ye(t,25),this.be(e,t)}},{key:"be",value:function(e,t){t.Ie(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ye(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Te(a,t),this.me(n[a],t)}}},{key:"Pe",value:function(e,t){var n=e.values||[];this.ye(t,50);var r,i=Te(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.me(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ve",value:function(e,t){var n=this;this.ye(t,37),bv.fromName(e).path.forEach((function(e){n.ye(t,60),n.be(e,t)}))}},{key:"ye",value:function(e,t){e.pe(t)}},{key:"Ee",value:function(e){e.pe(2)}}]),e}();function Aw(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Nw(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Aw(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Cw.Ve=new Cw;var Rw=function(){function e(){xe(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Ee(e,[{key:"Se",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.De(n.value),n=t.next();this.Ce()}},{key:"xe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ne(n.value),n=t.next();this.ke()}},{key:"Me",value:function(e){var t,n=Te(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{var a=r.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ce()}},{key:"$e",value:function(e){var t,n=Te(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{var a=r.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ke()}},{key:"Oe",value:function(e){var t=this.Fe(e),n=Nw(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Le",value:function(e){var t=this.Fe(e),n=Nw(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"qe",value:function(){this.Ue(255),this.Ue(255)}},{key:"Ke",value:function(){this.Ge(255),this.Ge(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Qe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Fe",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"De",value:function(e){var t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}},{key:"Ne",value:function(e){var t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}},{key:"Ce",value:function(){this.Ue(0),this.Ue(1)}},{key:"ke",value:function(){this.Ge(0),this.Ge(1)}},{key:"Ue",value:function(e){this.Be(1),this.buffer[this.position++]=e}},{key:"Ge",value:function(e){this.Be(1),this.buffer[this.position++]=~e}},{key:"Be",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Ow=function(){function e(t){xe(this,e),this.je=t}return Ee(e,[{key:"Ae",value:function(e){this.je.Se(e)}},{key:"Ie",value:function(e){this.je.Me(e)}},{key:"pe",value:function(e){this.je.Oe(e)}},{key:"ge",value:function(){this.je.qe()}}]),e}(),Pw=function(){function e(t){xe(this,e),this.je=t}return Ee(e,[{key:"Ae",value:function(e){this.je.xe(e)}},{key:"Ie",value:function(e){this.je.$e(e)}},{key:"pe",value:function(e){this.je.Le(e)}},{key:"ge",value:function(){this.je.Ke()}}]),e}(),Dw=function(){function e(){xe(this,e),this.je=new Rw,this.ze=new Ow(this.je),this.We=new Pw(this.je)}return Ee(e,[{key:"seed",value:function(e){this.je.seed(e)}},{key:"He",value:function(e){return 0===e?this.ze:this.We}},{key:"Qe",value:function(){return this.je.Qe()}},{key:"reset",value:function(){this.je.reset()}}]),e}(),Lw=function(){function e(t,n,r,i){xe(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return Ee(e,[{key:"Je",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Mw(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Fw(e.arrayValue,t.arrayValue))?n:0!==(n=Fw(e.directionalValue,t.directionalValue))?n:bv.comparator(e.documentKey,t.documentKey)}function Fw(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Uw=function(){function e(t){xe(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];var n,r=Te(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Ze=i:this.Xe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return Ee(e,[{key:"tn",value:function(e){$p(e.collectionGroup===this.collectionId);var t=xv(e);if(void 0!==t&&!this.en(t))return!1;for(var n=Iv(e),r=new Set,i=0,a=0;i<n.length&&this.en(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){var o=n[i];if(!this.nn(this.Ze,o)||!this.sn(this.Ye[a++],o))return!1}++i}for(;i<n.length;++i){var u=n[i];if(a>=this.Ye.length||!this.sn(this.Ye[a++],u))return!1}return!0}},{key:"en",value:function(e){var t,n=Te(this.Xe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.nn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"sn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function Vw(e){var t,n;if($p(e instanceof xy||e instanceof Iy),e instanceof xy){if(e instanceof Uy){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return xy.create(e.field,"==",t)})))||[];return Iy.create(r,"or")}return e}var i=e.filters.map((function(e){return Vw(e)}));return Iy.create(i,e.op)}function jw(e){if(0===e.getFilters().length)return[];var t=Gw(Vw(e));return $p(qw(t)),zw(t)||Bw(t)?[t]:t.getFilters()}function zw(e){return e instanceof xy}function Bw(e){return e instanceof Iy&&Sy(e)}function qw(e){return zw(e)||Bw(e)||function(e){if(e instanceof Iy&&Ty(e)){var t,n=Te(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!zw(r)&&!Bw(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function Gw(e){if($p(e instanceof xy||e instanceof Iy),e instanceof xy)return e;if(1===e.filters.length)return Gw(e.filters[0]);var t=e.filters.map((function(e){return Gw(e)})),n=Iy.create(t,e.op);return qw(n=Ww(n))?n:($p(n instanceof Iy),$p(Ey(n)),$p(n.filters.length>1),n.filters.reduce((function(e,t){return Kw(e,t)})))}function Kw(e,t){var n;return $p(e instanceof xy||e instanceof Iy),$p(t instanceof xy||t instanceof Iy),n=e instanceof xy?t instanceof xy?function(e,t){return Iy.create([e,t],"and")}(e,t):Hw(e,t):t instanceof xy?Hw(t,e):function(e,t){if($p(e.filters.length>0&&t.filters.length>0),Ey(e)&&Ey(t))return Ry(e,t.getFilters());var n=Ty(e)?e:t,r=Ty(e)?t:e,i=n.filters.map((function(e){return Kw(e,r)}));return Iy.create(i,"or")}(e,t),Ww(n)}function Hw(e,t){if(Ey(t))return Ry(t,e.getFilters());var n=t.filters.map((function(t){return Kw(e,t)}));return Iy.create(n,"or")}function Ww(e){if($p(e instanceof xy||e instanceof Iy),e instanceof xy)return e;var t=e.getFilters();if(1===t.length)return Ww(t[0]);if(Cy(e))return e;var n=t.map((function(e){return Ww(e)})),r=[];return n.forEach((function(t){t instanceof xy?r.push(t):t instanceof Iy&&(t.op===e.op?r.push.apply(r,dt(t.filters)):r.push(t))})),1===r.length?r[0]:Iy.create(r,e.op)}var Qw=function(){function e(){xe(this,e),this.rn=new Yw}return Ee(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.rn.add(t),Lv.resolve()}},{key:"getCollectionParents",value:function(e,t){return Lv.resolve(this.rn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Lv.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Lv.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Lv.resolve(null)}},{key:"getIndexType",value:function(e,t){return Lv.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Lv.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Lv.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Lv.resolve(Av.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Lv.resolve(Av.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Lv.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Lv.resolve()}}]),e}(),Yw=function(){function e(){xe(this,e),this.index={}}return Ee(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Om(gv.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Om(gv.comparator)).toArray()}}]),e}(),Xw=new Uint8Array(0),$w=function(){function e(t,n){xe(this,e),this.user=t,this.databaseId=n,this.on=new Yw,this.un=new dg((function(e){return qy(e)}),(function(e,t){return Gy(e,t)})),this.uid=t.uid||""}return Ee(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.on.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.on.add(t)}));var a={collectionId:r,parent:$v(i)};return Jw(e).put(a)}return Lv.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[pv(t),""],!1,!0);return Jw(e).j(r).next((function(e){var r,i=Te(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(em(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=eb(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=tb(e);return a.next((function(e){o.put(_w(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=eb(e),r=tb(e),i=Zw(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Zw(e),i=!0,a=new Map;return Lv.forEach(this.cn(t),(function(t){return n.an(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Ig(),o=[];return Lv.forEach(a,(function(i,a){var u;Hp("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(qy(t)));var s=function(e,t){var n=xv(t);if(void 0===n)return null;var r,i=Te(Hy(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=Te(Iv(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=Te(Hy(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=Te(Iv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Wy(e,o.fieldPath,e.startAt):Qy(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new yy(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=Te(Iv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Qy(e,o.fieldPath,e.endAt):Wy(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new yy(r,i)}(a,i),h=n.hn(i,a,l),d=n.hn(i,a,f),p=n.ln(i,a,c),v=n.fn(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Lv.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=bv.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Lv.resolve(null)}))}},{key:"cn",value:function(e){var t=this.un.get(e);return t||(t=0===e.filters.length?[e]:jw(Iy.create(e.filters,"and")).map((function(t){return By(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.un.set(e,t),t)}},{key:"fn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.dn(t[h/c]):Xw,f=u.wn(e,s,n[h%c],r),d=u._n(e,s,i[h%c],a),p=o.map((function(t){return u.wn(e,s,t,!0)}));l.push.apply(l,dt(u.createRange(f,d,p)))},h=0;h<s;++h)f();return l}},{key:"wn",value:function(e,t,n,r){var i=new Lw(e,bv.empty(),t,n);return r?i:i.Je()}},{key:"_n",value:function(e,t,n,r){var i=new Lw(e,bv.empty(),t,n);return r?i.Je():i}},{key:"an",value:function(e,t){var n=new Uw(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=Te(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.tn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.cn(t);return Lv.forEach(i,(function(t){return n.an(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Om(wv.comparator),r=!1,i=Te(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=Te(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=Te(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"mn",value:function(e,t){var n,r=new Dw,i=Te(Iv(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.He(a.kind);Cw.Ve._e(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Qe()}},{key:"dn",value:function(e){var t=new Dw;return Cw.Ve._e(e,t.He(0)),t.Qe()}},{key:"gn",value:function(e,t){var n=new Dw;return Cw.Ve._e(ny(this.databaseId,t),n.He(function(e){var t=Iv(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}},{key:"ln",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Dw);var i,a=0,o=Te(Iv(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=Te(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.yn(t,s.fieldPath)&&iy(c))r=this.pn(r,s,c);else{var h=f.He(s.kind);Cw.Ve._e(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.In(r)}},{key:"hn",value:function(e,t,n){return this.ln(e,t,n.position)}},{key:"In",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Qe();return t}},{key:"pn",value:function(e,t,n){var r,i=dt(e),a=[],o=Te(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=Te(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Dw;f.seed(l.Qe()),Cw.Ve._e(s,f.He(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"yn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof xy&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=eb(e),i=tb(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return Lv.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Tv(t.sequenceNumber,new Av(vw(t.readTime),new bv(em(t.documentKey)),t.largestBatchId)):Tv.empty(),r=e.fields.map((function(e){var t=s(e,2),n=t[0],r=t[1];return new Ev(wv.fromServerFormat(n),r)}));return new _v(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:hv(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=eb(e),a=tb(e);return this.Tn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Lv.forEach(t,(function(t){return a.put(_w(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Lv.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Lv.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Lv.forEach(a,(function(r){return n.En(e,t,r).next((function(t){var a=n.An(i,r);return t.isEqual(a)?Lv.resolve():n.vn(e,i,r,t,a)}))}))}))}))}},{key:"Rn",value:function(e,t,n,r){return Zw(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Pn",value:function(e,t,n,r){return Zw(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}},{key:"En",value:function(e,t,n){var r=Zw(e),i=new Om(Mw);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(function(e,r){i=i.add(new Lw(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"An",value:function(e,t){var n=new Om(Mw),r=this.mn(t,e);if(null==r)return n;var i=xv(t);if(null!=i){var a=e.data.field(i.fieldPath);if(iy(a)){var o,u=Te(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Lw(t.indexId,e.key,this.dn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Lw(t.indexId,e.key,Xw,r));return n}},{key:"vn",value:function(e,t,n,r,i){var a=this;Hp("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Dm(a),s=Dm(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Dm(o)):l?(i(u),u=Dm(a)):(u=Dm(a),s=Dm(o))}}(r,i,Mw,(function(r){o.push(a.Rn(e,t,n,r))}),(function(r){o.push(a.Pn(e,t,n,r))})),Lv.waitFor(o)}},{key:"Tn",value:function(e){var t=1;return tb(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Mw(e,t)})).filter((function(e,t,n){return!t||0!==Mw(e,n[t-1])}));var r=[];r.push(e);var i,a=Te(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Mw(o,e),s=Mw(o,t);if(0===u)r[0]=e.Je();else if(u>0&&s<0)r.push(o),r.push(o.Je());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.bn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Xw,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Xw,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"bn",value:function(e,t){return Mw(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(nb)}},{key:"getMinOffset",value:function(e,t){var n=this;return Lv.mapArray(this.cn(t),(function(t){return n.an(e,t).next((function(e){return e||Xp()}))})).next(nb)}}]),e}();function Jw(e){return Em(e,"collectionParents")}function Zw(e){return Em(e,"indexEntries")}function eb(e){return Em(e,"indexConfiguration")}function tb(e){return Em(e,"indexState")}function nb(e){$p(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Nv(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Av(t.readTime,t.documentKey,n)}var rb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ib=function(){function e(t,n,r){xe(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Ee(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function ab(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.X({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){$p(1===u)})));var c,l=[],f=Te(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=rm(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Lv.waitFor(a).next((function(){return l}))}function ob(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Xp();t=e.noDocument}return JSON.stringify(t).length}ib.DEFAULT_COLLECTION_PERCENTILE=10,ib.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ib.DEFAULT=new ib(41943040,ib.DEFAULT_COLLECTION_PERCENTILE,ib.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ib.DISABLED=new ib(-1,0,0);var ub=function(){function e(t,n,r,i){xe(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}return Ee(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cb(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=lb(e),o=cb(e);return o.add({}).next((function(u){$p("number"==typeof u);var s,c=new uk(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Xk(e.fe,t)})),i=n.mutations.map((function(t){return Xk(e.fe,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new Om((function(e,t){return hv(e.canonicalString(),t.canonicalString())})),d=Te(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=rm(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,im))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Vn[u]=c.keys()})),Lv.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return cb(e).get(t).next((function(e){return e?($p(e.userId===n.userId),mw(n.serializer,e)):null}))}},{key:"Sn",value:function(e,t){var n=this;return this.Vn[t]?Lv.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Vn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return cb(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&($p(t.batchId>=r),a=mw(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return cb(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return cb(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return mw(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=nm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return lb(e).X({range:i},(function(r,i,o){var u=s(r,3),c=u[0],l=u[1],f=u[2],h=em(l);if(c===n.userId&&t.path.isEqual(h))return cb(e).get(f).next((function(e){if(!e)throw Xp();$p(e.userId===n.userId),a.push(mw(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Om(hv),i=[];return t.forEach((function(t){var a=nm(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=lb(e).X({range:o},(function(e,i,a){var o=s(e,3),u=o[0],c=o[1],l=o[2],f=em(c);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),Lv.waitFor(i).next((function(){return n.Dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=nm(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Om(hv);return lb(e).X({range:o},(function(e,t,a){var o=s(e,3),c=o[0],l=o[1],f=o[2],h=em(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.Dn(e,u)}))}},{key:"Dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(cb(e).get(t).next((function(e){if(null===e)throw Xp();$p(e.userId===n.userId),r.push(mw(n.serializer,e))})))})),Lv.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return ab(e.ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Cn(t.batchId)})),Lv.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Cn",value:function(e){delete this.Vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Lv.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return lb(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=em(e[1]);i.push(a)}else r.done()})).next((function(){$p(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return sb(e,this.userId,t)}},{key:"xn",value:function(e){var t=this;return fb(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"de",value:function(t,n,r,i){return $p(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function sb(e,t,n){var r=nm(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return lb(e).X({range:a,Y:!0},(function(e,n,r){var a=s(e,3),u=a[0],c=a[1];a[2];u===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function cb(e){return Em(e,"mutations")}function lb(e){return Em(e,"documentMutations")}function fb(e){return Em(e,"mutationQueues")}var hb=function(){function e(t){xe(this,e),this.Nn=t}return Ee(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"kn",value:function(){return new e(0)}},{key:"Mn",value:function(){return new e(-1)}}]),e}(),db=function(){function e(t,n){xe(this,e),this.referenceDelegate=t,this.serializer=n}return Ee(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.$n(e).next((function(n){var r=new hb(n.highestTargetId);return n.highestTargetId=r.next(),t.On(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.$n(e).next((function(e){return mv.fromTimestamp(new vv(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.$n(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.$n(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.On(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Fn(e,t).next((function(){return n.$n(e).next((function(r){return r.targetCount+=1,n.Bn(t,r),n.On(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Fn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return pb(e).delete(t.targetId)})).next((function(){return n.$n(e)})).next((function(t){return $p(t.targetCount>0),t.targetCount-=1,n.On(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return pb(e).X((function(o,u){var s=yw(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Lv.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return pb(e).X((function(e,n){var r=yw(n);t(r)}))}},{key:"$n",value:function(e){return vb(e).get("targetGlobalKey").next((function(e){return $p(null!==e),e}))}},{key:"On",value:function(e,t){return vb(e).put("targetGlobalKey",t)}},{key:"Fn",value:function(e,t){return pb(e).put(gw(this.serializer,t))}},{key:"Bn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.$n(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=qy(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return pb(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=yw(n);Gy(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=mb(e);return t.forEach((function(t){var o=$v(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Lv.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=mb(e);return Lv.forEach(t,(function(t){var a=$v(t.path);return Lv.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=mb(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=mb(e),i=Ig();return r.X({range:n,Y:!0},(function(e,t,n){var r=em(e[1]),a=new bv(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=$v(t.path),r=IDBKeyRange.bound([n],[pv(n)],!1,!0),i=0;return mb(e).X({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=s(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"le",value:function(e,t){return pb(e).get(t).next((function(e){return e?yw(e):null}))}}]),e}();function pb(e){return Em(e,"targets")}function vb(e){return Em(e,"targetGlobal")}function mb(e){return Em(e,"targetDocuments")}function yb(e,t){var n=s(e,2),r=n[0],i=n[1],a=s(t,2),o=a[0],u=a[1],c=hv(r,o);return 0===c?hv(i,u):c}var gb=function(){function e(t){xe(this,e),this.Ln=t,this.buffer=new Om(yb),this.qn=0}return Ee(e,[{key:"Un",value:function(){return++this.qn}},{key:"Kn",value:function(e){var t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();yb(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),kb=function(){function e(t,n,r){xe(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Gn=null}return Ee(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}},{key:"stop",value:function(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}},{key:"started",get:function(){return null!==this.Gn}},{key:"Qn",value:function(e){var t=this;Hp("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Gn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!jv(e.t0)){e.next=12;break}Hp("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Pv(e.t0);case 14:return e.next=16,t.Qn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),wb=function(){function e(t,n){xe(this,e),this.jn=t,this.params=n}return Ee(e,[{key:"calculateTargetCount",value:function(e,t){return this.jn.zn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Lv.resolve(Wv.ct);var r=new gb(t);return this.jn.forEachTarget(e,(function(e){return r.Kn(e.sequenceNumber)})).next((function(){return n.jn.Wn(e,(function(e){return r.Kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.jn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.jn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Hp("LruGarbageCollector","Garbage collection skipped; disabled"),Lv.resolve(rb)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Hp("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),rb):n.Hn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.jn.getCacheSize(e)}},{key:"Hn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Hp("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Kp()<=gt.DEBUG&&Hp("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Lv.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function bb(e,t){return new wb(e,t)}var _b=function(){function e(t,n){xe(this,e),this.db=t,this.garbageCollector=bb(this,n)}return Ee(e,[{key:"zn",value:function(e){var t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Jn",value:function(e){var t=0;return this.Wn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Wn",value:function(e,t){return this.Yn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return xb(e,n)}},{key:"removeReference",value:function(e,t,n){return xb(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return xb(e,t)}},{key:"Xn",value:function(e,t){return function(e,t){var n=!1;return fb(e).Z((function(r){return sb(e,r,t).next((function(e){return e&&(n=!0),Lv.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Yn(e,(function(o,u){if(u<=t){var s=n.Xn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,mv.min()),mb(e).delete([0,$v(o.path)])}))}));i.push(s)}})).next((function(){return Lv.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return xb(e,t)}},{key:"Yn",value:function(e,t){var n,r=mb(e),i=Wv.ct;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=s(e,2),o=a[0],u=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==Wv.ct&&t(new bv(em(n)),i),i=c,n=u):i=Wv.ct})).next((function(){i!==Wv.ct&&t(new bv(em(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function xb(e,t){return mb(e).put(function(e,t){return{targetId:0,path:$v(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Ib=function(){function e(){xe(this,e),this.changes=new dg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Ee(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,my.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Lv.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Eb=function(){function e(t){xe(this,e),this.serializer=t}return Ee(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Ab(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Ab(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],dw(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Zn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=my.newInvalidDocument(t);return Ab(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Nb(t))},(function(e,i){r=n.ts(t,i)})).next((function(){return r}))}},{key:"es",value:function(e,t){var n=this,r={size:0,document:my.newInvalidDocument(t)};return Ab(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Nb(t))},(function(e,i){r={document:n.ts(t,i),size:ob(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=vg();return this.ns(e,t,(function(e,t){var i=n.ts(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ss",value:function(e,t){var n=this,r=vg(),i=new Am(bv.comparator);return this.ns(e,t,(function(e,t){var a=n.ts(e,t);r=r.insert(e,a),i=i.insert(e,ob(t))})).next((function(){return{documents:r,rs:i}}))}},{key:"ns",value:function(e,t,n){if(t.isEmpty())return Lv.resolve();var r=new Om(Ob);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Nb(r.first()),Nb(r.last())),a=r.getIterator(),o=a.getNext();return Ab(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=bv.fromSegments([].concat(dt(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Ob(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(Nb(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),dw(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ab(e).j(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=vg(),o=Te(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.ts(bv.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(cg(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=vg(),o=Rb(t,n),u=Rb(t,Av.max());return Ab(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.ts(bv.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Sb(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Cb(e).get("remoteDocumentGlobalKey").next((function(e){return $p(!!e),e}))}},{key:"Zn",value:function(e,t){return Cb(e).put("remoteDocumentGlobalKey",t)}},{key:"ts",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Qk(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=bv.fromSegments(t.noDocument.path),i=vw(t.noDocument.readTime);n=my.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Xp();var a=bv.fromSegments(t.unknownDocument.path),o=vw(t.unknownDocument.version);n=my.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new vv(e[0],e[1]);return mv.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(mv.min()))return n}return my.newInvalidDocument(e)}}]),e}();function Tb(e){return new Eb(e)}var Sb=function(e){Ce(n,e);var t=Re(n);function n(e,r){var i;return xe(this,n),(i=t.call(this)).os=e,i.trackRemovals=r,i.us=new dg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Ee(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Om((function(e,t){return hv(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.us.get(a);if(n.push(t.os.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=hw(t.os.serializer,o);i=i.add(a.path.popLast());var c=ob(s);r+=c-u.size,n.push(t.os.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=hw(t.os.serializer,o.convertToNoDocument(mv.min()));n.push(t.os.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.os.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.os.updateMetadata(e,r)),Lv.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.os.es(e,t).next((function(e){return n.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.os.ss(e,t).next((function(e){var t=e.documents;return e.rs.forEach((function(e,r){n.us.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Ib);function Cb(e){return Em(e,"remoteDocumentGlobal")}function Ab(e){return Em(e,"remoteDocumentsV14")}function Nb(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Rb(e,t){var n=t.documentKey.path.toArray();return[e,dw(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Ob(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=hv(n[a],r[a]))return i;return(i=hv(n.length,r.length))||((i=hv(n[n.length-2],r[r.length-2]))||hv(n[n.length-1],r[r.length-1]))}var Pb=Ee((function e(t,n){xe(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Db=function(){function e(t,n,r,i){xe(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return Ee(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Yg(r.mutation,e,Lm.empty(),vv.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Ig()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ig(),i=kg();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=yg();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=kg();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Ig())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=vg(),a=bg(),o=bg();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Zg)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Yg(o.mutation,t,o.mutation.getFieldMask(),vv.now())):a.set(t.key,Lm.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Pb(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=bg(),i=new Am((function(e,t){return e-t})),a=Ig();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=Te(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Lm.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Ig()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=wg();c.forEach((function(e){if(!a.has(e)){var n=Wg(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Lv.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return bv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):tg(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Lv.resolve(kg()),u=-1,s=a;return o.next((function(t){return Lv.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Lv.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Ig())})).next((function(e){return{batchId:u,changes:gg(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new bv(t)).next((function(e){var t=yg();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=yg();return this.indexManager.getCollectionParents(e,i).next((function(o){return Lv.forEach(o,(function(o){var u=function(e,t){return new Yy(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,my.newInvalidDocument(r)))}));var n=yg();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&Yg(a.mutation,i,Lm.empty(),vv.now()),cg(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),Lb=function(){function e(t){xe(this,e),this.serializer=t,this.cs=new Map,this.hs=new Map}return Ee(e,[{key:"getBundleMetadata",value:function(e,t){return Lv.resolve(this.cs.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Uk(n.createTime)}),Lv.resolve()}},{key:"getNamedQuery",value:function(e,t){return Lv.resolve(this.hs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:kw(e.bundledQuery),readTime:Uk(e.readTime)}}(t)),Lv.resolve()}}]),e}(),Mb=function(){function e(){xe(this,e),this.overlays=new Am(bv.comparator),this.ls=new Map}return Ee(e,[{key:"getOverlay",value:function(e,t){return Lv.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=kg();return Lv.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.we(e,t,i)})),Lv.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ls.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ls.delete(n)),Lv.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=kg(),i=t.length+1,a=new bv(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Lv.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Am((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=kg(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=kg(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Lv.resolve(s)}},{key:"we",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new ck(t,n));var a=this.ls.get(t);void 0===a&&(a=Ig(),this.ls.set(t,a)),this.ls.set(t,a.add(n.key))}}]),e}(),Fb=function(){function e(){xe(this,e),this.fs=new Om(Ub.ds),this.ws=new Om(Ub._s)}return Ee(e,[{key:"isEmpty",value:function(){return this.fs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Ub(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}},{key:"gs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ys(new Ub(e,t))}},{key:"ps",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Is",value:function(e){var t=this,n=new bv(new gv([])),r=new Ub(n,e),i=new Ub(n,e+1),a=[];return this.ws.forEachInRange([r,i],(function(e){t.ys(e),a.push(e.key)})),a}},{key:"Ts",value:function(){var e=this;this.fs.forEach((function(t){return e.ys(t)}))}},{key:"ys",value:function(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}},{key:"Es",value:function(e){var t=new bv(new gv([])),n=new Ub(t,e),r=new Ub(t,e+1),i=Ig();return this.ws.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Ub(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Ub=function(){function e(t,n){xe(this,e),this.key=t,this.As=n}return Ee(e,null,[{key:"ds",value:function(e,t){return bv.comparator(e.key,t.key)||hv(e.As,t.As)}},{key:"_s",value:function(e,t){return hv(e.As,t.As)||bv.comparator(e.key,t.key)}}]),e}(),Vb=function(){function e(t,n){xe(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new Om(Ub.ds)}return Ee(e,[{key:"checkEmpty",value:function(e){return Lv.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new uk(i,t,n,r);this.mutationQueue.push(a);var o,u=Te(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Rs=this.Rs.add(new Ub(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Lv.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Lv.resolve(this.Ps(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.bs(n),i=r<0?0:r;return Lv.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Lv.resolve(0===this.mutationQueue.length?-1:this.vs-1)}},{key:"getAllMutationBatches",value:function(e){return Lv.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Ub(t,0),i=new Ub(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],(function(e){var t=n.Ps(e.As);a.push(t)})),Lv.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Om(hv);return t.forEach((function(e){var t=new Ub(e,0),i=new Ub(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,i],(function(e){r=r.add(e.As)}))})),Lv.resolve(this.Vs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;bv.isDocumentKey(i)||(i=i.child(""));var a=new Ub(new bv(i),0),o=new Om(hv);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),a),Lv.resolve(this.Vs(o))}},{key:"Vs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ps(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;$p(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Rs;return Lv.forEach(t.mutations,(function(i){var a=new Ub(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Rs=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Ub(t,0),r=this.Rs.firstAfterOrEqual(n);return Lv.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Lv.resolve()}},{key:"Ss",value:function(e,t){return this.bs(e)}},{key:"bs",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Ps",value:function(e){var t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),jb=function(){function e(t){xe(this,e),this.Ds=t,this.docs=new Am(bv.comparator),this.size=0}return Ee(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Lv.resolve(n?n.document.mutableCopy():my.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=vg();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():my.newInvalidDocument(e))})),Lv.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=vg(),a=t.path,o=new bv(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Nv(Cv(l),n)<=0||(r.has(l.key)||cg(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Lv.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Xp()}},{key:"Cs",value:function(e,t){return Lv.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new zb(this)}},{key:"getSize",value:function(e){return Lv.resolve(this.size)}}]),e}(),zb=function(e){Ce(n,e);var t=Re(n);function n(e){var r;return xe(this,n),(r=t.call(this)).os=e,r}return Ee(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.os.addEntry(e,i)):t.os.removeEntry(r)})),Lv.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.os.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.os.getEntries(e,t)}}]),n}(Ib),Bb=function(){function e(t){xe(this,e),this.persistence=t,this.xs=new dg((function(e){return qy(e)}),Gy),this.lastRemoteSnapshotVersion=mv.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Fb,this.targetCount=0,this.Ms=hb.kn()}return Ee(e,[{key:"forEachTarget",value:function(e,t){return this.xs.forEach((function(e,n){return t(n)})),Lv.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Lv.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Lv.resolve(this.Ns)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ms.next(),Lv.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),Lv.resolve()}},{key:"Fn",value:function(e){this.xs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ms=new hb(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Fn(t),this.targetCount+=1,Lv.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Fn(t),Lv.resolve()}},{key:"removeTargetData",value:function(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Lv.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.xs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.xs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Lv.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Lv.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.xs.get(t)||null;return Lv.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.ks.gs(t,n),Lv.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.ks.ps(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Lv.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.ks.Is(t),Lv.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.ks.Es(t);return Lv.resolve(n)}},{key:"containsKey",value:function(e,t){return Lv.resolve(this.ks.containsKey(t))}}]),e}(),qb=function(){function e(t,n){var r=this;xe(this,e),this.$s={},this.overlays={},this.Os=new Wv(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new Bb(this),this.indexManager=new Qw,this.remoteDocumentCache=new jb((function(e){return r.referenceDelegate.Ls(e)})),this.serializer=new fw(n),this.qs=new Lb(this.serializer)}return Ee(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Fs=!1,Promise.resolve()}},{key:"started",get:function(){return this.Fs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Mb,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.$s[e.toKey()];return n||(n=new Vb(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;Hp("MemoryPersistence","Starting transaction:",e);var i=new Gb(this.Os.next());return this.referenceDelegate.Us(),n(i).next((function(e){return r.referenceDelegate.Ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gs",value:function(e,t){return Lv.or(Object.values(this.$s).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Gb=function(e){Ce(n,e);var t=Re(n);function n(e){var r;return xe(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Ee(n)}(Ov),Kb=function(){function e(t){xe(this,e),this.persistence=t,this.Qs=new Fb,this.js=null}return Ee(e,[{key:"Ws",get:function(){if(this.js)return this.js;throw Xp()}},{key:"addReference",value:function(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),Lv.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),Lv.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ws.add(t.toString()),Lv.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qs.Is(t.targetId).forEach((function(e){return n.Ws.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ws.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Us",value:function(){this.js=new Set}},{key:"Ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Lv.forEach(this.Ws,(function(r){var i=bv.fromPath(r);return t.Hs(e,i).next((function(e){e||n.removeEntry(i,mv.min())}))})).next((function(){return t.js=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hs(e,t).next((function(e){e?n.Ws.delete(t.toString()):n.Ws.add(t.toString())}))}},{key:"Ls",value:function(e){return 0}},{key:"Hs",value:function(e,t){var n=this;return Lv.or([function(){return Lv.resolve(n.Qs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gs(e,t)}])}}],[{key:"zs",value:function(t){return new e(t)}}]),e}(),Hb=function(){function e(t){xe(this,e),this.serializer=t}return Ee(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new Mv("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",tm,{unique:!0}),e.createObjectStore("documentMutations")}(e),Wb(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Lv.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Wb(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mv.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",tm,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Lv.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ys(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Xs(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Zs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ti(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ei(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:mm});t.createIndex("collectionPathOverlayIndex",ym,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",gm,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:am});t.createIndex("documentKeyIndex",om),t.createIndex("collectionGroupIndex",um)}(e)})).next((function(){return i.ni(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.si(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:hm}).createIndex("sequenceNumberIndex",dm,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:pm}).createIndex("documentKeyIndex",vm,{unique:!1})}(e)}))),o}},{key:"Xs",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=ob(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Ys",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return Lv.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return Lv.forEach(r,(function(r){$p(r.userId===n.userId);var i=mw(t.serializer,r);return ab(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Zs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new gv(n),o=function(e){return[0,$v(e)]}(a);r.push(t.get(o).next((function(n){return n?Lv.resolve():function(n){return t.put({targetId:0,path:$v(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Lv.waitFor(r)}))}))}},{key:"ti",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:fm});var n=t.store("collectionParents"),r=new Yw,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:$v(i)})}};return t.store("remoteDocuments").X({Y:!0},(function(e,t){var n=new gv(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Y:!0},(function(e,t){var n=s(e,3),r=(n[0],n[1]),a=(n[2],em(r));return i(a.popLast())}))}))}},{key:"ei",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=yw(r),a=gw(t.serializer,i);return n.put(a)}))}},{key:"ni",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new bv(gv.fromString(i.document.name).popFirst(5)):i.noDocument?bv.fromSegments(i.noDocument.path):i.unknownDocument?bv.fromSegments(i.unknownDocument.path):Xp()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Lv.waitFor(r)}))}},{key:"si",value:function(e,t){var n=this,r=t.store("mutations"),i=Tb(this.serializer),a=new qb(Kb.zs,this.serializer.fe);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Ig();mw(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Lv.forEach(r,(function(e,r){var o=new Bp(r),u=Tw.de(n.serializer,o),s=a.getIndexManager(o),c=ub.de(o,n.serializer,s,a.referenceDelegate);return new Db(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Im(t,Wv.ct),e).next()}))}))}}]),e}();function Wb(e){e.createObjectStore("targetDocuments",{keyPath:cm}).createIndex("documentTargetsIndex",lm,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",sm,{unique:!0}),e.createObjectStore("targetGlobal")}var Qb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Yb=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(xe(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.ii=a,this.window=o,this.document=u,this.ri=c,this.oi=l,this.ui=f,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=function(e){return Promise.resolve()},!e.D())throw new ev(Zp.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _b(this,i),this.di=n+"main",this.serializer=new fw(s),this.wi=new Fv(this.di,this.ui,new Hb(this.serializer)),this.Bs=new db(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Tb(this.serializer),this.qs=new xw,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===l&&Wp("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Ee(e,[{key:"start",value:function(){var e=this;return this.mi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new ev(Zp.FAILED_PRECONDITION,Qb);return e.gi(),e.yi(),e.pi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Bs.getHighestSequenceNumber(t)}))})).then((function(t){e.Os=new Wv(t,e.ri)})).then((function(){e.Fs=!0})).catch((function(t){return e.wi&&e.wi.close(),Promise.reject(t)}))}},{key:"Ii",value:function(e){var t=this;return this.fi=function(){var n=we(ge().mark((function n(r){return ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.wi.B(function(){var t=we(ge().mark((function t(n){return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.mi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"mi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return $b(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ti(t).next((function(t){t||(e.isPrimary=!1,e.ii.enqueueRetryable((function(){return e.fi(!1)})))}))})).next((function(){return e.Ei(t)})).next((function(n){return e.isPrimary&&!n?e.Ai(t).next((function(){return!1})):!!n&&e.vi(t).next((function(){return!0}))}))})).catch((function(t){if(jv(t))return Hp("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Hp("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ii.enqueueRetryable((function(){return e.fi(t)})),e.isPrimary=t}))}},{key:"Ti",value:function(e){var t=this;return Xb(e).get("owner").next((function(e){return Lv.resolve(t.Ri(e))}))}},{key:"Pi",value:function(e){return $b(e).delete(this.clientId)}},{key:"bi",value:function(){var e=we(ge().mark((function e(){var t,n,r,i,a=this;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Vi(this.li,18e5)){e.next=6;break}return this.li=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Em(e,"clientMetadata");return t.j().next((function(e){var n=a.Si(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Lv.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._i){n=Te(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._i.removeItem(this.Di(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(){var e=this;this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.mi().then((function(){return e.bi()})).then((function(){return e.pi()}))}))}},{key:"Ri",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ei",value:function(e){var t=this;return this.oi?Lv.resolve(!0):Xb(e).get("owner").next((function(n){if(null!==n&&t.Vi(n.leaseTimestampMs,5e3)&&!t.Ci(n.ownerId)){if(t.Ri(n)&&t.networkEnabled)return!0;if(!t.Ri(n)){if(!n.allowTabSynchronization)throw new ev(Zp.FAILED_PRECONDITION,Qb);return!1}}return!(!t.networkEnabled||!t.inForeground)||$b(e).j().next((function(e){return void 0===t.Si(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Hp("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=we(ge().mark((function e(){var t=this;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),e.next=7,this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Im(e,Wv.ct);return t.Ai(n).next((function(){return t.Pi(n)}))}));case 7:this.wi.close(),this.Mi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Si",value:function(e,t){var n=this;return e.filter((function(e){return n.Vi(e.updateTimeMs,t)&&!n.Ci(e.clientId)}))}},{key:"$i",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return $b(t).j().next((function(t){return e.Si(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Fs}},{key:"getMutationQueue",value:function(e,t){return ub.de(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new $w(e,this.serializer.fe.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Tw.de(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;Hp("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.ui)?xm:14===i?_m:13===i?bm:12===i?wm:11===i?km:void Xp();return this.wi.runTransaction(e,o,u,(function(i){return a=new Im(i,r.Os?r.Os.next():Wv.ct),"readwrite-primary"===t?r.Ti(a).next((function(e){return!!e||r.Ei(a)})).next((function(t){if(!t)throw Wp("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.ii.enqueueRetryable((function(){return r.fi(!1)})),new ev(Zp.FAILED_PRECONDITION,Rv);return n(a)})).next((function(e){return r.vi(a).next((function(){return e}))})):r.Oi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Oi",value:function(e){var t=this;return Xb(e).get("owner").next((function(e){if(null!==e&&t.Vi(e.leaseTimestampMs,5e3)&&!t.Ci(e.ownerId)&&!t.Ri(e)&&!(t.oi||t.allowTabSynchronization&&e.allowTabSynchronization))throw new ev(Zp.FAILED_PRECONDITION,Qb)}))}},{key:"vi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xb(e).put("owner",t)}},{key:"Ai",value:function(e){var t=this,n=Xb(e);return n.get("owner").next((function(e){return t.Ri(e)?(Hp("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Lv.resolve()}))}},{key:"Vi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Wp("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=function(){e.ii.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.mi()}))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ni",value:function(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}},{key:"yi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=function(){t.xi();var e=/(?:Version|Mobile)\/1[456]/;!We()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.ii.enterRestrictedMode(!0),t.ii.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ci))}},{key:"ki",value:function(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}},{key:"Ci",value:function(e){var t;try{var n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Hp("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Wp("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xi",value:function(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Wp("Failed to set zombie client id.",e)}}},{key:"Mi",value:function(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}},{key:"Di",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return Fv.D()}}]),e}();function Xb(e){return Em(e,"owner")}function $b(e){return Em(e,"clientMetadata")}function Jb(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Zb=function(){function e(t,n,r,i){xe(this,e),this.targetId=t,this.fromCache=n,this.Fi=r,this.Bi=i}return Ee(e,null,[{key:"Li",value:function(t,n){var r,i=Ig(),a=Ig(),o=Te(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),e_=function(){function e(){xe(this,e),this.qi=!1}return Ee(e,[{key:"initialize",value:function(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ki(e,t).next((function(a){return a||i.Gi(e,t,r,n)})).next((function(n){return n||i.Qi(e,t)}))}},{key:"Ki",value:function(e,t){var n=this;if(Jy(t))return Lv.resolve(null);var r=rg(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=ag(t,null,"F"),r=rg(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Ig.apply(void 0,dt(i));return n.Ui.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ji(t,i);return n.zi(t,o,a,r.readTime)?n.Ki(e,ag(t,null,"F")):n.Wi(e,o,t,r)}))}))})))}))}},{key:"Gi",value:function(e,t,n,r){var i=this;return Jy(t)||r.isEqual(mv.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((function(a){var o=i.ji(t,a);return i.zi(t,o,n,r)?i.Qi(e,t):(Kp()<=gt.DEBUG&&Hp("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),sg(t)),i.Wi(e,o,t,Sv(r,-1)))}))}},{key:"ji",value:function(e,t){var n=new Om(fg(e));return t.forEach((function(t,r){cg(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Qi",value:function(e,t){return Kp()<=gt.DEBUG&&Hp("QueryEngine","Using full collection scan to execute query:",sg(t)),this.Ui.getDocumentsMatchingQuery(e,t,Av.min())}},{key:"Wi",value:function(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),t_=function(){function e(t,n,r,i){xe(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new Am(hv),this.Yi=new dg((function(e){return qy(e)}),Gy),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(r)}return Ee(e,[{key:"tr",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Db(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function n_(e,t,n,r){return new t_(e,t,n,r)}function r_(e,t){return i_.apply(this,arguments)}function i_(){return i_=we(ge().mark((function e(t,n){var r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jp(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.tr(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Ig(),s=Te(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=Te(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=Te(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=Te(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{er:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),i_.apply(this,arguments)}function a_(e,t){var n=Jp(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Lv.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);$p(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Ig(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function o_(e){var t=Jp(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Bs.getLastRemoteSnapshotVersion(e)}))}function u_(e,t){var n=Jp(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Bs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Bs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(Fm.EMPTY_BYTE_STRING,mv.min()).withLastLimboFreeSnapshotVersion(mv.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Bs.updateTargetData(e,c))}}));var u=vg(),s=Ig();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(s_(e,a,t.documentUpdates).next((function(e){u=e.nr,s=e.sr}))),!r.isEqual(mv.min())){var c=n.Bs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Lv.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ji=i,e}))}function s_(e,t,n){var r=Ig(),i=Ig();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=vg();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(mv.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Hp("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{nr:r,sr:i}}))}function c_(e,t){var n=Jp(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function l_(e,t){var n=Jp(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Bs.getTargetData(e,t).next((function(i){return i?(r=i,Lv.resolve(r)):n.Bs.allocateTargetId(e).next((function(i){return r=new lw(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function f_(e,t,n){return h_.apply(this,arguments)}function h_(){return h_=we(ge().mark((function e(t,n,r){var i,a,o;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Jp(t),a=i.Ji.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),jv(e.t1)){e.next=12;break}throw e.t1;case 12:Hp("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),h_.apply(this,arguments)}function d_(e,t,n){var r=Jp(e),i=mv.min(),a=Ig();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Jp(e),i=r.Yi.get(n);return void 0!==i?Lv.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,rg(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:mv.min(),n?a:Ig())})).next((function(e){return m_(r,lg(t),e),{documents:e,ir:a}}))}))}function p_(e,t){var n=Jp(e),r=Jp(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.le(e,t).next((function(e){return e?e.target:null}))}))}function v_(e,t){var n=Jp(e),r=n.Xi.get(t)||mv.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Zi.getAllFromCollectionGroup(e,t,Sv(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return m_(n,t,e),e}))}function m_(e,t,n){var r=e.Xi.get(t)||mv.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}function y_(e,t,n,r){return g_.apply(this,arguments)}function g_(){return g_=we(ge().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Jp(t),o=Ig(),u=vg(),s=Te(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.rr(l.metadata.name),l.document&&(o=o.add(f)),(h=n.ur(l)).setReadTime(n.cr(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Zi.newChangeBuffer({trackRemovals:!0}),e.next=7,l_(a,function(e){return rg($y(gv.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return s_(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Bs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Bs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr)})).next((function(){return t.nr}))}))})));case 9:case"end":return e.stop()}}),e)}))),g_.apply(this,arguments)}function k_(e,t){return w_.apply(this,arguments)}function w_(){return w_=we(ge().mark((function e(t,n){var r,i,a,o=arguments;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Ig(),e.next=3,l_(t,rg(kw(n.bundledQuery)));case 3:return i=e.sent,a=Jp(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Uk(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.qs.saveNamedQuery(e,n);var o=i.withResumeToken(Fm.EMPTY_BYTE_STRING,t);return a.Ji=a.Ji.insert(o.targetId,o),a.Bs.updateTargetData(e,o).next((function(){return a.Bs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Bs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.qs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),w_.apply(this,arguments)}function b_(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function __(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function x_(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var I_=function(){function e(t,n,r,i){xe(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Ee(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new ev(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Wp("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),E_=function(){function e(t,n,r){xe(this,e),this.targetId=t,this.state=n,this.error=r}return Ee(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new ev(i.error.code,i.error.message))),a?new e(t,i.state,r):(Wp("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),T_=function(){function e(t,n){xe(this,e),this.clientId=t,this.activeTargetIds=n}return Ee(e,null,[{key:"ar",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Tg(),o=0;i&&o<r.activeTargetIds.length;++o)i=Xv(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Wp("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),S_=function(){function e(t,n){xe(this,e),this.clientId=t,this.onlineState=n}return Ee(e,null,[{key:"ar",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Wp("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),C_=function(){function e(){xe(this,e),this.activeTargetIds=Tg()}return Ee(e,[{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"dr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"hr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),A_=function(){function e(t,n,r,i,a){xe(this,e),this.window=t,this.ii=n,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Am(hv),this.started=!1,this.yr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=b_(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new C_),this.Tr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}return Ee(e,[{key:"start",value:function(){var e=we(ge().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.$i();case 2:t=e.sent,n=Te(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.wr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(b_(this.persistenceKey,i)))&&(o=T_.ar(i,a))&&(this.gr=this.gr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Pr(),(u=this.storage.getItem(this.vr))&&(s=this.br(u))&&this.Vr(s),c=Te(this.yr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.mr(f)}catch(d){c.e(d)}finally{c.f()}this.yr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ir,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Sr(this.gr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.gr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Dr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Dr(e,t,n),this.Cr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(x_(this.persistenceKey,e));if(n){var r=E_.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Nr.dr(e),this.Pr()}},{key:"isLocalQueryTarget",value:function(e){return this.Nr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(x_(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.kr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Cr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Mr(e)}},{key:"notifyBundleLoaded",value:function(e){this.$r(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Hp("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Hp("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Hp("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"mr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Hp("SharedClientState","EVENT",n.key,n.newValue),n.key===this.pr)return void Wp("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(we(ge().mark((function e(){var r,i,a,o,u,s,c;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Tr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Or(n.key),e.abrupt("return",t.Fr(r,null));case 6:if(!(i=t.Br(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Fr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Er.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Lr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.qr(a));case 16:e.next=41;break;case 18:if(!t.Ar.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Ur(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.vr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.br(n.newValue))){e.next=30;break}return e.abrupt("return",t.Vr(u));case 30:e.next=41;break;case 32:if(n.key!==t.Ir){e.next=37;break}s=function(e){var t=Wv.ct;if(null!=e)try{var n=JSON.parse(e);$p("number"==typeof n),t=n}catch(e){Wp("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Wv.ct&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.Rr){e.next=41;break}return c=t.Gr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Qr(e)})));case 41:e.next=44;break;case 43:t.yr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Nr",get:function(){return this.gr.get(this.wr)}},{key:"Pr",value:function(){this.setItem(this.pr,this.Nr.hr())}},{key:"Dr",value:function(e,t,n){var r=new I_(this.currentUser,e,t,n),i=__(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}},{key:"Cr",value:function(e){var t=__(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Mr",value:function(e){var t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}},{key:"kr",value:function(e,t,n){var r=x_(this.persistenceKey,e),i=new E_(e,t,n);this.setItem(r,i.hr())}},{key:"$r",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}},{key:"Or",value:function(e){var t=this.Tr.exec(e);return t?t[1]:null}},{key:"Br",value:function(e,t){var n=this.Or(e);return T_.ar(n,t)}},{key:"Lr",value:function(e,t){var n=this.Er.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return I_.ar(new Bp(i),r,t)}},{key:"Ur",value:function(e,t){var n=this.Ar.exec(e),r=Number(n[1]);return E_.ar(r,t)}},{key:"br",value:function(e){return S_.ar(e)}},{key:"Gr",value:function(e){return JSON.parse(e)}},{key:"qr",value:function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.jr(t.batchId,t.state,t.error));case 2:Hp("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Kr",value:function(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}},{key:"Fr",value:function(e,t){var n=this,r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Wr(o,u).then((function(){n.gr=r}))}},{key:"Vr",value:function(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Sr",value:function(e){var t=Tg();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),N_=function(){function e(){xe(this,e),this.Hr=new C_,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Ee(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Jr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hr.dr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Jr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hr=new C_,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),R_=function(){function e(){xe(this,e)}return Ee(e,[{key:"Yr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),O_=function(){function e(){var t=this;xe(this,e),this.Xr=function(){return t.Zr()},this.eo=function(){return t.no()},this.so=[],this.io()}return Ee(e,[{key:"Yr",value:function(e){this.so.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}},{key:"Zr",value:function(){Hp("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Te(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){Hp("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Te(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),P_=null;function D_(){return null===P_?P_=268435456+Math.round(2147483648*Math.random()):P_++,"0x"+P_.toString(16)}var L_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},M_=function(){function e(t){xe(this,e),this.ro=t.ro,this.oo=t.oo}return Ee(e,[{key:"uo",value:function(e){this.co=e}},{key:"ao",value:function(e){this.ho=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.ro(e)}},{key:"fo",value:function(){this.co()}},{key:"wo",value:function(e){this.ho(e)}},{key:"_o",value:function(e){this.lo(e)}}]),e}(),F_="WebChannelConnection",U_=function(e){Ce(n,e);var t=Re(n);function n(e){var r;return xe(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return Ee(n,[{key:"Ao",value:function(e,t,n,r){var i=D_();return new Promise((function(a,o){var u=new Up;u.setWithCredentials(!0),u.listenOnce(Pp.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case Op.NO_ERROR:var t=u.getResponseJson();Hp(F_,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Op.TIMEOUT:Hp(F_,"RPC '".concat(e,"' ").concat(i," timed out")),o(new ev(Zp.DEADLINE_EXCEEDED,"Request time out"));break;case Op.HTTP_ERROR:var n=u.getStatus();if(Hp(F_,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Zp).indexOf(t)>=0?t:Zp.UNKNOWN}(s.status);o(new ev(c,s.message))}else o(new ev(Zp.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new ev(Zp.UNAVAILABLE,"Connection failed."));break;default:Xp()}}finally{Hp(F_,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);Hp(F_,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Ro",value:function(e,t,n){var r=D_(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Np(),o=Rp(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.xmlHttpFactory=new Mp({})),this.Eo(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");Hp(F_,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),f=!1,h=!1,d=new M_({ro:function(t){h?Hp(F_,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(Hp(F_,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),Hp(F_,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,Fp.EventType.OPEN,(function(){h||Hp(F_,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,Fp.EventType.CLOSE,(function(){h||(h=!0,Hp(F_,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.wo())})),p(l,Fp.EventType.ERROR,(function(t){h||(h=!0,Qp(F_,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.wo(new ev(Zp.UNAVAILABLE,"The operation could not be completed")))})),p(l,Fp.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];$p(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Hp(F_,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=rk[e];if(void 0!==t)return hk(t)}(u),c=o.message;void 0===s&&(s=Zp.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),h=!0,d.wo(new ev(s,c)),l.close()}else Hp(F_,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d._o(i)}})),p(o,Dp.STAT_EVENT,(function(t){t.stat===Lp.PROXY?Hp(F_,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Lp.NOPROXY&&Hp(F_,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.fo()}),0),d}}]),n}(function(){function e(t){xe(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.mo=n+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Ee(e,[{key:"po",get:function(){return!1}},{key:"Io",value:function(e,t,n,r,i){var a=D_(),o=this.To(e,t);Hp("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.Eo(u,r,i),this.Ao(e,o,u,n).then((function(t){return Hp("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Qp("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,r,i,a){return this.Io(e,t,n,r,i)}},{key:"Eo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+qp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"To",value:function(e,t){var n=L_[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}]),e}());function V_(){return"undefined"!=typeof window?window:null}function j_(){return"undefined"!=typeof document?document:null}function z_(e){return new Pk(e,!0)}var B_=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;xe(this,e),this.ii=t,this.timerId=n,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}return Ee(e,[{key:"reset",value:function(){this.So=0}},{key:"xo",value:function(){this.So=this.Vo}},{key:"No",value:function(e){var t=this;this.cancel();var n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&Hp("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Co=Date.now(),e()})),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}},{key:"Mo",value:function(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}},{key:"cancel",value:function(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"ko",value:function(){return(Math.random()-.5)*this.So}}]),e}(),q_=function(){function e(t,n,r,i,a,o,u,s){xe(this,e),this.ii=t,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new B_(t,n)}return Ee(e,[{key:"Uo",value:function(){return 1===this.state||5===this.state||this.Ko()}},{key:"Ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Go()}},{key:"stop",value:function(){var e=we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Uo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qo",value:function(){this.state=0,this.qo.reset()}},{key:"jo",value:function(){var e=this;this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(function(){return e.zo()})))}},{key:"Wo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var e=we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"Jo",value:function(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"close",value:function(){var e=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==t?this.qo.reset():n&&n.code===Zp.RESOURCE_EXHAUSTED?(Wp(n.toString()),Wp("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===Zp.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.ao(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.Fo===n&&e.Zo(i,a)}),(function(n){t((function(){var t=new ev(Zp.UNKNOWN,"Fetching auth token failed: "+n.message);return e.tu(t)}))}))}},{key:"Zo",value:function(e,t){var n=this,r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((function(){r((function(){return n.state=2,n.Lo=n.ii.enqueueAfterDelay(n.Oo,1e4,(function(){return n.Ko()&&(n.state=3),Promise.resolve()})),n.listener.uo()}))})),this.stream.ao((function(e){r((function(){return n.tu(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Go",value:function(){var e=this;this.state=5,this.qo.No(we(ge().mark((function t(){return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"tu",value:function(e){return Hp("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Xo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.Fo===e?n():(Hp("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),G_=function(e){Ce(n,e);var t=Re(n);function n(e,r,i,a,o,u){var s;return xe(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return Ee(n,[{key:"eu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.qo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Xp()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?($p(void 0===t||"string"==typeof t),Fm.fromBase64String(t||"")):($p(void 0===t||t instanceof Uint8Array),Fm.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Zp.UNKNOWN:hk(e.code);return new ev(t,e.message||"")}(o);n=new Ek(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Bk(e,s.document.name),l=Uk(s.document.updateTime),f=s.document.createTime?Uk(s.document.createTime):mv.min(),h=new py({mapValue:{fields:s.document.fields}}),d=my.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new xk(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=Bk(e,m.document),g=m.readTime?Uk(m.readTime):mv.min(),k=my.newNoDocument(y,g),w=m.removedTargetIds||[];n=new xk([],w,k.key,k)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var _=Bk(e,b.document),x=b.removedTargetIds||[];n=new xk([],x,_,null)}else{if(!("filter"in t))return Xp();t.filter;var I=t.filter;I.targetId;var E=I.count,T=void 0===E?0:E,S=I.unchangedNames,C=new lk(T,S),A=I.targetId;n=new Ik(A,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return mv.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?mv.min():t.readTime?Uk(t.readTime):mv.min()}(e);return this.listener.nu(t,n)}},{key:"su",value:function(e){var t={};t.database=Kk(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=Ky(r)?{documents:Jk(e,r)}:{query:Zk(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Mk(e,t.resumeToken);var i=Dk(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(mv.min())>0){n.readTime=Lk(e,t.snapshotVersion.toTimestamp());var a=Dk(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xp()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}},{key:"iu",value:function(e){var t={};t.database=Kk(this.serializer),t.removeTarget=e,this.Wo(t)}}]),n}(q_),K_=function(e){Ce(n,e);var t=Re(n);function n(e,r,i,a,o,u){var s;return xe(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.ru=!1,s}return Ee(n,[{key:"ou",get:function(){return this.ru}},{key:"start",value:function(){this.ru=!1,this.lastStreamToken=void 0,Gn(Ae(n.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.ru&&this.uu([])}},{key:"eu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if($p(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();var t=function(e,t){return e&&e.length>0?($p(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Uk(e.updateTime):Uk(t);return n.isEqual(mv.min())&&(n=Uk(t)),new qg(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Uk(e.commitTime);return this.listener.cu(n,t)}return $p(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}},{key:"hu",value:function(){var e={};e.database=Kk(this.serializer),this.Wo(e)}},{key:"uu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Xk(t.serializer,e)}))};this.Wo(n)}}]),n}(q_),H_=function(e){Ce(n,e);var t=Re(n);function n(e,r,i,a){var o;return xe(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.lu=!1,o}return Ee(n,[{key:"fu",value:function(){if(this.lu)throw new ev(Zp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Io",value:function(e,t,n){var r=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.connection.Io(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Zp.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new ev(Zp.UNKNOWN,e.toString())}))}},{key:"vo",value:function(e,t,n,r){var i=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=s(a,2),u=o[0],c=o[1];return i.connection.vo(e,t,n,u,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Zp.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new ev(Zp.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.lu=!0}}]),n}(function(){return Ee((function e(){xe(this,e)}))}());var W_=function(){function e(t,n){xe(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}return Ee(e,[{key:"gu",value:function(){var e=this;0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.pu("Backend didn't respond within 10 seconds."),e.yu("Offline"),Promise.resolve()})))}},{key:"Iu",value:function(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}},{key:"set",value:function(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}},{key:"yu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"pu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(Wp(t),this.mu=!1):Hp("OnlineStateTracker",t)}},{key:"Tu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),e}(),Q_=Ee((function e(t,n,r,i,a){var o=this;xe(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr((function(e){r.enqueueAndForget(we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=ax(o),!e.t0){e.next=5;break}return Hp("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=we(ge().mark((function e(t){var n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Jp(t)).vu.add(4),e.next=4,$_(n);case 4:return n.bu.set("Unknown"),n.vu.delete(4),e.next=8,Y_(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.bu=new W_(r,i)}));function Y_(e){return X_.apply(this,arguments)}function X_(){return(X_=we(ge().mark((function e(t){var n,r,i;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ax(t)){e.next=18;break}n=Te(t.Ru),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function $_(e){return J_.apply(this,arguments)}function J_(){return(J_=we(ge().mark((function e(t){var n,r,i;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Te(t.Ru),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function Z_(e,t){var n=Jp(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),ix(n)?rx(n):Dx(n).Ko()&&tx(n,t))}function ex(e,t){var n=Jp(e),r=Dx(n);n.Au.delete(t),r.Ko()&&nx(n,t),0===n.Au.size&&(r.Ko()?r.jo():ax(n)&&n.bu.set("Unknown"))}function tx(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(mv.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Dx(e).su(t)}function nx(e,t){e.Vu.qt(t),Dx(e).iu(t)}function rx(e){e.Vu=new Sk({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},le:function(t){return e.Au.get(t)||null},ue:function(){return e.datastore.serializer.databaseId}}),Dx(e).start(),e.bu.gu()}function ix(e){return ax(e)&&!Dx(e).Uo()&&e.Au.size>0}function ax(e){return 0===Jp(e).vu.size}function ox(e){e.Vu=void 0}function ux(e){return sx.apply(this,arguments)}function sx(){return(sx=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Au.forEach((function(e,n){tx(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cx(e,t){return lx.apply(this,arguments)}function lx(){return(lx=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ox(t),ix(t)?(t.bu.Iu(n),rx(t)):t.bu.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fx(e,t,n){return hx.apply(this,arguments)}function hx(){return hx=we(ge().mark((function e(t,n,r){var i;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bu.set("Online"),!(n instanceof Ek&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=we(ge().mark((function e(t,n){var r,i,a,o;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Te(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Au.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Au.delete(o),t.Vu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Hp("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,dx(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof xk?t.Vu.Ht(n):n instanceof Ik?t.Vu.ne(n):t.Vu.Xt(n),r.isEqual(mv.min())){e.next=29;break}return e.prev=14,e.next=17,o_(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Vu.ce(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Au.get(t);if(r){e.Au.set(t,r.withResumeToken(Fm.EMPTY_BYTE_STRING,r.snapshotVersion)),nx(e,t);var i=new lw(r.target,t,n,r.sequenceNumber);tx(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Hp("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,dx(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),hx.apply(this,arguments)}function dx(e,t,n){return px.apply(this,arguments)}function px(){return(px=we(ge().mark((function e(t,n,r){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(jv(n)){e.next=2;break}throw n;case 2:return t.vu.add(1),e.next=5,$_(t);case 5:t.bu.set("Offline"),r||(r=function(){return o_(t.localStore)}),t.asyncQueue.enqueueRetryable(we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hp("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.vu.delete(1),e.next=6,Y_(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vx(e,t){return t().catch((function(n){return dx(e,n,t)}))}function mx(e){return yx.apply(this,arguments)}function yx(){return(yx=we(ge().mark((function e(t){var n,r,i,a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Jp(t),r=Lx(n),i=n.Eu.length>0?n.Eu[n.Eu.length-1].batchId:-1;case 2:if(!gx(n)){e.next=19;break}return e.prev=3,e.next=6,c_(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Eu.length&&r.jo(),e.abrupt("break",19);case 10:i=a.batchId,kx(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,dx(n,e.t0);case 17:e.next=2;break;case 19:wx(n)&&bx(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function gx(e){return ax(e)&&e.Eu.length<10}function kx(e,t){e.Eu.push(t);var n=Lx(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function wx(e){return ax(e)&&!Lx(e).Uo()&&e.Eu.length>0}function bx(e){Lx(e).start()}function _x(e){return xx.apply(this,arguments)}function xx(){return(xx=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Lx(t).hu();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ix(e){return Ex.apply(this,arguments)}function Ex(){return(Ex=we(ge().mark((function e(t){var n,r,i,a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Lx(t),r=Te(t.Eu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.uu(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tx(e,t,n){return Sx.apply(this,arguments)}function Sx(){return Sx=we(ge().mark((function e(t,n,r){var i,a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Eu.shift(),a=sk.from(i,n,r),e.next=3,vx(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,mx(t);case 5:case"end":return e.stop()}}),e)}))),Sx.apply(this,arguments)}function Cx(e,t){return Ax.apply(this,arguments)}function Ax(){return Ax=we(ge().mark((function e(t,n){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Lx(t).ou,!e.t0){e.next=4;break}return e.next=4,function(){var e=we(ge().mark((function e(t,n){var r,i;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!fk(i=n.code)||i===Zp.ABORTED){e.next=7;break}return r=t.Eu.shift(),Lx(t).Qo(),e.next=5,vx(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,mx(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:wx(t)&&bx(t);case 5:case"end":return e.stop()}}),e)}))),Ax.apply(this,arguments)}function Nx(e,t){return Rx.apply(this,arguments)}function Rx(){return(Rx=we(ge().mark((function e(t,n){var r,i;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Jp(t)).asyncQueue.verifyOperationInProgress(),Hp("RemoteStore","RemoteStore received new credentials"),i=ax(r),r.vu.add(3),e.next=6,$_(r);case 6:return i&&r.bu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.vu.delete(3),e.next=12,Y_(r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ox(e,t){return Px.apply(this,arguments)}function Px(){return(Px=we(ge().mark((function e(t,n){var r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Jp(t),!n){e.next=7;break}return r.vu.delete(2),e.next=5,Y_(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.vu.add(2),e.next=12,$_(r);case 12:r.bu.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dx(e){return e.Su||(e.Su=function(e,t,n){var r=Jp(e);return r.fu(),new G_(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:ux.bind(null,e),ao:cx.bind(null,e),nu:fx.bind(null,e)}),e.Ru.push(function(){var t=we(ge().mark((function t(n){return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Su.Qo(),ix(e)?rx(e):e.bu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Su.stop();case 6:ox(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Su}function Lx(e){return e.Du||(e.Du=function(e,t,n){var r=Jp(e);return r.fu(),new K_(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:_x.bind(null,e),ao:Cx.bind(null,e),au:Ix.bind(null,e),cu:Tx.bind(null,e)}),e.Ru.push(function(){var t=we(ge().mark((function t(n){return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Du.Qo(),t.next=4,mx(e);case 4:t.next=9;break;case 6:return t.next=8,e.Du.stop();case 8:e.Eu.length>0&&(Hp("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Du}var Mx=function(){function e(t,n,r,i,a){xe(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new tv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Ee(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ev(Zp.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Fx(e,t){if(Wp("AsyncQueue","".concat(t,": ").concat(e)),jv(e))return new ev(Zp.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Ux=function(){function e(t){xe(this,e),this.comparator=t?function(e,n){return t(e,n)||bv.comparator(e.key,n.key)}:function(e,t){return bv.comparator(e.key,t.key)},this.keyedMap=yg(),this.sortedSet=new Am(this.comparator)}return Ee(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Vx=function(){function e(){xe(this,e),this.Cu=new Am(bv.comparator)}return Ee(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Xp():this.Cu=this.Cu.insert(t,e)}},{key:"xu",value:function(){var e=[];return this.Cu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),jx=function(){function e(t,n,r,i,a,o,u,s,c){xe(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return Ee(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&og(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Ux.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),zx=Ee((function e(){xe(this,e),this.Nu=void 0,this.listeners=[]})),Bx=Ee((function e(){xe(this,e),this.queries=new dg((function(e){return ug(e)}),og),this.onlineState="Unknown",this.ku=new Set}));function qx(e,t){return Gx.apply(this,arguments)}function Gx(){return Gx=we(ge().mark((function e(t,n){var r,i,a,o,u;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Jp(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new zx),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Nu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Fx(e.t0,"Initialization of query '".concat(sg(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Mu(r.onlineState),o.Nu&&n.$u(o.Nu)&&Yx(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Gx.apply(this,arguments)}function Kx(e,t){return Hx.apply(this,arguments)}function Hx(){return Hx=we(ge().mark((function e(t,n){var r,i,a,o,u;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Jp(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Hx.apply(this,arguments)}function Wx(e,t){var n,r=Jp(e),i=!1,a=Te(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Te(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.$u(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Nu=o}}}catch(f){a.e(f)}finally{a.f()}i&&Yx(r)}function Qx(e,t,n){var r=Jp(e),i=r.queries.get(t);if(i){var a,o=Te(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Yx(e){e.ku.forEach((function(e){e.next()}))}var Xx=function(){function e(t,n,r){xe(this,e),this.query=t,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}return Ee(e,[{key:"$u",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Te(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new jx(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"Mu",value:function(e){this.onlineState=e;var t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}},{key:"qu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Lu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Uu",value:function(e){e=jx.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}]),e}(),$x=function(){function e(t,n){xe(this,e),this.Gu=t,this.byteLength=n}return Ee(e,[{key:"Qu",value:function(){return"metadata"in this.Gu}}]),e}(),Jx=function(){function e(t){xe(this,e),this.serializer=t}return Ee(e,[{key:"rr",value:function(e){return Bk(this.serializer,e)}},{key:"ur",value:function(e){return e.metadata.exists?Qk(this.serializer,e.document,!1):my.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}},{key:"cr",value:function(e){return Uk(e)}}]),e}(),Zx=function(){function e(t,n,r){xe(this,e),this.ju=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=eI(t)}return Ee(e,[{key:"zu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;var n=gv.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Wu",value:function(e){var t,n=new Map,r=new Jx(this.serializer),i=Te(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.rr(a.metadata.name),s=Te(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Ig()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=we(ge().mark((function e(){var t,n,r,i,a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y_(this.localStore,new Jx(this.serializer),this.documents,this.ju.id);case 2:t=e.sent,n=this.Wu(this.documents),r=Te(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,k_(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function eI(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var tI=Ee((function e(t){xe(this,e),this.key=t})),nI=Ee((function e(t){xe(this,e),this.key=t})),rI=function(){function e(t,n){xe(this,e),this.query=t,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Ig(),this.mutatedKeys=Ig(),this.tc=fg(t),this.ec=new Ux(this.tc)}return Ee(e,[{key:"nc",get:function(){return this.Yu}},{key:"sc",value:function(e,t){var n=this,r=t?t.ic:new Vx,i=t?t.ec:this.ec,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=cg(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.rc(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.tc(f,s)>0||c&&n.tc(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:u,mutatedKeys:a}}},{key:"rc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;var a=e.ic.xu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xp()}};return n(e)-n(t)}(e.type,t.type)||r.tc(e.doc,t.doc)})),this.oc(n);var o=t?this.uc():[],u=0===this.Zu.size&&this.current?1:0,s=u!==this.Xu;return this.Xu=u,0!==a.length||s?{snapshot:new jx(this.query,e.ec,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}},{key:"Mu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Vx,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}},{key:"ac",value:function(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}},{key:"oc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Yu=t.Yu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Yu=t.Yu.delete(e)})),this.current=e.current)}},{key:"uc",value:function(){var e=this;if(!this.current)return[];var t=this.Zu;this.Zu=Ig(),this.ec.forEach((function(t){e.ac(t.key)&&(e.Zu=e.Zu.add(t.key))}));var n=[];return t.forEach((function(t){e.Zu.has(t)||n.push(new nI(t))})),this.Zu.forEach((function(e){t.has(e)||n.push(new tI(e))})),n}},{key:"hc",value:function(e){this.Yu=e.ir,this.Zu=Ig();var t=this.sc(e.documents);return this.applyChanges(t,!0)}},{key:"lc",value:function(){return jx.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}]),e}(),iI=Ee((function e(t,n,r){xe(this,e),this.query=t,this.targetId=n,this.view=r})),aI=Ee((function e(t){xe(this,e),this.key=t,this.fc=!1})),oI=function(){function e(t,n,r,i,a,o){xe(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new dg((function(e){return ug(e)}),og),this._c=new Map,this.mc=new Set,this.gc=new Am(bv.comparator),this.yc=new Map,this.Ic=new Fb,this.Tc={},this.Ec=new Map,this.Ac=hb.Mn(),this.onlineState="Unknown",this.vc=void 0}return Ee(e,[{key:"isPrimaryClient",get:function(){return!0===this.vc}}]),e}();function uI(e,t){return sI.apply(this,arguments)}function sI(){return sI=we(ge().mark((function e(t,n){var r,i,a,o,u,s;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=eE(t),!(o=r.wc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.lc(),e.next=15;break;case 6:return e.next=8,l_(r.localStore,rg(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,cI(r,n,i,"current"===s,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&Z_(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),sI.apply(this,arguments)}function cI(e,t,n,r,i){return lI.apply(this,arguments)}function lI(){return lI=we(ge().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Rc=function(e,n,r){return function(){var e=we(ge().mark((function e(t,n,r,i){var a,o,u;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.sc(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,d_(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.sc(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(NI(t,n.targetId,u.cc),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,d_(t.localStore,n,!0);case 3:return o=e.sent,u=new rI(n,o.ir),s=u.sc(o.documents),c=_k.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),NI(t,r,l.cc),f=new iI(n,r,u),e.abrupt("return",(t.wc.set(n,f),t._c.has(r)?t._c.get(r).push(n):t._c.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),lI.apply(this,arguments)}function fI(e,t){return hI.apply(this,arguments)}function hI(){return hI=we(ge().mark((function e(t,n){var r,i,a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Jp(t),i=r.wc.get(n),!((a=r._c.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r._c.set(i.targetId,a.filter((function(e){return!og(e,n)}))),void r.wc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,f_(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),ex(r.remoteStore,i.targetId),CI(r,i.targetId)})).catch(Pv);case 9:e.next=14;break;case 11:return CI(r,i.targetId),e.next=14,f_(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),hI.apply(this,arguments)}function dI(e,t,n){return pI.apply(this,arguments)}function pI(){return pI=we(ge().mark((function e(t,n,r){var i,a,o;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=tE(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Jp(e),a=vv.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Ig());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=vg(),s=Ig();return i.Zi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=Te(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Xg(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new Zg(c.key,l,vy(l.value.mapValue),Gg.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:gg(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Tc[e.currentUser.toKey()];r||(r=new Am(hv)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,PI(i,a.changes);case 9:return e.next=11,mx(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Fx(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),pI.apply(this,arguments)}function vI(e,t){return mI.apply(this,arguments)}function mI(){return(mI=we(ge().mark((function e(t,n){var r,i;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jp(t),e.prev=1,e.next=4,u_(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.yc.get(t);n&&($p(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.fc=!0:e.modifiedDocuments.size>0?$p(n.fc):e.removedDocuments.size>0&&($p(n.fc),n.fc=!1))})),e.next=8,PI(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Pv(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function yI(e,t,n){var r=Jp(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.wc.forEach((function(e,n){var r=n.view.Mu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Jp(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Te(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Mu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Yx(n)}(r.eventManager,t),i.length&&r.dc.nu(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function gI(e,t,n){return kI.apply(this,arguments)}function kI(){return kI=we(ge().mark((function e(t,n,r){var i,a,o,u,s,c;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Jp(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.yc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Am(bv.comparator)).insert(o,my.newNoDocument(o,mv.min())),s=Ig().add(o),c=new bk(mv.min(),new Map,new Am(hv),u,s),e.next=9,vI(i,c);case 9:i.gc=i.gc.remove(o),i.yc.delete(n),OI(i),e.next=16;break;case 14:return e.next=16,f_(i.localStore,n,!1).then((function(){return CI(i,n,r)})).catch(Pv);case 16:case"end":return e.stop()}}),e)}))),kI.apply(this,arguments)}function wI(e,t){return bI.apply(this,arguments)}function bI(){return(bI=we(ge().mark((function e(t,n){var r,i,a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jp(t),i=n.batch.batchId,e.prev=1,e.next=4,a_(r.localStore,n);case 4:return a=e.sent,SI(r,i,null),TI(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,PI(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Pv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function _I(e,t,n){return xI.apply(this,arguments)}function xI(){return(xI=we(ge().mark((function e(t,n,r){var i,a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Jp(t),e.prev=1,e.next=4,function(e,t){var n=Jp(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return $p(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,SI(i,n,r),TI(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,PI(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Pv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function II(e,t){return EI.apply(this,arguments)}function EI(){return(EI=we(ge().mark((function e(t,n){var r,i,a,o;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ax((r=Jp(t)).remoteStore)||Hp("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Jp(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Ec.get(i)||[]).push(n),r.Ec.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Fx(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function TI(e,t){(e.Ec.get(t)||[]).forEach((function(e){e.resolve()})),e.Ec.delete(t)}function SI(e,t,n){var r=Jp(e),i=r.Tc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function CI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Te(e._c.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.wc.delete(a),n&&e.dc.Pc(a,n)}}catch(o){i.e(o)}finally{i.f()}e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((function(t){e.Ic.containsKey(t)||AI(e,t)}))}function AI(e,t){e.mc.delete(t.path.canonicalString());var n=e.gc.get(t);null!==n&&(ex(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),OI(e))}function NI(e,t,n){var r,i=Te(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof tI?(e.Ic.addReference(a.key,t),RI(e,a)):a instanceof nI?(Hp("SyncEngine","Document no longer in limbo: "+a.key),e.Ic.removeReference(a.key,t),e.Ic.containsKey(a.key)||AI(e,a.key)):Xp()}}catch(o){i.e(o)}finally{i.f()}}function RI(e,t){var n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(Hp("SyncEngine","New document in limbo: "+n),e.mc.add(r),OI(e))}function OI(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){var t=e.mc.values().next().value;e.mc.delete(t);var n=new bv(gv.fromString(t)),r=e.Ac.next();e.yc.set(r,new aI(n)),e.gc=e.gc.insert(n,r),Z_(e.remoteStore,new lw(rg($y(n.path)),r,"TargetPurposeLimboResolution",Wv.ct))}}function PI(e,t,n){return DI.apply(this,arguments)}function DI(){return DI=we(ge().mark((function e(t,n,r){var i,a,o,u;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Jp(t),a=[],o=[],u=[],e.t0=i.wc.isEmpty(),e.t0){e.next=9;break}return i.wc.forEach((function(e,t){u.push(i.Rc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Zb.Li(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.dc.nu(a),e.next=9,function(){var e=we(ge().mark((function e(t,n){var r,i,a,o,u,s,c,l;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jp(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Lv.forEach(n,(function(t){return Lv.forEach(t.Fi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Lv.forEach(t.Bi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),jv(e.t0)){e.next=10;break}throw e.t0;case 10:Hp("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Te(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ji.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ji=r.Ji.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),DI.apply(this,arguments)}function LI(e,t){return MI.apply(this,arguments)}function MI(){return(MI=we(ge().mark((function e(t,n){var r,i;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Jp(t)).currentUser.isEqual(n)){e.next=11;break}return Hp("SyncEngine","User change. New user:",n.toKey()),e.next=5,r_(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ec.forEach((function(e){e.forEach((function(e){e.reject(new ev(Zp.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,PI(r,i.er);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function FI(e,t){var n=Jp(e),r=n.yc.get(t);if(r&&r.fc)return Ig().add(r.key);var i=Ig(),a=n._c.get(t);if(!a)return i;var o,u=Te(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.wc.get(s);i=i.unionWith(c.view.nc)}}catch(l){u.e(l)}finally{u.f()}return i}function UI(e,t){return VI.apply(this,arguments)}function VI(){return VI=we(ge().mark((function e(t,n){var r,i,a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jp(t),e.next=3,d_(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.hc(i),e.abrupt("return",(r.isPrimaryClient&&NI(r,n.targetId,a.cc),a));case 6:case"end":return e.stop()}}),e)}))),VI.apply(this,arguments)}function jI(e,t){return zI.apply(this,arguments)}function zI(){return(zI=we(ge().mark((function e(t,n){var r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jp(t),e.abrupt("return",v_(r.localStore,n).then((function(e){return PI(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function BI(e,t,n,r){return qI.apply(this,arguments)}function qI(){return qI=we(ge().mark((function e(t,n,r,i){var a,o;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Jp(t),e.next=3,function(e,t){var n=Jp(e),r=Jp(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Sn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Lv.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,mx(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(SI(a,n,i||null),TI(a,n),function(e,t){Jp(Jp(e).mutationQueue).Cn(t)}(a.localStore,n)):Xp();case 11:return e.next=13,PI(a,o);case 13:e.next=16;break;case 15:Hp("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),qI.apply(this,arguments)}function GI(e,t){return KI.apply(this,arguments)}function KI(){return KI=we(ge().mark((function e(t,n){var r,i,a,o,u,s,c,l;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(eE(r=Jp(t)),tE(r),!0!==n||!0===r.vc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,HI(r,i.toArray());case 5:return a=e.sent,r.vc=!0,e.next=9,Ox(r.remoteStore,!0);case 9:o=Te(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Z_(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.vc){e.next=25;break}return c=[],l=Promise.resolve(),r._c.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return CI(r,t),f_(r.localStore,t,!0)})),ex(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,HI(r,c);case 21:return function(e){var t=Jp(e);t.yc.forEach((function(e,n){ex(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new Am(bv.comparator)}(r),r.vc=!1,e.next=25,Ox(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),KI.apply(this,arguments)}function HI(e,t,n){return WI.apply(this,arguments)}function WI(){return WI=we(ge().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Jp(t),a=[],o=[],u=Te(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i._c.get(c))||0===f.length){e.next=34;break}return e.next=11,l_(i.localStore,rg(f[0]));case 11:l=e.sent,h=Te(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.wc.get(p),e.next=20,UI(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,p_(i.localStore,c);case 36:return y=e.sent,e.next=39,l_(i.localStore,y);case 39:return l=e.sent,e.next=42,cI(i,QI(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.dc.nu(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),WI.apply(this,arguments)}function QI(e){return Xy(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function YI(e){var t=Jp(e);return Jp(Jp(t.localStore).persistence).$i()}function XI(e,t,n,r){return $I.apply(this,arguments)}function $I(){return $I=we(ge().mark((function e(t,n,r,i){var a,o,u,s;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Jp(t)).vc){e.next=3;break}return e.abrupt("return",void Hp("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a._c.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,v_(a.localStore,lg(o[0]));case 10:return u=e.sent,s=bk.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Fm.EMPTY_BYTE_STRING),e.next=14,PI(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,f_(a.localStore,n,!0);case 17:return CI(a,n,i),e.abrupt("break",20);case 19:Xp();case 20:case"end":return e.stop()}}),e)}))),$I.apply(this,arguments)}function JI(e,t,n){return ZI.apply(this,arguments)}function ZI(){return(ZI=we(ge().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=eE(t)).vc){e.next=45;break}a=Te(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i._c.has(u)){e.next=10;break}return Hp("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,p_(i.localStore,u);case 12:return s=e.sent,e.next=15,l_(i.localStore,s);case 15:return c=e.sent,e.next=18,cI(i,QI(s),c.targetId,!1,c.resumeToken);case 18:Z_(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=Te(r),e.prev=30,h=ge().mark((function e(){var t;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i._c.has(t),!e.t0){e.next=5;break}return e.next=5,f_(i.localStore,t,!1).then((function(){ex(i.remoteStore,t),CI(i,t)})).catch(Pv);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])})))).apply(this,arguments)}function eE(e){var t=Jp(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=vI.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=FI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=gI.bind(null,t),t.dc.nu=Wx.bind(null,t.eventManager),t.dc.Pc=Qx.bind(null,t.eventManager),t}function tE(e){var t=Jp(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=wI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=_I.bind(null,t),t}function nE(e,t,n){var r=Jp(e);(function(){var e=we(ge().mark((function e(t,n,r){var i,a,o,u,s;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Jp(e),r=Uk(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.qs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(eI(i)),a=new Zx(i,t.localStore,n.serializer),e.next=15,n.bc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.zu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.bc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,PI(t,s.Ju,void 0);case 31:return e.next=33,function(e,t){var n=Jp(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.qs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Hu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Qp("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var rE=function(){function e(){xe(this,e),this.synchronizeTabs=!1}return Ee(e,[{key:"initialize",value:function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=z_(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return n_(this.persistence,new e_,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new qb(Kb.zs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new N_}},{key:"terminate",value:function(){var e=we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),iE=function(e){Ce(n,e);var t=Re(n);function n(e,r,i){var a;return xe(this,n),(a=t.call(this)).Vc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Ee(n,[{key:"initialize",value:function(){var e=we(ge().mark((function e(t){var r=this;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gn(Ae(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Vc.initialize(this,t);case 4:return e.next=6,tE(this.Vc.syncEngine);case 6:return e.next=8,mx(this.Vc.remoteStore);case 8:return e.next=10,this.persistence.Ii((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return n_(this.persistence,new e_,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new kb(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new Hv(t,this.persistence);return new Kv(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=Jb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ib.withCacheSize(this.cacheSizeBytes):ib.DEFAULT;return new Yb(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,V_(),j_(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new N_}}]),n}(rE),aE=function(e){Ce(n,e);var t=Re(n);function n(e,r){var i;return xe(this,n),(i=t.call(this,e,r,!1)).Vc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Ee(n,[{key:"initialize",value:function(){var e=we(ge().mark((function e(t){var r,i=this;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gn(Ae(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Vc.syncEngine,e.t0=this.sharedClientState instanceof A_,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={jr:BI.bind(null,r),zr:XI.bind(null,r),Wr:JI.bind(null,r),$i:YI.bind(null,r),Qr:jI.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ii(function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GI(i.Vc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=V_();if(!A_.D(t))throw new ev(Zp.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Jb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new A_(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(iE),oE=function(){function e(){xe(this,e)}return Ee(e,[{key:"initialize",value:function(){var e=we(ge().mark((function e(t,n){var r=this;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return yI(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=LI.bind(null,this.syncEngine),e.next=12,Ox(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Bx}},{key:"createDatastore",value:function(e){var t,n=z_(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new U_(t));return function(e,t,n,r){return new H_(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return yI(o.syncEngine,e,0)},a=O_.D()?new O_:new R_,new Q_(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new oI(e,t,n,r,i,a);return o&&(u.vc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=we(ge().mark((function e(t){var n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Jp(t),Hp("RemoteStore","RemoteStore shutting down."),n.vu.add(5),e.next=5,$_(n);case 5:n.Pu.shutdown(),n.bu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function uE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return we(ge().mark((function r(){var i;return ge().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var sE=function(){function e(t){xe(this,e),this.observer=t,this.muted=!1}return Ee(e,[{key:"next",value:function(e){this.observer.next&&this.Sc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Sc(this.observer.error,e):Wp("Uncaught Error in snapshot listener:",e.toString())}},{key:"Dc",value:function(){this.muted=!0}},{key:"Sc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),cE=function(){function e(t,n){var r=this;xe(this,e),this.Cc=t,this.serializer=n,this.metadata=new tv,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((function(e){e&&e.Qu()?r.metadata.resolve(e.Gu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(function(e){return r.metadata.reject(e)}))}return Ee(e,[{key:"close",value:function(){return this.Cc.cancel()}},{key:"getMetadata",value:function(){var e=we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){var e=we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Nc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Nc",value:function(){var e=we(ge().mark((function e(){var t,n,r,i;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.kc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.xc.decode(t),r=Number(n),isNaN(r)&&this.Mc("length string (".concat(n,") is not valid number")),e.next=9,this.$c(r);case 9:return i=e.sent,e.abrupt("return",new $x(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"kc",value:function(){var e=we(ge().mark((function e(){var t,n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Oc()<0)){e.next=7;break}return e.next=3,this.Fc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Oc())<0&&this.Mc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$c",value:function(){var e=we(ge().mark((function e(t){var n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Fc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Mc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.xc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mc",value:function(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Fc",value:function(){var e=we(ge().mark((function e(){var t,n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),lE=function(){function e(t){xe(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Ee(e,[{key:"lookup",value:function(){var e=we(ge().mark((function e(t){var n,r=this;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new ev(Zp.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=we(ge().mark((function e(t,n){var r,i,a,o,u,s;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jp(t),i=Kk(r.serializer)+"/documents",a={documents:n.map((function(e){return zk(r.serializer,e)}))},e.next=5,r.vo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Yk(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());$p(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new ak(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=we(ge().mark((function e(){var t,n=this;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=bv.fromPath(t);n.mutations.push(new ok(r,n.precondition(r)))})),e.next=7,function(){var e=we(ge().mark((function e(t,n){var r,i,a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jp(t),i=Kk(r.serializer)+"/documents",a={writes:n.map((function(e){return Xk(r.serializer,e)}))},e.next=3,r.Io("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xp();t=mv.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new ev(Zp.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(mv.min())?Gg.exists(!1):Gg.updateTime(t):Gg.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(mv.min()))throw new ev(Zp.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gg.updateTime(t)}return Gg.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),fE=function(){function e(t,n,r,i,a){xe(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new B_(this.asyncQueue,"transaction_retry")}return Ee(e,[{key:"run",value:function(){this.Bc-=1,this.Lc()}},{key:"Lc",value:function(){var e=this;this.qo.No(we(ge().mark((function t(){var n,r;return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new lE(e.datastore),(r=e.qc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Uc(t)}))}))})).catch((function(t){e.Uc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"qc",value:function(e){try{var t=this.updateFunction(e);return!Qv(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Uc",value:function(e){var t=this;this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Lc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!fk(t)}return!1}}]),e}(),hE=function(){function e(t,n,r,i){var a=this;xe(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Bp.UNAUTHENTICATED,this.clientId=fv.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hp("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Hp("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return Ee(e,[{key:"getConfiguration",value:function(){var e=we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new ev(Zp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new tv;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(we(ge().mark((function n(){var r;return ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Fx(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function dE(e,t){return pE.apply(this,arguments)}function pE(){return pE=we(ge().mark((function e(t,n){var r,i;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Hp("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,r_(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),pE.apply(this,arguments)}function vE(e,t){return mE.apply(this,arguments)}function mE(){return(mE=we(ge().mark((function e(t,n){var r,i;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,gE(t);case 3:return r=e.sent,Hp("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Nx(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Nx(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yE(e){return"FirebaseError"===e.name?e.code===Zp.FAILED_PRECONDITION||e.code===Zp.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function gE(e){return kE.apply(this,arguments)}function kE(){return(kE=we(ge().mark((function e(t){var n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return Hp("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,dE(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),yE(n=e.t0)){e.next=13;break}throw n;case 13:return Qp("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,dE(t,new rE);case 16:e.next=21;break;case 18:return Hp("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,dE(t,new rE);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function wE(e){return bE.apply(this,arguments)}function bE(){return(bE=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return Hp("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,vE(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Hp("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,vE(t,new oE);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _E(e){return gE(e).then((function(e){return e.persistence}))}function xE(e){return gE(e).then((function(e){return e.localStore}))}function IE(e){return wE(e).then((function(e){return e.remoteStore}))}function EE(e){return wE(e).then((function(e){return e.syncEngine}))}function TE(e){return wE(e).then((function(e){return e.datastore}))}function SE(e){return CE.apply(this,arguments)}function CE(){return(CE=we(ge().mark((function e(t){var n,r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wE(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=uI.bind(null,n.syncEngine),r.onUnlisten=fI.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function AE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new tv;return e.asyncQueue.enqueueAndForget(we(ge().mark((function i(){return ge().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new sE({next:function(a){t.enqueueAndForget((function(){return Kx(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new ev(Zp.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new ev(Zp.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Xx($y(n.path),a,{includeMetadataChanges:!0,Ku:!0});return qx(e,o)},i.next=3,SE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function NE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new tv;return e.asyncQueue.enqueueAndForget(we(ge().mark((function i(){return ge().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new sE({next:function(n){t.enqueueAndForget((function(){return Kx(e,o)})),n.fromCache&&"server"===r.source?i.reject(new ev(Zp.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Xx(n,a,{includeMetadataChanges:!0,Ku:!0});return qx(e,o)},i.next=3,SE(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function RE(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var OE=new Map;function PE(e,t,n){if(!n)throw new ev(Zp.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function DE(e,t,n,r){if(!0===t&&!0===r)throw new ev(Zp.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function LE(e){if(!bv.isDocumentKey(e))throw new ev(Zp.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ME(e){if(bv.isDocumentKey(e))throw new ev(Zp.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function FE(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Xp()}function UE(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ev(Zp.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=FE(e);throw new ev(Zp.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function VE(e,t){if(t<=0)throw new ev(Zp.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var jE=function(){function e(t){var n,r;if(xe(this,e),void 0===t.host){if(void 0!==t.ssl)throw new ev(Zp.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ev(Zp.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}DE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RE(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ev(Zp.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new ev(Zp.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new ev(Zp.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return Ee(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}]),e}(),zE=function(){function e(t,n,r,i){xe(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jE({}),this._settingsFrozen=!1}return Ee(e,[{key:"app",get:function(){if(!this._app)throw new ev(Zp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new ev(Zp.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jE(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new rv;switch(e.type){case"firstParty":return new uv(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ev(Zp.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=OE.get(e);t&&(Hp("ComponentProvider","Removing Datastore"),OE.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function BE(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=UE(e,zE))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&Qp("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var u,s;if("string"==typeof i.mockUserToken)u=i.mockUserToken,s=Bp.MOCK_USER;else{u=Ke(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new ev(Zp.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Bp(c)}e._authCredentials=new iv(new nv(u,s))}}var qE=function(){function e(t,n,r){xe(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Ee(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new KE(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),GE=function(){function e(t,n,r){xe(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Ee(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),KE=function(e){Ce(n,e);var t=Re(n);function n(e,r,i){var a;return xe(this,n),(a=t.call(this,e,r,$y(i)))._path=i,a.type="collection",a}return Ee(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new qE(this.firestore,null,new bv(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(GE);function HE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ft(e),PE("collection","path",t),e instanceof zE){var a=gv.fromString.apply(gv,[t].concat(r));return ME(a),new KE(e,null,a)}if(!(e instanceof qE||e instanceof KE))throw new ev(Zp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(gv.fromString.apply(gv,[t].concat(r)));return ME(o),new KE(e.firestore,null,o)}function WE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ft(e),1===arguments.length&&(t=fv.A()),PE("doc","path",t),e instanceof zE){var a=gv.fromString.apply(gv,[t].concat(r));return LE(a),new qE(e,null,new bv(a))}if(!(e instanceof qE||e instanceof KE))throw new ev(Zp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(gv.fromString.apply(gv,[t].concat(r)));return LE(o),new qE(e.firestore,e instanceof KE?e.converter:null,new bv(o))}function QE(e,t){return e=ft(e),t=ft(t),(e instanceof qE||e instanceof KE)&&(t instanceof qE||t instanceof KE)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function YE(e,t){return e=ft(e),t=ft(t),e instanceof GE&&t instanceof GE&&e.firestore===t.firestore&&og(e._query,t._query)&&e.converter===t.converter}var XE=function(){function e(){var t=this;xe(this,e),this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new B_(this,"async_queue_retry"),this.Xc=function(){var e=j_();e&&Hp("AsyncQueue","Visibility state changed to "+e.visibilityState),t.qo.Mo()};var n=j_();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Xc)}return Ee(e,[{key:"isShuttingDown",get:function(){return this.jc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Zc(),this.ta(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;var t=j_();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Zc(),this.jc)return new Promise((function(){}));var n=new tv;return this.ta((function(){return t.jc&&t.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Qc.push(e),t.ea()}))}},{key:"ea",value:function(){var e=we(ge().mark((function e(){var t=this;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Qc.length){e.next=14;break}return e.prev=1,e.next=4,this.Qc[0]();case 4:this.Qc.shift(),this.qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),jv(e.t0)){e.next=12;break}throw e.t0;case 12:Hp("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Qc.length>0&&this.qo.No((function(){return t.ea()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ta",value:function(e){var t=this,n=this.Gc.then((function(){return t.Hc=!0,e().catch((function(e){t.Wc=e,t.Hc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Wp("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Hc=!1,e}))}));return this.Gc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);var i=Mx.createAndSchedule(this,e,t,n,(function(e){return r.na(e)}));return this.zc.push(i),i}},{key:"Zc",value:function(){this.Wc&&Xp()}},{key:"verifyOperationInProgress",value:function(){}},{key:"sa",value:function(){var e=we(ge().mark((function e(){var t;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Gc,e.next=3,t;case 3:if(t!==this.Gc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ia",value:function(e){var t,n=Te(this.zc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ra",value:function(e){var t=this;return this.sa().then((function(){t.zc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Te(t.zc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.sa()}))}},{key:"oa",value:function(e){this.Yc.push(e)}},{key:"na",value:function(e){var t=this.zc.indexOf(e);this.zc.splice(t,1)}}]),e}();function $E(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Te(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var JE=function(){function e(){xe(this,e),this._progressObserver={},this._taskCompletionResolver=new tv,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Ee(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),ZE=function(e){Ce(n,e);var t=Re(n);function n(e,r,i,a){var o;return xe(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new XE,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return Ee(n,[{key:"_terminate",value:function(){return this._firestoreClient||tT(this),this._firestoreClient.terminate()}}]),n}(zE);function eT(e){return e._firestoreClient||tT(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function tT(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Km(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,RE(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new hE(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function nT(e,t,n){var r=new tv;return e.asyncQueue.enqueue(we(ge().mark((function i(){var a;return ge().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,dE(e,n);case 3:return i.next=5,vE(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),yE(a=i.t0)){i.next=13;break}throw a;case 13:Qp("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function rT(e){return function(e){return e.asyncQueue.enqueue(we(ge().mark((function t(){var n,r;return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_E(e);case 2:return n=t.sent,t.next=5,IE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Jp(e);return t.vu.delete(0),Y_(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(eT(e=UE(e,ZE)))}function iT(e){return function(e){return e.asyncQueue.enqueue(we(ge().mark((function t(){var n,r;return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_E(e);case 2:return n=t.sent,t.next=5,IE(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=we(ge().mark((function e(t){var n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Jp(t)).vu.add(0),e.next=4,$_(n);case 4:n.bu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(eT(e=UE(e,ZE)))}function aT(e,t){var n=eT(e=UE(e,ZE)),r=new JE;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new cE(e,t)}(function(e,t){if(e instanceof Uint8Array)return uE(e,t);if(e instanceof ArrayBuffer)return uE(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?vk().encode(e):e),t)}(n,z_(t));e.asyncQueue.enqueueAndForget(we(ge().mark((function t(){return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=nE,t.next=3,EE(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function oT(e,t){return function(e,t){return e.asyncQueue.enqueue(we(ge().mark((function n(){return ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Jp(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.qs.getNamedQuery(e,t)}))},n.next=3,xE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(eT(e=UE(e,ZE)),t).then((function(t){return t?new GE(e,null,t.query):null}))}function uT(e){if(e._initialized||e._terminated)throw new ev(Zp.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var sT=function(){function e(t){xe(this,e),this._byteString=t}return Ee(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Fm.fromBase64String(t))}catch(t){throw new ev(Zp.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Fm.fromUint8Array(t))}}]),e}(),cT=function(){function e(){xe(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new ev(Zp.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wv(n)}return Ee(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var lT=Ee((function e(t){xe(this,e),this._methodName=t})),fT=function(){function e(t,n){if(xe(this,e),!isFinite(t)||t<-90||t>90)throw new ev(Zp.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ev(Zp.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Ee(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return hv(this._lat,e._lat)||hv(this._long,e._long)}}]),e}(),hT=/^__.*__$/,dT=function(){function e(t,n,r){xe(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ee(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Zg(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jg(e,this.data,t,this.fieldTransforms)}}]),e}(),pT=function(){function e(t,n,r){xe(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ee(e,[{key:"toMutation",value:function(e,t){return new Zg(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function vT(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xp()}}var mT=function(){function e(t,n,r,i,a,o){xe(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Ee(e,[{key:"path",get:function(){return this.settings.path}},{key:"ca",get:function(){return this.settings.ca}},{key:"aa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}},{key:"da",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}},{key:"wa",value:function(e){return this.aa({path:void 0,la:!0})}},{key:"_a",value:function(e){return MT(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ua",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.fa(this.path.get(e))}},{key:"fa",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(vT(this.ca)&&hT.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),e}(),yT=function(){function e(t,n,r){xe(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||z_(t)}return Ee(e,[{key:"ya",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new mT({ca:e,methodName:t,ga:n,path:wv.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function gT(e){var t=e._freezeSettings(),n=z_(e._databaseId);return new yT(e._databaseId,!!t.ignoreUndefinedProperties,n)}function kT(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ya(a.merge||a.mergeFields?2:0,t,n,i);OT("Data must be an object, but it was:",o,r);var u,s,c=NT(r,o);if(a.merge)u=new Lm(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=Te(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=PT(t,l.value,n);if(!o.contains(d))throw new ev(Zp.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));FT(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new Lm(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new dT(new py(c),u,s)}var wT=function(e){Ce(n,e);var t=Re(n);function n(){return xe(this,n),t.apply(this,arguments)}return Ee(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(lT);function bT(e,t,n){return new mT({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var _T=function(e){Ce(n,e);var t=Re(n);function n(){return xe(this,n),t.apply(this,arguments)}return Ee(n,[{key:"_toFieldTransform",value:function(e){return new Bg(e.path,new Dg)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(lT),xT=function(e){Ce(n,e);var t=Re(n);function n(e,r){var i;return xe(this,n),(i=t.call(this,e)).pa=r,i}return Ee(n,[{key:"_toFieldTransform",value:function(e){var t=bT(this,e,!0),n=this.pa.map((function(e){return AT(e,t)})),r=new Lg(n);return new Bg(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(lT),IT=function(e){Ce(n,e);var t=Re(n);function n(e,r){var i;return xe(this,n),(i=t.call(this,e)).pa=r,i}return Ee(n,[{key:"_toFieldTransform",value:function(e){var t=bT(this,e,!0),n=this.pa.map((function(e){return AT(e,t)})),r=new Fg(n);return new Bg(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(lT),ET=function(e){Ce(n,e);var t=Re(n);function n(e,r){var i;return xe(this,n),(i=t.call(this,e)).Ia=r,i}return Ee(n,[{key:"_toFieldTransform",value:function(e){var t=new Vg(e.serializer,Ag(e.serializer,this.Ia));return new Bg(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(lT);function TT(e,t,n,r){var i=e.ya(1,t,n);OT("Data must be an object, but it was:",i,r);var a=[],o=py.empty();Sm(r,(function(e,r){var u=LT(t,e,n);r=ft(r);var s=i.da(u);if(r instanceof wT)a.push(u);else{var c=AT(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Lm(a);return new pT(o,u,i.fieldTransforms)}function ST(e,t,n,r,i,a){var o=e.ya(1,t,n),u=[PT(t,r,n)],s=[i];if(a.length%2!=0)throw new ev(Zp.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(PT(t,a[c])),s.push(a[c+1]);for(var l=[],f=py.empty(),h=u.length-1;h>=0;--h)if(!FT(l,u[h])){var d=u[h],p=s[h];p=ft(p);var v=o.da(d);if(p instanceof wT)l.push(d);else{var m=AT(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Lm(l);return new pT(f,y,o.fieldTransforms)}function CT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return AT(n,e.ya(r?4:3,t))}function AT(e,t){if(RT(e=ft(e)))return OT("Unsupported field value:",t,e),NT(e,t);if(e instanceof lT)return function(e,t){if(!vT(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Te(e);try{for(a.s();!(n=a.n()).done;){var o=AT(n.value,t.wa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ft(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ag(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=vv.fromDate(e);return{timestampValue:Lk(t.serializer,n)}}if(e instanceof vv){var r=new vv(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Lk(t.serializer,r)}}if(e instanceof fT)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof sT)return{bytesValue:Mk(t.serializer,e._byteString)};if(e instanceof qE){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Vk(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(FE(e)))}(e,t)}function NT(e,t){var n={};return Cm(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Sm(e,(function(e,r){var i=AT(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function RT(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof vv||e instanceof fT||e instanceof sT||e instanceof qE||e instanceof lT)}function OT(e,t,n){if(!RT(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=FE(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function PT(e,t,n){if((t=ft(t))instanceof cT)return t._internalPath;if("string"==typeof t)return LT(e,t);throw MT("Field path arguments must be of type string or ",e,!1,void 0,n)}var DT=new RegExp("[~\\*/\\[\\]]");function LT(e,t,n){if(t.search(DT)>=0)throw MT("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Oe(cT,dt(t.split(".")))._internalPath}catch(r){throw MT("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function MT(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new ev(Zp.INVALID_ARGUMENT,u+e+s)}function FT(e,t){return e.some((function(e){return e.isEqual(t)}))}var UT=function(){function e(t,n,r,i,a){xe(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Ee(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new qE(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new VT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(jT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),VT=function(e){Ce(n,e);var t=Re(n);function n(){return xe(this,n),t.apply(this,arguments)}return Ee(n,[{key:"data",value:function(){return Gn(Ae(n.prototype),"data",this).call(this)}}]),n}(UT);function jT(e,t){return"string"==typeof t?LT(e,t):t instanceof cT?t._internalPath:t._delegate._internalPath}function zT(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ev(Zp.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var BT=Ee((function e(){xe(this,e)})),qT=function(e){Ce(n,e);var t=Re(n);function n(){return xe(this,n),t.apply(this,arguments)}return Ee(n)}(BT);function GT(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof BT&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof HT})).length,n=e.filter((function(e){return e instanceof KT})).length;if(t>1||t>0&&n>0)throw new ev(Zp.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=Te(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var KT=function(e){Ce(n,e);var t=Re(n);function n(e,r,i){var a;return xe(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return Ee(n,[{key:"_apply",value:function(e){var t=this._parse(e);return iS(e._query,t),new GE(e.firestore,e.converter,ig(e._query,t))}},{key:"_parse",value:function(e){var t=gT(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new ev(Zp.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){rS(o,a);var s,c=[],l=Te(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(nS(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=nS(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||rS(o,a),u=CT(n,"where",o,"in"===a||"not-in"===a);return xy.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(qT);var HT=function(e){Ce(n,e);var t=Re(n);function n(e,r){var i;return xe(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return Ee(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Iy.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=Te(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;iS(r,a),r=ig(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new GE(e.firestore,e.converter,ig(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(BT);var WT=function(e){Ce(n,e);var t=Re(n);function n(e,r){var i;return xe(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return Ee(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new ev(Zp.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ev(Zp.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new wy(t,n);return function(e,t){if(null===Zy(e)){var n=eg(e);null!==n&&aS(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new GE(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Yy(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(qT);var QT=function(e){Ce(n,e);var t=Re(n);function n(e,r,i){var a;return xe(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return Ee(n,[{key:"_apply",value:function(e){return new GE(e.firestore,e.converter,ag(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(qT);var YT=function(e){Ce(n,e);var t=Re(n);function n(e,r,i){var a;return xe(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return Ee(n,[{key:"_apply",value:function(e){var t=tS(e,this.type,this._docOrFields,this._inclusive);return new GE(e.firestore,e.converter,function(e,t){return new Yy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(qT);function XT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return YT._create("startAt",t,!0)}function $T(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return YT._create("startAfter",t,!1)}var JT=function(e){Ce(n,e);var t=Re(n);function n(e,r,i){var a;return xe(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return Ee(n,[{key:"_apply",value:function(e){var t=tS(e,this.type,this._docOrFields,this._inclusive);return new GE(e.firestore,e.converter,function(e,t){return new Yy(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(qT);function ZT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return JT._create("endBefore",t,!1)}function eS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return JT._create("endAt",t,!0)}function tS(e,t,n,r){if(n[0]=ft(n[0]),n[0]instanceof UT)return function(e,t,n,r,i){if(!r)throw new ev(Zp.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Te(ng(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(ny(t,r.key));else{var c=r.data.field(s.field);if(Bm(c))throw new ev(Zp.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new ev(Zp.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new yy(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=gT(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new ev(Zp.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new ev(Zp.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!tg(e)&&-1!==c.indexOf("/"))throw new ev(Zp.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(gv.fromString(c));if(!bv.isDocumentKey(l))throw new ev(Zp.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new bv(l);u.push(ny(t,f))}else{var h=CT(n,r,c);u.push(h)}}return new yy(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function nS(e,t,n){if("string"==typeof(n=ft(n))){if(""===n)throw new ev(Zp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tg(t)&&-1!==n.indexOf("/"))throw new ev(Zp.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(gv.fromString(n));if(!bv.isDocumentKey(r))throw new ev(Zp.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ny(e,new bv(r))}if(n instanceof qE)return ny(e,n._key);throw new ev(Zp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(FE(n),"."))}function rS(e,t){if(!Array.isArray(e)||0===e.length)throw new ev(Zp.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function iS(e,t){if(t.isInequality()){var n=eg(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new ev(Zp.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=Zy(e);null!==i&&aS(e,r,i)}var a=function(e,t){var n,r=Te(e);try{for(r.s();!(n=r.n()).done;){var i,a=Te(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new ev(Zp.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new ev(Zp.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function aS(e,t,n){if(!n.isEqual(t))throw new ev(Zp.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var oS=function(){function e(){xe(this,e)}return Ee(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ym(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jm(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xp()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return Sm(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new fT(jm(e.latitude),jm(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=qm(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Gm(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Vm(e);return new vv(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=gv.fromString(e);$p(cw(n));var r=new Hm(n.get(1),n.get(3)),i=new bv(n.popFirst(5));return r.isEqual(t)||Wp("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function uS(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var sS=function(e){Ce(n,e);var t=Re(n);function n(e){var r;return xe(this,n),(r=t.call(this)).firestore=e,r}return Ee(n,[{key:"convertBytes",value:function(e){return new sT(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new qE(this.firestore,null,t)}}]),n}(oS);var cS=function(){function e(t,n){xe(this,e),this.hasPendingWrites=t,this.fromCache=n}return Ee(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),lS=function(e){Ce(n,e);var t=Re(n);function n(e,r,i,a,o,u){var s;return xe(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Ee(n,[{key:"exists",value:function(){return Gn(Ae(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new fS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(jT("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(UT),fS=function(e){Ce(n,e);var t=Re(n);function n(){return xe(this,n),t.apply(this,arguments)}return Ee(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Gn(Ae(n.prototype),"data",this).call(this,e)}}]),n}(lS),hS=function(){function e(t,n,r,i){xe(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new cS(i.hasPendingWrites,i.fromCache),this.query=r}return Ee(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new fS(n._firestore,n._userDataWriter,r.key,r,new cS(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ev(Zp.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new fS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new cS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new fS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new cS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:dS(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function dS(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xp()}}function pS(e,t){return e instanceof lS&&t instanceof lS?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof hS&&t instanceof hS&&e._firestore===t._firestore&&YE(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var vS=function(e){Ce(n,e);var t=Re(n);function n(e){var r;return xe(this,n),(r=t.call(this)).firestore=e,r}return Ee(n,[{key:"convertBytes",value:function(e){return new sT(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new qE(this.firestore,null,t)}}]),n}(oS);function mS(e){e=UE(e,qE);var t=UE(e.firestore,ZE),n=eT(t),r=new vS(t);return function(e,t){var n=new tv;return e.asyncQueue.enqueueAndForget(we(ge().mark((function r(){return ge().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=we(ge().mark((function e(t,n,r){var i,a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Jp(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new ev(Zp.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Fx(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,xE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new lS(t,r,e._key,n,new cS(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function yS(e){e=UE(e,GE);var t=UE(e.firestore,ZE),n=eT(t),r=new vS(t);return function(e,t){var n=new tv;return e.asyncQueue.enqueueAndForget(we(ge().mark((function r(){return ge().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=we(ge().mark((function e(t,n,r){var i,a,o,u,s;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d_(t,n,!0);case 3:i=e.sent,a=new rI(n,i.ir),o=a.sc(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Fx(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,xE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new hS(t,r,e,n)}))}function gS(e,t,n){e=UE(e,qE);var r=UE(e.firestore,ZE),i=uS(e.converter,t,n);return _S(r,[kT(gT(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Gg.none())])}function kS(e,t,n){e=UE(e,qE);for(var r=UE(e.firestore,ZE),i=gT(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return _S(r,[("string"==typeof(t=ft(t))||t instanceof cT?ST(i,"updateDoc",e._key,t,n,o):TT(i,"updateDoc",e._key,t)).toMutation(e._key,Gg.exists(!0))])}function wS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=ft(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||$E(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if($E(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof qE)l=UE(e.firestore,ZE),f=$y(e._key.path),c={next:function(t){n[s]&&n[s](xS(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=UE(e,GE);l=UE(p.firestore,ZE),f=p._query;var v=new vS(l);c={next:function(e){n[s]&&n[s](new hS(l,v,p,e))},error:n[s+1],complete:n[s+2]},zT(e._query)}return function(e,t,n,r){var i=new sE(r),a=new Xx(t,i,n);return e.asyncQueue.enqueueAndForget(we(ge().mark((function t(){return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=qx,t.next=3,SE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Dc(),e.asyncQueue.enqueueAndForget(we(ge().mark((function t(){return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Kx,t.next=3,SE(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(eT(l),f,h,c)}function bS(e,t){return function(e,t){var n=new sE(t);return e.asyncQueue.enqueueAndForget(we(ge().mark((function t(){return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Jp(e).ku.add(t),t.next()},t.next=3,SE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Dc(),e.asyncQueue.enqueueAndForget(we(ge().mark((function t(){return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Jp(e).ku.delete(t)},t.next=3,SE(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(eT(e=UE(e,ZE)),$E(t)?t:{next:t})}function _S(e,t){return function(e,t){var n=new tv;return e.asyncQueue.enqueueAndForget(we(ge().mark((function r(){return ge().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=dI,r.next=3,EE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(eT(e),t)}function xS(e,t,n){var r=n.docs.get(t._key),i=new vS(e);return new lS(e,i,t._key,r,new cS(n.hasPendingWrites,n.fromCache),t.converter)}var IS={maxAttempts:5},ES=function(){function e(t,n){xe(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=gT(t)}return Ee(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=TS(e,this._firestore),i=uS(r.converter,t,n),a=kT(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Gg.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=TS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ft(t))||t instanceof cT?ST(this._dataReader,"WriteBatch.update",i._key,t,n,o):TT(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Gg.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=TS(e,this._firestore);return this._mutations=this._mutations.concat(new ak(t._key,Gg.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new ev(Zp.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function TS(e,t){if((e=ft(e)).firestore!==t)throw new ev(Zp.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var SS=function(e){Ce(n,e);var t=Re(n);function n(e,r){var i;return xe(this,n),(i=t.call(this,e,r))._firestore=e,i}return Ee(n,[{key:"get",value:function(e){var t=this,r=TS(e,this._firestore),i=new vS(this._firestore);return Gn(Ae(n.prototype),"get",this).call(this,e).then((function(e){return new lS(t._firestore,i,r._key,e._document,new cS(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){xe(this,e),this._firestore=t,this._transaction=n,this._dataReader=gT(t)}return Ee(e,[{key:"get",value:function(e){var t=this,n=TS(e,this._firestore),r=new sS(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Xp();var i=e[0];if(i.isFoundDocument())return new UT(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new UT(t._firestore,r,n._key,null,n.converter);throw Xp()}))}},{key:"set",value:function(e,t,n){var r=TS(e,this._firestore),i=uS(r.converter,t,n),a=kT(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=TS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ft(t))||t instanceof cT?ST(this._dataReader,"Transaction.update",i._key,t,n,o):TT(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=TS(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function CS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new xT("arrayUnion",t)}function AS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new IT("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){qp=e}(fn),rn(new pt("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new ZE(new av(e.getProvider("auth-internal")),new cv(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ev(Zp.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hm(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),yn(zp,"3.13.0",e),yn(zp,"3.13.0","esm2017")}();function NS(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new ev("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function RS(){if("undefined"===typeof Uint8Array)throw new ev("unimplemented","Uint8Arrays are not available in this environment.")}function OS(){if("undefined"==typeof atob)throw new ev("unimplemented","Blobs are unavailable in Firestore in this environment.")}var PS=function(){function e(t){xe(this,e),this._delegate=t}return Ee(e,[{key:"toBase64",value:function(){return OS(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return RS(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return OS(),new e(sT.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return RS(),new e(sT.fromUint8Array(t))}}]),e}();function DS(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Te(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var LS=function(){function e(){xe(this,e)}return Ee(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){uT(e=UE(e,ZE));var n=eT(e);if(n._uninitializedComponentsProvider)throw new ev(Zp.FAILED_PRECONDITION,"SDK cache is already specified.");Qp("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new oE;return nT(n,i,new iE(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){uT(e=UE(e,ZE));var t=eT(e);if(t._uninitializedComponentsProvider)throw new ev(Zp.FAILED_PRECONDITION,"SDK cache is already specified.");Qp("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new oE;return nT(t,r,new aE(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new ev(Zp.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new tv;return e._queue.enqueueAndForgetEvenWhileRestricted(we(ge().mark((function n(){return ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=we(ge().mark((function e(t){var n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fv.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Fv.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Jb(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),MS=function(){function e(t,n,r){var i=this;xe(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Hm||(this._appCompat=t)}return Ee(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Qp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};BE(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return rT(this._delegate)}},{key:"disableNetwork",value:function(){return iT(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&DE("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){var t=new tv;return e.asyncQueue.enqueueAndForget(we(ge().mark((function n(){return ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=II,n.next=3,EE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(eT(UE(this._delegate,ZE)))}},{key:"onSnapshotsInSync",value:function(e){return bS(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new ev("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new XS(this,HE(this._delegate,e))}catch(t){throw BS(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new zS(this,WE(this._delegate,e))}catch(t){throw BS(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new WS(this,function(e,t){if(e=UE(e,zE),PE("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new ev(Zp.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new GE(e,null,function(e){return new Yy(gv.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw BS(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=UE(e,ZE);var r=Object.assign(Object.assign({},IS),n);return function(e){if(e.maxAttempts<1)throw new ev(Zp.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new tv;return e.asyncQueue.enqueueAndForget(we(ge().mark((function i(){var a;return ge().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,TE(e);case 2:a=i.sent,new fE(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(eT(e),(function(n){return t(new SS(e,n))}),r)}(this._delegate,(function(n){return e(new US(t,n))}))}},{key:"batch",value:function(){var e=this;return eT(this._delegate),new VS(new ES(this._delegate,(function(t){return _S(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return aT(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return oT(this._delegate,e).then((function(e){return e?new WS(t,e):null}))}}]),e}(),FS=function(e){Ce(n,e);var t=Re(n);function n(e){var r;return xe(this,n),(r=t.call(this)).firestore=e,r}return Ee(n,[{key:"convertBytes",value:function(e){return new PS(new sT(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return zS.forKey(t,this.firestore,null)}}]),n}(oS);var US=function(){function e(t,n){xe(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new FS(t)}return Ee(e,[{key:"get",value:function(e){var t=this,n=$S(e);return this._delegate.get(n).then((function(e){return new KS(t._firestore,new lS(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=$S(e);return n?(NS("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=$S(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=$S(e);return this._delegate.delete(t),this}}]),e}(),VS=function(){function e(t){xe(this,e),this._delegate=t}return Ee(e,[{key:"set",value:function(e,t,n){var r=$S(e);return n?(NS("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=$S(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=$S(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),jS=function(){function e(t,n,r){xe(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Ee(e,[{key:"fromFirestore",value:function(e,t){var n=new fS(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new HS(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new FS(t),n),i.set(n,a)),a}}]),e}();jS.INSTANCES=new WeakMap;var zS=function(){function e(t,n){xe(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new FS(t)}return Ee(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new XS(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new XS(this.firestore,HE(this._delegate,e))}catch(t){throw BS(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=ft(e))instanceof qE&&QE(this._delegate,e)}},{key:"set",value:function(e,t){t=NS("DocumentReference.set",t);try{return t?gS(this._delegate,e,t):gS(this._delegate,e)}catch(n){throw BS(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?kS(this._delegate,e):kS.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw BS(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return _S(UE((e=this._delegate).firestore,ZE),[new ak(e._key,Gg.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=qS(n),a=GS(n,(function(t){return new KS(e.firestore,new lS(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return wS(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?mS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=UE(e,qE);var t=UE(e.firestore,ZE);return AE(eT(t),e._key,{source:"server"}).then((function(n){return xS(t,e,n)}))}(this._delegate):function(e){e=UE(e,qE);var t=UE(e.firestore,ZE);return AE(eT(t),e._key).then((function(n){return xS(t,e,n)}))}(this._delegate)).then((function(e){return new KS(t.firestore,new lS(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(jS.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new ev("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new qE(n._delegate,r,new bv(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new qE(n._delegate,r,t))}}]),e}();function BS(e,t,n){return e.message=e.message.replace(t,n),e}function qS(e){var t,n=Te(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!DS(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function GS(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=DS(e[0])?e[0]:DS(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var KS=function(){function e(t,n){xe(this,e),this._firestore=t,this._delegate=n}return Ee(e,[{key:"ref",get:function(){return new zS(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return pS(this._delegate,e._delegate)}}]),e}(),HS=function(e){Ce(n,e);var t=Re(n);function n(){return xe(this,n),t.apply(this,arguments)}return Ee(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||Xp(),t}}]),n}(KS),WS=function(){function e(t,n){xe(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new FS(t)}return Ee(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,GT(this._delegate,function(e,t,n){var r=t,i=jT("where",e);return KT._create(i,r,n)}(t,n,r)))}catch(i){throw BS(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,GT(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=jT("orderBy",e);return WT._create(n,t)}(t,n)))}catch(r){throw BS(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,GT(this._delegate,(VE("limit",n=t),QT._create("limit",n,"F"))))}catch(r){throw BS(r,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,GT(this._delegate,(VE("limitToLast",n=t),QT._create("limitToLast",n,"L"))))}catch(r){throw BS(r,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,GT(this._delegate,XT.apply(void 0,arguments)))}catch(t){throw BS(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,GT(this._delegate,$T.apply(void 0,arguments)))}catch(t){throw BS(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,GT(this._delegate,ZT.apply(void 0,arguments)))}catch(t){throw BS(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,GT(this._delegate,eS.apply(void 0,arguments)))}catch(t){throw BS(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return YE(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?yS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=UE(e,GE);var t=UE(e.firestore,ZE),n=eT(t),r=new vS(t);return NE(n,e._query,{source:"server"}).then((function(n){return new hS(t,r,e,n)}))}(this._delegate):function(e){e=UE(e,GE);var t=UE(e.firestore,ZE),n=eT(t),r=new vS(t);return zT(e._query),NE(n,e._query).then((function(n){return new hS(t,r,e,n)}))}(this._delegate)).then((function(e){return new YS(t.firestore,new hS(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=qS(n),a=GS(n,(function(t){return new YS(e.firestore,new hS(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return wS(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(jS.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),QS=function(){function e(t,n){xe(this,e),this._firestore=t,this._delegate=n}return Ee(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new HS(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),YS=function(){function e(t,n){xe(this,e),this._firestore=t,this._delegate=n}return Ee(e,[{key:"query",get:function(){return new WS(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new HS(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new QS(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new HS(n._firestore,r))}))}},{key:"isEqual",value:function(e){return pS(this._delegate,e._delegate)}}]),e}(),XS=function(e){Ce(n,e);var t=Re(n);function n(e,r){var i;return xe(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Ee(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new zS(this.firestore,e):null}},{key:"doc",value:function(e){try{return new zS(this.firestore,void 0===e?WE(this._delegate):WE(this._delegate,e))}catch(t){throw BS(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=UE(e.firestore,ZE),r=WE(e),i=uS(e.converter,t);return _S(n,[kT(gT(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Gg.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new zS(t.firestore,e)}))}},{key:"isEqual",value:function(e){return QE(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(jS.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(WS);function $S(e){return UE(e,qE)}var JS=function(){function e(){xe(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Oe(cT,n)}return Ee(e,[{key:"isEqual",value:function(e){return(e=ft(e))instanceof cT&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(wv.keyField().canonicalString())}}]),e}(),ZS=function(){function e(t){xe(this,e),this._delegate=t}return Ee(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new _T("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new wT("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=CS.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=AS.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new ET("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),eC={Firestore:MS,GeoPoint:fT,Timestamp:vv,Blob:PS,Transaction:US,WriteBatch:VS,DocumentReference:zS,DocumentSnapshot:KS,Query:WS,QueryDocumentSnapshot:HS,QuerySnapshot:YS,CollectionReference:XS,FieldPath:JS,FieldValue:ZS,setLogLevel:function(e){var t;t=e,Gp.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new pt("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},eC)))}(e,(function(e,t){return new MS(e,t,new LS)})),e.registerVersion("@firebase/firestore-compat","0.3.12")}(qn);var tC,nC="firebasestorage.googleapis.com",rC="storageBucket",iC=function(e){Ce(n,e);var t=Re(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return xe(this,n),(i=t.call(this,aC(e),"Firebase Storage: ".concat(r," (").concat(aC(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(Se(i),n.prototype),i}return Ee(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return aC(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Je);function aC(e){return"storage/"+e}function oC(){return new iC(tC.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function uC(){return new iC(tC.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function sC(){return new iC(tC.CANCELED,"User canceled the upload/download.")}function cC(){return new iC(tC.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function lC(e){return new iC(tC.INVALID_ARGUMENT,e)}function fC(){return new iC(tC.APP_DELETED,"The Firebase app was deleted.")}function hC(e){return new iC(tC.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function dC(e,t){return new iC(tC.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function pC(e){throw new iC(tC.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(tC||(tC={}));var vC,mC=function(){function e(t,n){xe(this,e),this.bucket=t,this.path_=n}return Ee(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new iC(tC.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===nC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new iC(tC.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),yC=function(){function e(t){xe(this,e),this.promise_=Promise.reject(t)}return Ee(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function gC(e){return"string"===typeof e||e instanceof String}function kC(e){return wC()&&e instanceof Blob}function wC(){return"undefined"!==typeof Blob&&!We()}function bC(e,t,n,r){if(r<t)throw lC("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw lC("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function _C(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function xC(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function IC(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(vC||(vC={}));var EC=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this,d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];xe(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return Ee(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=oC();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?fC():sC());else i(uC())}};this.canceled_?t(0,new TC(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new TC(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===vC.NO_ERROR,a=r.getStatus();if(!n||IC(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===vC.ABORT;t(!1,new TC(!1,null,o))}else{var u=-1!==e.successCodes_.indexOf(a);t(!0,new TC(u,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),TC=Ee((function e(t,n,r){xe(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function SC(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function CC(){for(var e=SC(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(wC())return new Blob(n);throw new iC(tC.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function AC(e){if("undefined"===typeof atob)throw t="base-64",new iC(tC.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var NC={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},RC=Ee((function e(t,n){xe(this,e),this.data=t,this.contentType=n||null}));function OC(e,t){switch(e){case NC.RAW:return new RC(PC(t));case NC.BASE64:case NC.BASE64URL:return new RC(DC(e,t));case NC.DATA_URL:return new RC(function(e){var t=new LC(e);return t.base64?DC(NC.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw dC(NC.DATA_URL,"Malformed data URL.")}return PC(t)}(t.rest)}(t),new LC(t).contentType)}throw oC()}function PC(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function DC(e,t){switch(e){case NC.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw dC(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case NC.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw dC(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=AC(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw dC(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var LC=Ee((function e(t){xe(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw dC(NC.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){var n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}));var MC=function(){function e(t,n){xe(this,e);var r=0,i="";kC(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return Ee(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(kC(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(wC()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(CC.apply(null,i))}var a=n.map((function(e){return gC(e)?OC(NC.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function FC(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function UC(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function VC(e,t){return t}var jC=Ee((function e(t,n,r,i){xe(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||VC})),zC=null;function BC(){if(zC)return zC;var e=[];e.push(new jC("bucket")),e.push(new jC("generation")),e.push(new jC("metageneration")),e.push(new jC("name","fullPath",!0));var t=new jC("name");t.xform=function(e,t){return function(e){return!gC(e)||e.length<2?e:UC(e)}(t)},e.push(t);var n=new jC("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new jC("timeCreated")),e.push(new jC("updated")),e.push(new jC("md5Hash",null,!0)),e.push(new jC("cacheControl",null,!0)),e.push(new jC("contentDisposition",null,!0)),e.push(new jC("contentEncoding",null,!0)),e.push(new jC("contentLanguage",null,!0)),e.push(new jC("contentType",null,!0)),e.push(new jC("metadata","customMetadata",!0)),zC=e}function qC(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new mC(n,r);return t._makeStorageReference(i)}})}(r,e),r}function GC(e,t,n){var r=FC(t);return null===r?null:qC(e,r,n)}function KC(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var HC="prefixes",WC="items";function QC(e,t,n){var r=FC(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[HC]){var i,a=Te(n[HC]);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new mC(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n[WC]){var s,c=Te(n[WC]);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new mC(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var YC=Ee((function e(t,n,r,i){xe(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function XC(e){if(!e)throw oC()}function $C(e,t){return function(n,r){var i=GC(e,r,t);return XC(null!==i),i}}function JC(e,t){return function(n,r){var i=GC(e,r,t);return XC(null!==i),function(e,t,n,r){var i=FC(t);if(null===i)return null;if(!gC(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return _C("/b/"+o(i)+"/o/"+o(a),n,r)+xC({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function ZC(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new iC(tC.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new iC(tC.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new iC(tC.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new iC(tC.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function eA(e){var t=ZC(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new iC(tC.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function tA(e,t,n){var r=_C(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new YC(r,"GET",$C(e,n),i);return a.errorHandler=eA(t),a}function nA(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=_C(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new YC(o,"GET",function(e,t){return function(n,r){var i=QC(e,t,r);return XC(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=ZC(t),s}function rA(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function iA(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=rA(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+KC(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=MC.getBlob(c,r,l);if(null===f)throw cC();var h={name:s.fullPath},d=_C(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new YC(d,"POST",$C(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=ZC(t),v}var aA=Ee((function e(t,n,r,i){xe(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function oA(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){XC(!1)}return XC(!!n&&-1!==(t||["active"]).indexOf(n)),n}var uA=262144;function sA(e,t,n,r,i,a,o,u){var s=new aA(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new iC(tC.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw cC();var v=t.maxUploadRetryTime,m=new YC(n,"POST",(function(e,n){var i,o=oA(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?$C(t,a)(e,n):null,new aA(u,c,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=u||null,m.errorHandler=ZC(e),m}var cA={STATE_CHANGED:"state_changed"},lA={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function fA(e){switch(e){case"running":case"pausing":case"canceling":return lA.RUNNING;case"paused":return lA.PAUSED;case"success":return lA.SUCCESS;case"canceled":return lA.CANCELED;default:return lA.ERROR}}var hA=Ee((function e(t,n,r){xe(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function dA(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var pA=null,vA=function(){function e(){var t=this;xe(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=vC.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=vC.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=vC.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return Ee(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw pC("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw pC("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw pC("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw pC("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw pC("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),mA=function(e){Ce(n,e);var t=Re(n);function n(){return xe(this,n),t.apply(this,arguments)}return Ee(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(vA);function yA(){return pA?pA():new mA}var gA=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;xe(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=BC(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals(tC.CANCELED))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(IC(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,1e3),r._needToFetchStatus=!0,void r.completeTransitions_();e=uC()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals(tC.CANCELED)?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return Ee(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=s(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=rA(t,r,i),u={name:o.fullPath},s=_C(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=KC(o,n),f=e.maxUploadRetryTime,h=new YC(s,"POST",(function(e){var t;oA(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){XC(!1)}return XC(gC(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=ZC(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,yA,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new YC(n,"POST",(function(e){var t=oA(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){XC(!1)}n||XC(!1);var i=Number(n);return XC(!isNaN(i)),new aA(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=ZC(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,yA,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=uA*this._chunkMultiplier,n=new aA(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=sA(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,yA,i,a,!1);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(uA*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=tA(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,yA,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=iA(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,yA,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=sC(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=fA(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new hA(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(fA(this._state)){case lA.SUCCESS:dA(this._resolve.bind(null,this.snapshot))();break;case lA.CANCELED:case lA.ERROR:dA(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(fA(this._state)){case lA.RUNNING:case lA.PAUSED:e.next&&dA(e.next.bind(e,this.snapshot))();break;case lA.SUCCESS:e.complete&&dA(e.complete.bind(e))();break;default:e.error&&dA(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),kA=function(){function e(t,n){xe(this,e),this._service=t,this._location=n instanceof mC?n:mC.makeFromUrl(n,t.host)}return Ee(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new mC(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return UC(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new mC(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw hC(e)}}]),e}();function wA(e,t,n){return bA.apply(this,arguments)}function bA(){return(bA=we(ge().mark((function e(t,n,r){var i,a,o,u;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,_A(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,dt(u.prefixes)),(a=n.items).push.apply(a,dt(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,wA(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _A(e,t){null!=t&&"number"===typeof t.maxResults&&bC("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=nA(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,yA)}function xA(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=_C(t.fullServerUrl(),e.host,e._protocol),a=KC(n,r),o=e.maxOperationRetryTime,u=new YC(i,"PATCH",$C(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=eA(t),u}(e.storage,e._location,t,BC());return e.storage.makeRequestWithTokens(n,yA)}function IA(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=_C(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new YC(r,"GET",JC(e,n),i);return a.errorHandler=eA(t),a}(e.storage,e._location,BC());return e.storage.makeRequestWithTokens(t,yA).then((function(e){if(null===e)throw new iC(tC.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function EA(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=_C(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new YC(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=eA(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,yA)}function TA(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new mC(e._location.bucket,n);return new kA(e.storage,r)}function SA(e,t){if(e instanceof NA){var n=e;if(null==n._bucket)throw new iC(tC.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+rC+"' property when initializing the app?");var r=new kA(n,n._bucket);return null!=t?SA(r,t):r}return void 0!==t?TA(e,t):e}function CA(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof NA)return new kA(e,t);throw lC("To use ref(service, url), the first argument must be a Storage instance.")}return SA(e,t)}function AA(e,t){var n=null===t||void 0===t?void 0:t[rC];return null==n?null:mC.makeFromBucketSpec(n,e)}var NA=function(){function e(t,n,r,i,a){xe(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=nC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?mC.makeFromBucketSpec(i,this._host):AA(this._host,this.app.options)}return Ee(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=mC.makeFromBucketSpec(this._url,e):this._bucket=AA(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){bC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){bC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=we(ge().mark((function e(){var t,n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=we(ge().mark((function e(){var t,n;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new kA(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new yC(fC());var o=function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=xC(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new EC(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=we(ge().mark((function e(t,n){var r,i,a,o;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=s(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),RA="@firebase/storage",OA="0.11.2",PA="storage";function DA(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new gA(e,new MC(t),n)}(e=ft(e),t,n)}function LA(e){return function(e){e._throwIfRoot("getMetadata");var t=tA(e.storage,e._location,BC());return e.storage.makeRequestWithTokens(t,yA)}(e=ft(e))}function MA(e){return function(e){var t={prefixes:[],items:[]};return wA(e,t).then((function(){return t}))}(e=ft(e))}function FA(e,t){return CA(e=ft(e),t)}function UA(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:Ke(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function VA(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new NA(r,i,a,n,fn)}rn(new pt(PA,VA,"PUBLIC").setMultipleInstances(!0)),yn(RA,OA,""),yn(RA,OA,"esm2017");var jA=function(){function e(t,n,r){xe(this,e),this._delegate=t,this.task=n,this.ref=r}return Ee(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),zA=function(){function e(t,n){xe(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Ee(e,[{key:"snapshot",get:function(){return new jA(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new jA(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new jA(e,i,i._ref))}:{next:t.next?function(e){return t.next(new jA(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),BA=function(){function e(t,n){xe(this,e),this._delegate=t,this._service=n}return Ee(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new qA(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new qA(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),qA=function(){function e(t,n){xe(this,e),this._delegate=t,this.storage=n}return Ee(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return TA(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new zA(DA(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NC.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=OC(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new zA(new gA(this._delegate,new MC(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return MA(this._delegate).then((function(t){return new BA(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return _A(e=ft(e),t)}(this._delegate,e||void 0).then((function(e){return new BA(e,t.storage)}))}},{key:"getMetadata",value:function(){return LA(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return xA(e=ft(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return IA(ft(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),EA(ft(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw hC(e)}}]),e}(),GA=function(){function e(t,n){xe(this,e),this.app=t,this._delegate=n}return Ee(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(KA(e))throw lC("ref() expected a child path but got a URL, use refFromURL instead.");return new qA(FA(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!KA(e))throw lC("refFromURL() expected a full URL but got a child path, use ref() instead.");try{mC.makeFromUrl(e,this._delegate.host)}catch(t){throw lC("refFromUrl() expected a valid full URL but got an invalid one.")}return new qA(FA(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};UA(this._delegate,e,t,n)}}]),e}();function KA(e){return/^[A-Za-z]+:\/\//.test(e)}function HA(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new GA(r,i)}!function(e){var t={TaskState:lA,TaskEvent:cA,StringFormat:NC,Storage:GA,Reference:qA};e.INTERNAL.registerComponent(new pt("storage-compat",HA,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.2")}(qn);qn.initializeApp({apiKey:"AIzaSyBIoAyEB-ueX84CnryYohalismP8d6SGyU",authDomain:"nwitter-6a503.firebaseapp.com",projectId:"nwitter-6a503",storageBucket:"nwitter-6a503.appspot.com",messagingSenderId:"660071726496",appId:"1:660071726496:web:65fe631ea675dbd48a38c5"});var WA=qn,QA=qn.auth(),YA=qn.firestore(),XA=qn.storage(),$A=n(596),JA=function(){var e=s((0,t.useState)(""),2),n=e[0],r=e[1],i=s((0,t.useState)(""),2),a=i[0],o=i[1],u=s((0,t.useState)(!0),2),c=u[0],l=u[1],f=s((0,t.useState)(""),2),h=f[0],d=f[1],p=function(e){var t=e.target,n=t.name,i=t.value;"email"===n?r(i):"password"===n&&o(i)},v=function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!c){e.next=7;break}return e.next=5,QA.createUserWithEmailAndPassword(n,a);case 5:e.next=9;break;case 7:return e.next=9,QA.signInWithEmailAndPassword(n,a);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),d(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return(0,$A.jsxs)($A.Fragment,{children:[(0,$A.jsxs)("form",{onSubmit:v,className:"container",children:[(0,$A.jsx)("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:n,onChange:p,className:"authInput"}),(0,$A.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:a,onChange:p,className:"authInput"}),(0,$A.jsx)("input",{type:"submit",value:c?"Create Account":"Log In",className:"authInput authSubmit"}),h&&(0,$A.jsx)("span",{className:"authError",children:h})]}),(0,$A.jsx)("span",{onClick:function(){return l((function(e){return!e}))},className:"authSwitch",children:c?"Sign In":"Create Account"})]})};function ZA(e){return ZA="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZA(e)}function eN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){tN(e,t,n[t])}))}return e}function rN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var iN=function(){},aN={},oN={},uN={mark:iN,measure:iN};try{"undefined"!==typeof window&&(aN=window),"undefined"!==typeof document&&(oN=document),"undefined"!==typeof MutationObserver&&MutationObserver,"undefined"!==typeof performance&&(uN=performance)}catch(mO){}var sN=(aN.navigator||{}).userAgent,cN=void 0===sN?"":sN,lN=aN,fN=oN,hN=uN,dN=(lN.document,!!fN.documentElement&&!!fN.head&&"function"===typeof fN.addEventListener&&"function"===typeof fN.createElement),pN=(~cN.indexOf("MSIE")||cN.indexOf("Trident/"),"___FONT_AWESOME___"),vN="fa",mN="svg-inline--fa",yN="data-fa-i2svg",gN=(function(){try{return!0}catch(mO){return!1}}(),[1,2,3,4,5,6,7,8,9,10]),kN=gN.concat([11,12,13,14,15,16,17,18,19,20]),wN={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},bN=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",wN.GROUP,wN.SWAP_OPACITY,wN.PRIMARY,wN.SECONDARY].concat(gN.map((function(e){return"".concat(e,"x")}))).concat(kN.map((function(e){return"w-".concat(e)}))),lN.FontAwesomeConfig||{});if(fN&&"function"===typeof fN.querySelector){[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=rN(e,2),n=t[0],r=t[1],i=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=fN.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));void 0!==i&&null!==i&&(bN[r]=i)}))}var _N=nN({},{familyPrefix:vN,replacementClass:mN,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},bN);_N.autoReplaceSvg||(_N.observeMutations=!1);var xN=nN({},_N);lN.FontAwesomeConfig=xN;var IN=lN||{};IN[pN]||(IN[pN]={}),IN[pN].styles||(IN[pN].styles={}),IN[pN].hooks||(IN[pN].hooks={}),IN[pN].shims||(IN[pN].shims=[]);var EN=IN[pN],TN=[];dN&&((fN.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(fN.readyState)||fN.addEventListener("DOMContentLoaded",(function e(){fN.removeEventListener("DOMContentLoaded",e),1,TN.map((function(e){return e()}))})));var SN,CN="pending",AN="settled",NN="fulfilled",RN="rejected",ON=function(){},PN="undefined"!==typeof n.g&&"undefined"!==typeof n.g.process&&"function"===typeof n.g.process.emit,DN="undefined"===typeof setImmediate?setTimeout:setImmediate,LN=[];function MN(){for(var e=0;e<LN.length;e++)LN[e][0](LN[e][1]);LN=[],SN=!1}function FN(e,t){LN.push([e,t]),SN||(SN=!0,DN(MN,0))}function UN(e){var t=e.owner,n=t._state,r=t._data,i=e[n],a=e.then;if("function"===typeof i){n=NN;try{r=i(r)}catch(mO){BN(a,mO)}}VN(a,r)||(n===NN&&jN(a,r),n===RN&&BN(a,r))}function VN(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"===typeof t||"object"===ZA(t))){var r=t.then;if("function"===typeof r)return r.call(t,(function(r){n||(n=!0,t===r?zN(e,r):jN(e,r))}),(function(t){n||(n=!0,BN(e,t))})),!0}}catch(mO){return n||BN(e,mO),!0}return!1}function jN(e,t){e!==t&&VN(e,t)||zN(e,t)}function zN(e,t){e._state===CN&&(e._state=AN,e._data=t,FN(GN,e))}function BN(e,t){e._state===CN&&(e._state=AN,e._data=t,FN(KN,e))}function qN(e){e._then=e._then.forEach(UN)}function GN(e){e._state=NN,qN(e)}function KN(e){e._state=RN,qN(e),!e._handled&&PN&&n.g.process.emit("unhandledRejection",e._data,e)}function HN(e){n.g.process.emit("rejectionHandled",e)}function WN(e){if("function"!==typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof WN===!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(e,t){function n(e){BN(t,e)}try{e((function(e){jN(t,e)}),n)}catch(mO){n(mO)}}(e,this)}WN.prototype={constructor:WN,_state:CN,_then:null,_data:void 0,_handled:!1,then:function(e,t){var n={owner:this,then:new this.constructor(ON),fulfilled:e,rejected:t};return!t&&!e||this._handled||(this._handled=!0,this._state===RN&&PN&&FN(HN,this)),this._state===NN||this._state===RN?FN(UN,n):this._then.push(n),n.then},catch:function(e){return this.then(null,e)}},WN.all=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.all().");return new WN((function(t,n){var r=[],i=0;function a(e){return i++,function(n){r[e]=n,--i||t(r)}}for(var o,u=0;u<e.length;u++)(o=e[u])&&"function"===typeof o.then?o.then(a(u),n):r[u]=o;i||t(r)}))},WN.race=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.race().");return new WN((function(t,n){for(var r,i=0;i<e.length;i++)(r=e[i])&&"function"===typeof r.then?r.then(t,n):t(r)}))},WN.resolve=function(e){return e&&"object"===ZA(e)&&e.constructor===WN?e:new WN((function(t){t(e)}))},WN.reject=function(e){return new WN((function(t,n){n(e)}))};var QN={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function YN(e){if(e&&dN){var t=fN.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=fN.head.childNodes,r=null,i=n.length-1;i>-1;i--){var a=n[i],o=(a.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=a)}return fN.head.insertBefore(t,r),e}}var XN="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function $N(){for(var e=12,t="";e-- >0;)t+=XN[62*Math.random()|0];return t}function JN(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ZN(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n],";")}),"")}function eR(e){return e.size!==QN.size||e.x!==QN.x||e.y!==QN.y||e.rotate!==QN.rotate||e.flipX||e.flipY}function tR(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},a="translate(".concat(32*t.x,", ").concat(32*t.y,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),u="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(a," ").concat(o," ").concat(u)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}var nR={x:0,y:0,width:"100%",height:"100%"};function rR(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function iR(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,a=e.iconName,o=e.transform,u=e.symbol,s=e.title,c=e.maskId,l=e.titleId,f=e.extra,h=e.watchable,d=void 0!==h&&h,p=r.found?r:n,v=p.width,m=p.height,y="fak"===i,g=y?"":"fa-w-".concat(Math.ceil(v/m*16)),k=[xN.replacementClass,a?"".concat(xN.familyPrefix,"-").concat(a):"",g].filter((function(e){return-1===f.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(f.classes).join(" "),w={children:[],attributes:nN({},f.attributes,{"data-prefix":i,"data-icon":a,class:k,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(v," ").concat(m)})},b=y&&!~f.classes.indexOf("fa-fw")?{width:"".concat(v/m*16*.0625,"em")}:{};d&&(w.attributes[yN]=""),s&&w.children.push({tag:"title",attributes:{id:w.attributes["aria-labelledby"]||"title-".concat(l||$N())},children:[s]});var _=nN({},w,{prefix:i,iconName:a,main:n,mask:r,maskId:c,transform:o,symbol:u,styles:nN({},b,f.styles)}),x=r.found&&n.found?function(e){var t,n=e.children,r=e.attributes,i=e.main,a=e.mask,o=e.maskId,u=e.transform,s=i.width,c=i.icon,l=a.width,f=a.icon,h=tR({transform:u,containerWidth:l,iconWidth:s}),d={tag:"rect",attributes:nN({},nR,{fill:"white"})},p=c.children?{children:c.children.map(rR)}:{},v={tag:"g",attributes:nN({},h.inner),children:[rR(nN({tag:c.tag,attributes:nN({},c.attributes,h.path)},p))]},m={tag:"g",attributes:nN({},h.outer),children:[v]},y="mask-".concat(o||$N()),g="clip-".concat(o||$N()),k={tag:"mask",attributes:nN({},nR,{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[d,m]},w={tag:"defs",children:[{tag:"clipPath",attributes:{id:g},children:(t=f,"g"===t.tag?t.children:[t])},k]};return n.push(w,{tag:"rect",attributes:nN({fill:"currentColor","clip-path":"url(#".concat(g,")"),mask:"url(#".concat(y,")")},nR)}),{children:n,attributes:r}}(_):function(e){var t=e.children,n=e.attributes,r=e.main,i=e.transform,a=ZN(e.styles);if(a.length>0&&(n.style=a),eR(i)){var o=tR({transform:i,containerWidth:r.width,iconWidth:r.width});t.push({tag:"g",attributes:nN({},o.outer),children:[{tag:"g",attributes:nN({},o.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:nN({},r.icon.attributes,o.path)}]}]})}else t.push(r.icon);return{children:t,attributes:n}}(_),I=x.children,E=x.attributes;return _.children=I,_.attributes=E,u?function(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,a=e.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:nN({},i,{id:!0===a?"".concat(t,"-").concat(xN.familyPrefix,"-").concat(n):a}),children:r}]}]}(_):function(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,a=e.styles,o=e.transform;if(eR(o)&&n.found&&!r.found){var u={x:n.width/n.height/2,y:.5};i.style=ZN(nN({},a,{"transform-origin":"".concat(u.x+o.x/16,"em ").concat(u.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}(_)}var aR=function(){},oR=(xN.measurePerformance&&hN&&hN.mark&&hN.measure,function(e,t,n,r){var i,a,o,u=Object.keys(e),s=u.length,c=void 0!==r?function(e,t){return function(n,r,i,a){return e.call(t,n,r,i,a)}}(t,r):t;for(void 0===n?(i=1,o=e[u[0]]):(i=0,o=n);i<s;i++)o=c(o,e[a=u[i]],a,e);return o});function uR(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,r=void 0!==n&&n,i=Object.keys(t).reduce((function(e,n){var r=t[n];return!!r.icon?e[r.iconName]=r.icon:e[n]=r,e}),{});"function"!==typeof EN.hooks.addPack||r?EN.styles[e]=nN({},EN.styles[e]||{},i):EN.hooks.addPack(e,i),"fas"===e&&uR("fa",t)}var sR=EN.styles,cR=EN.shims,lR=function(){var e=function(e){return oR(sR,(function(t,n,r){return t[r]=oR(n,e,{}),t}),{})};e((function(e,t,n){return t[3]&&(e[t[3]]=n),e})),e((function(e,t,n){var r=t[2];return e[n]=n,r.forEach((function(t){e[t]=n})),e}));var t="far"in sR;oR(cR,(function(e,n){var r=n[0],i=n[1],a=n[2];return"far"!==i||t||(i="fas"),e[r]={prefix:i,iconName:a},e}),{})};lR();EN.styles;function fR(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}function hR(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,i=e.children,a=void 0===i?[]:i;return"string"===typeof e?JN(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(JN(e[n]),'" ')}),"").trim()}(r),">").concat(a.map(hR).join(""),"</").concat(t,">")}var dR=function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e?e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),r=n[0],i=n.slice(1).join("-");if(r&&"h"===i)return e.flipX=!0,e;if(r&&"v"===i)return e.flipY=!0,e;if(i=parseFloat(i),isNaN(i))return e;switch(r){case"grow":e.size=e.size+i;break;case"shrink":e.size=e.size-i;break;case"left":e.x=e.x-i;break;case"right":e.x=e.x+i;break;case"up":e.y=e.y-i;break;case"down":e.y=e.y+i;break;case"rotate":e.rotate=e.rotate+i}return e}),t):t};function pR(e){this.name="MissingIcon",this.message=e||"Icon unavailable",this.stack=(new Error).stack}pR.prototype=Object.create(Error.prototype),pR.prototype.constructor=pR;var vR={fill:"currentColor"},mR={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},yR={tag:"path",attributes:nN({},vR,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})},gR=nN({},mR,{attributeName:"opacity"});nN({},vR,{cx:"256",cy:"364",r:"28"}),nN({},mR,{attributeName:"r",values:"28;14;28;28;14;28;"}),nN({},gR,{values:"1;0;1;1;0;1;"}),nN({},vR,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),nN({},gR,{values:"1;0;0;0;0;1;"}),nN({},vR,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),nN({},gR,{values:"0;0;1;1;0;0;"}),EN.styles;function kR(e){var t=e[0],n=e[1],r=rN(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(xN.familyPrefix,"-").concat(wN.GROUP)},children:[{tag:"path",attributes:{class:"".concat(xN.familyPrefix,"-").concat(wN.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(xN.familyPrefix,"-").concat(wN.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}EN.styles;var wR='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';function bR(){var e=vN,t=mN,n=xN.familyPrefix,r=xN.replacementClass,i=wR;if(n!==e||r!==t){var a=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),u=new RegExp("\\.".concat(t),"g");i=i.replace(a,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(u,".".concat(r))}return i}var _R=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n,r;return t=e,n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach((function(t){e.definitions[t]=nN({},e.definitions[t]||{},i[t]),uR(t,i[t]),lR()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var r=n[t],i=r.prefix,a=r.iconName,o=r.icon;e[i]||(e[i]={}),e[i][a]=o})),e}}],n&&eN(t.prototype,n),r&&eN(t,r),e}();function xR(){xN.autoAddCss&&!CR&&(YN(bR()),CR=!0)}function IR(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return hR(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(dN){var t=fN.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function ER(e){var t=e.prefix,n=void 0===t?"fa":t,r=e.iconName;if(r)return fR(SR.definitions,n,r)||fR(EN.styles,n,r)}var TR,SR=new _R,CR=!1,AR={transform:function(e){return dR(e)}},NR=(TR=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?QN:n,i=t.symbol,a=void 0!==i&&i,o=t.mask,u=void 0===o?null:o,s=t.maskId,c=void 0===s?null:s,l=t.title,f=void 0===l?null:l,h=t.titleId,d=void 0===h?null:h,p=t.classes,v=void 0===p?[]:p,m=t.attributes,y=void 0===m?{}:m,g=t.styles,k=void 0===g?{}:g;if(e){var w=e.prefix,b=e.iconName,_=e.icon;return IR(nN({type:"icon"},e),(function(){return xR(),xN.autoA11y&&(f?y["aria-labelledby"]="".concat(xN.replacementClass,"-title-").concat(d||$N()):(y["aria-hidden"]="true",y.focusable="false")),iR({icons:{main:kR(_),mask:u?kR(u.icon):{found:!1,width:null,height:null,icon:{}}},prefix:w,iconName:b,transform:nN({},QN,r),symbol:a,title:f,maskId:c,titleId:d,extra:{attributes:y,styles:k,classes:v}})}))}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(e||{}).icon?e:ER(e||{}),r=t.mask;return r&&(r=(r||{}).icon?r:ER(r||{})),TR(n,nN({},t,{mask:r}))});function RR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function OR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RR(Object(n),!0).forEach((function(t){DR(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function PR(e){return PR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PR(e)}function DR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LR(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function MR(e){return function(e){if(Array.isArray(e))return FR(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return FR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FR(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function UR(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var VR=["style"];var jR=!1;try{jR=!0}catch(mO){}function zR(e){return e&&"object"===PR(e)&&e.prefix&&e.iconName&&e.icon?e:AR.icon?AR.icon(e):null===e?null:e&&"object"===PR(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function BR(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?DR({},e,t):{}}var qR=["forwardedRef"];function GR(e){var t=e.forwardedRef,n=LR(e,qR),r=n.icon,i=n.mask,a=n.symbol,o=n.className,u=n.title,s=n.titleId,c=n.maskId,l=zR(r),f=BR("classes",[].concat(MR(function(e){var t,n=e.beat,r=e.fade,i=e.beatFade,a=e.bounce,o=e.shake,u=e.flash,s=e.spin,c=e.spinPulse,l=e.spinReverse,f=e.pulse,h=e.fixedWidth,d=e.inverse,p=e.border,v=e.listItem,m=e.flip,y=e.size,g=e.rotation,k=e.pull,w=(DR(t={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":a,"fa-shake":o,"fa-flash":u,"fa-spin":s,"fa-spin-reverse":l,"fa-spin-pulse":c,"fa-pulse":f,"fa-fw":h,"fa-inverse":d,"fa-border":p,"fa-li":v,"fa-flip":!0===m,"fa-flip-horizontal":"horizontal"===m||"both"===m,"fa-flip-vertical":"vertical"===m||"both"===m},"fa-".concat(y),"undefined"!==typeof y&&null!==y),DR(t,"fa-rotate-".concat(g),"undefined"!==typeof g&&null!==g&&0!==g),DR(t,"fa-pull-".concat(k),"undefined"!==typeof k&&null!==k),DR(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(w).map((function(e){return w[e]?e:null})).filter((function(e){return e}))}(n)),MR(o.split(" ")))),h=BR("transform","string"===typeof n.transform?AR.transform(n.transform):n.transform),d=BR("mask",zR(i)),p=NR(l,OR(OR(OR(OR({},f),h),d),{},{symbol:a,title:u,titleId:s,maskId:c}));if(!p)return function(){var e;!jR&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",l),null;var v=p.abstract,m={ref:t};return Object.keys(n).forEach((function(e){GR.defaultProps.hasOwnProperty(e)||(m[e]=n[e])})),HR(v[0],m)}GR.displayName="FontAwesomeIcon",GR.propTypes={beat:h().bool,border:h().bool,beatFade:h().bool,bounce:h().bool,className:h().string,fade:h().bool,flash:h().bool,mask:h().oneOfType([h().object,h().array,h().string]),maskId:h().string,fixedWidth:h().bool,inverse:h().bool,flip:h().oneOf([!0,!1,"horizontal","vertical","both"]),icon:h().oneOfType([h().object,h().array,h().string]),listItem:h().bool,pull:h().oneOf(["right","left"]),pulse:h().bool,rotation:h().oneOf([0,90,180,270]),shake:h().bool,size:h().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:h().bool,spinPulse:h().bool,spinReverse:h().bool,symbol:h().oneOfType([h().bool,h().string]),title:h().string,titleId:h().string,transform:h().oneOfType([h().string,h().object]),swapOpacity:h().bool},GR.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var KR,HR=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var i=(n.children||[]).map((function(n){return e(t,n)})),a=Object.keys(n.attributes||{}).reduce((function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=r.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,r=t.indexOf(":"),i=UR(t.slice(0,r)),a=t.slice(r+1).trim();return i.startsWith("webkit")?e[(n=i,n.charAt(0).toUpperCase()+n.slice(1))]=a:e[i]=a,e}),{});break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[UR(t)]=r}return e}),{attrs:{}}),o=r.style,u=void 0===o?{}:o,s=LR(r,VR);return a.attrs.style=OR(OR({},a.attrs.style),u),t.apply(void 0,[n.tag,OR(OR({},a.attrs),s)].concat(MR(i)))}.bind(null,t.createElement),WR={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]},QR={prefix:"fab",iconName:"google",icon:[488,512,[],"f1a0","M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"]},YR={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]},XR=function(){var e=function(){var e=we(ge().mark((function e(t){var n,r;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(n=t.target.name)?r=new WA.auth.GoogleAuthProvider:"github"===n&&(r=new WA.auth.GithubAuthProvider),e.next=4,QA.signInWithPopup(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,$A.jsxs)("div",{className:"authContainer",children:[(0,$A.jsx)(GR,{icon:YR,color:"#04AAFF",size:"3x",style:{marginBottom:30}}),(0,$A.jsx)(JA,{}),(0,$A.jsxs)("div",{className:"authBtns",children:[(0,$A.jsxs)("button",{onClick:e,name:"google",className:"authBtn",children:["Continue with Google ",(0,$A.jsx)(GR,{icon:QR})]}),(0,$A.jsxs)("button",{onClick:e,name:"github",className:"authBtn",children:["Continue with Github ",(0,$A.jsx)(GR,{icon:WR})]})]})]})},$R={prefix:"fas",iconName:"pencil-alt",icon:[512,512,[],"f303","M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"]},JR={prefix:"fas",iconName:"plus",icon:[448,512,[],"f067","M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"]},ZR={prefix:"fas",iconName:"times",icon:[352,512,[],"f00d","M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"]},eO={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"]},tO={prefix:"fas",iconName:"user",icon:[448,512,[],"f007","M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"]},nO=function(e){var n=e.nweetObj,r=e.isOwner,i=s((0,t.useState)(!1),2),a=i[0],o=i[1],u=s((0,t.useState)(n.text),2),c=u[0],l=u[1],f=function(){var e=we(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){e.next=7;break}return e.next=4,YA.doc("nweets/".concat(n.id)).delete();case 4:if(""===n.attachmentUrl){e.next=7;break}return e.next=7,XA.refFromURL(n.attachmentUrl).delete();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){return o((function(e){return!e}))},d=function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,YA.doc("nweets/".concat(n.id)).update({text:c});case 3:o(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,$A.jsx)("div",{className:"nweet",children:a?(0,$A.jsxs)($A.Fragment,{children:[(0,$A.jsxs)("form",{onSubmit:d,className:"container nweetEdit",children:[(0,$A.jsx)("input",{onChange:function(e){var t=e.target.value;l(t)},value:c,required:!0,placeholder:"Edit your nweet",autoFocus:!0,className:"formInput"}),(0,$A.jsx)("input",{type:"submit",value:"Update Nweet",className:"formBtn"})]}),(0,$A.jsx)("button",{onClick:h,className:"formBtn cancelBtn",children:"Cancel"})]}):(0,$A.jsxs)($A.Fragment,{children:[(0,$A.jsx)("h4",{children:n.text}),n.attachmentUrl&&(0,$A.jsx)("img",{src:n.attachmentUrl,width:"50px",height:"50px",alt:"nweet"}),r&&(0,$A.jsxs)("div",{className:"nweet__actions",children:[(0,$A.jsx)("span",{onClick:f,children:(0,$A.jsx)(GR,{icon:eO})}),(0,$A.jsx)("span",{onClick:h,children:(0,$A.jsx)(GR,{icon:$R})})]})]})})},rO={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},iO=new Uint8Array(16);function aO(){if(!KR&&!(KR="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return KR(iO)}for(var oO=[],uO=0;uO<256;++uO)oO.push((uO+256).toString(16).slice(1));function sO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(oO[e[t+0]]+oO[e[t+1]]+oO[e[t+2]]+oO[e[t+3]]+"-"+oO[e[t+4]]+oO[e[t+5]]+"-"+oO[e[t+6]]+oO[e[t+7]]+"-"+oO[e[t+8]]+oO[e[t+9]]+"-"+oO[e[t+10]]+oO[e[t+11]]+oO[e[t+12]]+oO[e[t+13]]+oO[e[t+14]]+oO[e[t+15]]).toLowerCase()}var cO=function(e,t,n){if(rO.randomUUID&&!t&&!e)return rO.randomUUID();var r=(e=e||{}).random||(e.rng||aO)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return sO(r)},lO=function(e){var n=e.userObj,r=s((0,t.useState)(""),2),i=r[0],a=r[1],o=s((0,t.useState)(""),2),u=o[0],c=o[1],l=function(){var e=we(ge().mark((function e(t){var r,o,s;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==i){e.next=3;break}return e.abrupt("return");case 3:if(r="",""===u){e.next=13;break}return o=XA.ref().child("".concat(n.uid,"/").concat(cO())),e.next=8,o.putString(u,"data_url");case 8:return s=e.sent,e.next=11,s.ref.getDownloadURL();case 11:r=e.sent,h();case 13:return e.next=15,YA.collection("nweets").add({text:i,createdAt:Date.now(),creatorId:n.uid,attachmentUrl:r});case 15:a(""),c("");case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=(0,t.useRef)(),h=function(){f.current.value="",c("")};return(0,$A.jsx)($A.Fragment,{children:(0,$A.jsxs)("form",{onSubmit:l,className:"factoryForm",children:[(0,$A.jsxs)("div",{className:"factoryInput__container",children:[(0,$A.jsx)("input",{className:"factoryInput__input",value:i,onChange:function(e){e.preventDefault();var t=e.target.value;a(t)},type:"text",placeholder:"What's on your mind?",maxLength:120}),(0,$A.jsx)("input",{type:"submit",value:"\u2192",className:"factoryInput__arrow",style:{cursor:"pointer"}})]}),(0,$A.jsxs)("label",{htmlFor:"attach-file",className:"factoryInput__label",children:[(0,$A.jsx)("span",{children:"Add photos"}),(0,$A.jsx)(GR,{icon:JR})]}),(0,$A.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",ref:f,onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;c(t)},Boolean(t)&&n.readAsDataURL(t)},style:{opacity:0}}),u&&(0,$A.jsxs)("div",{className:"factoryForm__attachment",children:[(0,$A.jsx)("img",{src:u,style:{backgroundImage:u}}),(0,$A.jsxs)("div",{className:"factoryForm__clear",onClick:h,children:[(0,$A.jsx)("span",{children:"Remove"}),(0,$A.jsx)(GR,{icon:ZR})]})]})]})})},fO=function(e){var n=e.userObj,r=s((0,t.useState)([]),2),i=r[0],a=r[1];return(0,t.useEffect)((function(){YA.collection("nweets").orderBy("createdAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return St({id:e.id},e.data())}));a(t)}))}),[]),(0,$A.jsxs)("div",{className:"container",children:[(0,$A.jsx)(lO,{userObj:n}),(0,$A.jsx)("div",{style:{marginTop:30},children:i.map((function(e){return(0,$A.jsx)(nO,{nweetObj:e,isOwner:e.creatorId===n.uid},e.id)}))})]})},hO=function(e){var n=e.userObj,r=e.refreshUser,i=ue(W),a=s((0,t.useState)(n.displayName),2),o=a[0],u=a[1],c=function(){var e=we(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n.displayName===o){e.next=5;break}return e.next=4,n.updateProfile({displayName:o});case 4:r();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,$A.jsxs)("div",{className:"container",children:[(0,$A.jsxs)("form",{onSubmit:c,className:"profileForm",children:[(0,$A.jsx)("input",{onChange:function(e){var t=e.target.value;u(t)},type:"text",placeholder:"Display name",value:o,autoFocus:!0,className:"formInput"}),(0,$A.jsx)("input",{type:"submit",value:"Update Profile",className:"formBtn",style:{marginTop:10}})]}),(0,$A.jsx)("span",{className:"formBtn cancelBtn logOut",onClick:function(){QA.signOut(),i.push("/")},children:"Log Out"})]})},dO=function(e){var t=e.userObj;return(0,$A.jsx)("nav",{children:(0,$A.jsxs)("ul",{style:{display:"flex",justifyContent:"center",marginTop:50},children:[(0,$A.jsx)("li",{children:(0,$A.jsx)(pe,{to:"/",style:{marginRight:10},children:(0,$A.jsx)(GR,{icon:YR,color:"#04AAFF",size:"2x"})})}),(0,$A.jsx)("li",{children:(0,$A.jsxs)(pe,{to:"/profile",style:{marginLeft:10,display:"flex",flexDirection:"column",alignItems:"center",fontSize:12},children:[(0,$A.jsx)(GR,{icon:tO,color:"#04AAFF",size:"2x"}),(0,$A.jsx)("span",{style:{marginTop:10},children:t.displayName?"".concat(t.displayName,"\uc758 Profile"):"Profile"})]})})]})})},pO=function(e){var t=e.isLoggedIn,n=e.userObj,r=e.refreshUser;return(0,$A.jsxs)(se,{children:[t&&(0,$A.jsx)(dO,{userObj:n}),(0,$A.jsx)(oe,{children:(0,$A.jsx)($A.Fragment,{children:t?(0,$A.jsxs)("div",{style:{maxWidth:"890px",width:"100%",margin:"0 auto",marginTop:"80px",display:"flex",justifyContent:"center"},children:[(0,$A.jsx)(ee,{exact:!0,path:"/",children:(0,$A.jsx)(fO,{userObj:n})}),(0,$A.jsx)(ee,{exact:!0,path:"/profile",children:(0,$A.jsx)(hO,{refreshUser:r,userObj:n})})]}):(0,$A.jsx)(ee,{exact:!0,path:"/",children:(0,$A.jsx)(XR,{})})})})]})};var vO=function(){var e=s((0,t.useState)(!1),2),n=e[0],r=e[1],i=s((0,t.useState)(null),2),a=i[0],o=i[1];return(0,t.useEffect)((function(){QA.onAuthStateChanged((function(e){o(!!e&&{uid:e.uid,displayName:e.displayName,updateProfile:function(t){return e.updateProfile(t)}}),r(!0)}))}),[]),(0,$A.jsx)($A.Fragment,{children:n?(0,$A.jsx)(pO,{isLoggedIn:Boolean(a),userObj:a,refreshUser:function(){var e=QA.currentUser;o({uid:e.uid,displayName:e.displayName,updateProfile:function(t){return e.updateProfile(t)}})}}):"initializing..."})};r.render((0,$A.jsx)(t.StrictMode,{children:(0,$A.jsx)(vO,{})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.2c510a4b.js.map